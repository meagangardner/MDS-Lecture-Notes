
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Lecture 5: Numpy &#8212; DSCI 511 Python Programming for Data Science</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'lecture-notes/lecture5_numpy';</script>
    <link rel="canonical" href="./lecture-notes/lecture5_numpy.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Lecture 6: Review of data types, conditionals and iteration" href="lecture6-data-types-review-conditionals-loops.html" />
    <link rel="prev" title="Lecture 4: Plotting, Merging and Grouping" href="lecture4_plotting-merging-and-grouping.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../README.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/hex_sticker_small.png" class="logo__image only-light" alt="DSCI 511 Python Programming for Data Science - Home"/>
    <script>document.write(`<img src="../_static/hex_sticker_small.png" class="logo__image only-dark" alt="DSCI 511 Python Programming for Data Science - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../README.html">
                    DSCI 511: Python Programming for Data Science
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Lectures</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="lecture1_intro-to-python-via-pandas.html">Lecture 1: Introduction to Pandas</a></li>






<li class="toctree-l1"><a class="reference internal" href="lecture2_data-types-operators-and-tidy-data.html">Lecture 2: Reshaping data</a></li>





<li class="toctree-l1"><a class="reference internal" href="lecture3_advanced-data-wrangling-with-pandas.html">Lecture 3: Advanced data wrangling with Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="lecture4_plotting-merging-and-grouping.html">Lecture 4: Plotting, Merging and Grouping</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Lecture 5: Numpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="lecture6-data-types-review-conditionals-loops.html">Lecture 6: Review of data types, conditionals and iteration</a></li>
<li class="toctree-l1"><a class="reference internal" href="lecture7-functions_testing.html">Lecture 7: Functions &amp; Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="lecture8-classes-and-style.html">Lecture 8: Classes and Style</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.ubc.ca/mds-2024-25/DSCI_511_py-prog_students" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.ubc.ca/mds-2024-25/DSCI_511_py-prog_students/issues/new?title=Issue%20on%20page%20%2Flecture-notes/lecture5_numpy.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/lecture-notes/lecture5_numpy.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Lecture 5: Numpy</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lecture-learning-objectives">Lecture Learning Objectives</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-is-numpy">What is NumPy</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#almost-everything-in-scientific-python-relies-on-numpy">Almost everything in scientific Python relies on NumPy</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#numpy-arrays">NumPy arrays</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#why-is-it-important-to-have-the-same-dtype">Why is it important to have the same <code class="docutils literal notranslate"><span class="pre">dtype</span></code>?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#our-first-array">Our first array:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#what-is-vectorization">What is vectorization?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#relationship-to-pandas">Relationship to Pandas</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-ndarrays">Creating <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>s</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#from-existing-data">From existing data</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#from-other-numpy-functions">From other Numpy functions</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#functions-for-creating-ndarrays">Functions for creating <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>s</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mathematical-operations-with-ndarrays">Mathematical operations with <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>s</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mathematical-operators">Mathematical operators</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mathematical-numpy-functions">Mathematical Numpy functions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#np-sum"><code class="docutils literal notranslate"><span class="pre">np.sum()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#np-log"><code class="docutils literal notranslate"><span class="pre">np.log()</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#mathematical-functions-for-ndarrays">Mathematical functions for <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>s</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#indexing-and-slicing-ndarrays">Indexing and slicing <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>s</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-a-single-element-from-a-3d-ndarray">Getting a single element from a 3D <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-all-the-elements-from-one-row-from-a-particular-dimension">Getting all the elements from one row from a particular dimension</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-a-slice-of-an-entire-dimension">Getting a slice of an entire dimension</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#boolean-indexing-ndarrays">Boolean indexing <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>s</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#returning-values-above-or-below-a-threshold">Returning values above or below a threshold</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#broadcasting">Broadcasting</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#reshaping-ndarrays">Reshaping <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>s</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#numpy-transpose"><code class="docutils literal notranslate"><span class="pre">numpy.transpose()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#numpy-reshape"><code class="docutils literal notranslate"><span class="pre">numpy.reshape()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#numpy-ndarray-flatten"><code class="docutils literal notranslate"><span class="pre">numpy.ndarray.flatten()</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#appendix-optional">Appendix (OPTIONAL)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#array-data-type">Array data type</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#memory-layout-strides">Memory layout &amp; strides</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#why-do-we-care">Why do we care?</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#reshaping">Reshaping</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#super-speed-code">Super-speed code</a></li>
</ul>
</li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <a class="reference internal image-reference" href="../_images/dsci511_header.png"><img alt="../_images/dsci511_header.png" src="../_images/dsci511_header.png" style="width: 600px;" />
</a>
<section id="lecture-5-numpy">
<h1>Lecture 5: Numpy<a class="headerlink" href="#lecture-5-numpy" title="Link to this heading">#</a></h1>
<section id="lecture-learning-objectives">
<h2>Lecture Learning Objectives<a class="headerlink" href="#lecture-learning-objectives" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Explain what a NumPy array is, and why it is useful in data science.</p></li>
<li><p>Explain the relationship and differences between <code class="docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>, <code class="docutils literal notranslate"><span class="pre">pandas.Series</span></code> and <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code> objects in Python.</p></li>
<li><p>Use NumPy to create arrays with Numpy functions including <code class="docutils literal notranslate"><span class="pre">numpy.array()</span></code>, <code class="docutils literal notranslate"><span class="pre">numpy.arange()</span></code>, <code class="docutils literal notranslate"><span class="pre">numpy.linspace()</span></code> and <code class="docutils literal notranslate"><span class="pre">numpy.full()</span></code>, <code class="docutils literal notranslate"><span class="pre">numpy.zeros()</span></code> and <code class="docutils literal notranslate"><span class="pre">numpy.random.rand()</span></code></p></li>
<li><p>Perform mathematical operations on and with arrays, like <code class="docutils literal notranslate"><span class="pre">+</span></code>, <code class="docutils literal notranslate"><span class="pre">-</span></code>, <code class="docutils literal notranslate"><span class="pre">*</span></code>, <code class="docutils literal notranslate"><span class="pre">**</span></code> on numeric values</p></li>
<li><p>Use NumPy math functions like <code class="docutils literal notranslate"><span class="pre">numpy.sum()</span></code>, <code class="docutils literal notranslate"><span class="pre">numpy.mean()</span></code>, <code class="docutils literal notranslate"><span class="pre">numpy.min()</span></code>, <code class="docutils literal notranslate"><span class="pre">numpy.max()</span></code>, <code class="docutils literal notranslate"><span class="pre">numpy.log()</span></code> as stand-alone functions or as methods of numpy arrays (when available)</p></li>
<li><p>Be able to access values from a NumPy array by numeric indexing and slicing and boolean indexing</p></li>
<li><p>Explain what broadcasting is and how to use it.</p></li>
<li><p>Reshape arrays by adding/removing/reshaping axes with <code class="docutils literal notranslate"><span class="pre">numpy.transpose()</span></code>, <code class="docutils literal notranslate"><span class="pre">numpy.reshape()</span></code>, <code class="docutils literal notranslate"><span class="pre">numpy.ravel()</span></code>, <code class="docutils literal notranslate"><span class="pre">numpy.flatten()</span></code></p></li>
</ul>
</section>
<section id="what-is-numpy">
<h2>What is NumPy<a class="headerlink" href="#what-is-numpy" title="Link to this heading">#</a></h2>
<p><strong>NumPy -&gt; “Numerical Python extensions”.</strong></p>
<p>NumPy offers:</p>
<ul class="simple">
<li><p>Arrays</p></li>
<li><p>Mathematical Constants</p></li>
<li><p>Mathematical Functions</p></li>
</ul>
<p>The name NumPy is derived from <strong>“Numerical Python extensions”.</strong></p>
<p>NumPy is a Python library used primarily for computing involving numbers. It is especially useful as it provides a multidimensional array object, called an <strong>array</strong>. In addition, NumPy also offers numerous other mathematical functions used in the domain of Linear Algebra and Calculus. NumPy is written in C, making NumPy arrays faster and more memory efficient than Python lists, read more <a class="reference external" href="https://www.labri.fr/perso/nrougier/from-python-to-numpy/">here</a>). The Numpy docs are excellent: <a class="reference external" href="https://numpy.org/doc/stable/index.html">https://numpy.org/doc/stable/index.html</a></p>
<section id="almost-everything-in-scientific-python-relies-on-numpy">
<h3>Almost everything in scientific Python relies on NumPy<a class="headerlink" href="#almost-everything-in-scientific-python-relies-on-numpy" title="Link to this heading">#</a></h3>
<a class="reference internal image-reference" href="https://media.springernature.com/full/springer-static/image/art%3A10.1038%2Fs41586-020-2649-2/MediaObjects/41586_2020_2649_Fig2_HTML.png?as=webp"><img alt="https://media.springernature.com/full/springer-static/image/art%3A10.1038%2Fs41586-020-2649-2/MediaObjects/41586_2020_2649_Fig2_HTML.png?as=webp" src="https://media.springernature.com/full/springer-static/image/art%3A10.1038%2Fs41586-020-2649-2/MediaObjects/41586_2020_2649_Fig2_HTML.png?as=webp" style="width: 500px;" />
</a>
<p><em><strong>Source</strong>: Harris, C.R., Millman, K.J., van der Walt, S.J. et al. Array programming with NumPy. Nature 585, 357–362 (2020). https://doi.org/10.1038/s41586-020-2649-2</em></p>
</section>
</section>
<section id="numpy-arrays">
<h2>NumPy arrays<a class="headerlink" href="#numpy-arrays" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>“n-dimensional” data structures called <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>s, which must be rectilinear</p></li>
<li><p>Can contain all the basic <code class="docutils literal notranslate"><span class="pre">dtype</span></code>s, e.g., floats, integers, strings etc, but work best with numeric data</p></li>
<li><p>Generally homogeneous, meaning that items in the array should be of the same type. Type coercion usually happens when creating an array from mixed types.</p></li>
<li><p>Are vectorized (apply operations (like addition, subtraction, multiplication, etc.) over an entire array without needing to explicitly write loops)</p></li>
<li><p>Compatible with NumPy’s vast collection of built-in functions</p></li>
</ul>
<a class="reference internal image-reference" href="../_images/numpy_arrays.png"><img alt="../_images/numpy_arrays.png" src="../_images/numpy_arrays.png" style="width: 400px;" />
</a>
<p><em><strong>Source:</strong> <a class="reference external" href="https://medium.com/hackernoon/10-machine-learning-data-science-and-deep-learning-courses-for-programmers-7edc56078cde">Medium.com</a></em></p>
<section id="why-is-it-important-to-have-the-same-dtype">
<h3>Why is it important to have the same <code class="docutils literal notranslate"><span class="pre">dtype</span></code>?<a class="headerlink" href="#why-is-it-important-to-have-the-same-dtype" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>We can allocate memory in advance knowing that all items are the same <code class="docutils literal notranslate"><span class="pre">dtype</span></code></p></li>
<li><p>Items are stored in contiguous block of memory</p></li>
</ul>
<a class="reference internal image-reference" href="https://jakevdp.github.io/PythonDataScienceHandbook/figures/array_vs_list.png"><img alt="https://jakevdp.github.io/PythonDataScienceHandbook/figures/array_vs_list.png" src="https://jakevdp.github.io/PythonDataScienceHandbook/figures/array_vs_list.png" style="width: 600px;" />
</a>
<p><em><strong>Source:</strong> https://jakevdp.github.io/PythonDataScienceHandbook/</em></p>
</section>
<section id="our-first-array">
<h3>Our first array:<a class="headerlink" href="#our-first-array" title="Link to this heading">#</a></h3>
<p>We can make arrays in many ways, but we’ll create our first one from a list:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">my_list</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1, 2, 3, 4, 5]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="n">my_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="n">my_array</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([1, 2, 3, 4, 5])
</pre></div>
</div>
</div>
</div>
<p>We can learn things about our array from functions and attributes we have met before:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">my_array</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>numpy.ndarray
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_array</span><span class="o">.</span><span class="n">dtype</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>dtype(&#39;int64&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_array</span><span class="o">.</span><span class="n">shape</span> <span class="c1"># elements in each dimension</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(5,)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_array</span><span class="o">.</span><span class="n">size</span> <span class="c1"># elements in total</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>5
</pre></div>
</div>
</div>
</div>
<p>And because they can come in $n$ dimensions, we also sometimes want to use <code class="docutils literal notranslate"><span class="pre">numpy.ndim</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_array</span><span class="o">.</span><span class="n">ndim</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1
</pre></div>
</div>
</div>
</div>
<p>And we can use numerical subsetting to get elements back from our array:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_array</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([3, 4])
</pre></div>
</div>
</div>
</div>
</section>
<section id="what-is-vectorization">
<h3>What is vectorization?<a class="headerlink" href="#what-is-vectorization" title="Link to this heading">#</a></h3>
<p>Vectorization is the ability to operate on objects with multiple elements in an element-wise fashion, without loops.</p>
<p>Here’s an example where because <code class="docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>s are vectorized we can add 5 to each element using <code class="docutils literal notranslate"><span class="pre">+</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_array</span> <span class="o">+</span> <span class="mi">5</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([ 6,  7,  8,  9, 10])
</pre></div>
</div>
</div>
</div>
<p>In contrast, to add 5 to every element in a list, we need to iterate over every item with a loop:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_list</span> <span class="o">+</span> <span class="mi">5</span> <span class="c1"># throws an error</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">TypeError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">11</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">my_list</span> <span class="o">+</span> <span class="mi">5</span> <span class="c1"># throws an error</span>

<span class="ne">TypeError</span>: can only concatenate list (not &quot;int&quot;) to list
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">my_list</span><span class="p">)):</span>
    <span class="n">my_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">my_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">5</span>
<span class="n">my_list</span>    
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[6, 7, 8, 9, 10]
</pre></div>
</div>
</div>
</div>
</section>
<section id="relationship-to-pandas">
<h3>Relationship to Pandas<a class="headerlink" href="#relationship-to-pandas" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>NumPy <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> are the object that Pandas <code class="docutils literal notranslate"><span class="pre">Series</span></code> objects are built on top of.</p></li>
<li><p>The elements/values in a <code class="docutils literal notranslate"><span class="pre">Series</span></code> are actually represented as an <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> in memory.</p></li>
<li><p>Pandas <code class="docutils literal notranslate"><span class="pre">Series</span></code> objects have an attribute called an index that is used to label and access its elements. NumPy <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>s do not have an index and instead can only be accessed by numerical subsetting.</p></li>
<li><p>We can easily convert a NumPy <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> to Pandas <code class="docutils literal notranslate"><span class="pre">Series</span></code> object via <code class="docutils literal notranslate"><span class="pre">pandas.Series()</span></code>, and we can covert a Pandas <code class="docutils literal notranslate"><span class="pre">Series</span></code> to a a NumPy <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> via <code class="docutils literal notranslate"><span class="pre">pandas.Series.to_numpy()</span></code></p></li>
</ul>
<a class="reference internal image-reference" href="../_images/numpy-series.png"><img alt="../_images/numpy-series.png" src="../_images/numpy-series.png" style="width: 375px;" />
</a>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_array</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([1, 2, 3, 4, 5])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="n">my_series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">my_array</span><span class="p">)</span>
<span class="n">my_series</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0    1
1    2
2    3
3    4
4    5
dtype: int64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_array_from_series</span> <span class="o">=</span> <span class="n">my_series</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>
<span class="n">my_array_from_series</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([1, 2, 3, 4, 5])
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="creating-ndarrays">
<h2>Creating <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>s<a class="headerlink" href="#creating-ndarrays" title="Link to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">ndarray</span></code>s are typically created using two main methods:</p>
<ul class="simple">
<li><p>From existing data (usually lists or tuples) using <code class="docutils literal notranslate"><span class="pre">numpy.array()</span></code>, like we saw above; or,</p></li>
<li><p>Using other Numpy functions such as <code class="docutils literal notranslate"><span class="pre">numpy.arange()</span></code>, <code class="docutils literal notranslate"><span class="pre">numpy.linspace()</span></code>, <code class="docutils literal notranslate"><span class="pre">numpy.zeros()</span></code>, etc.</p></li>
</ul>
<section id="from-existing-data">
<h3>From existing data<a class="headerlink" href="#from-existing-data" title="Link to this heading">#</a></h3>
<p>Here we take two lists to create a 2D <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> (of DNA sequences that correspond to amino acid codons):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">codons</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="s2">&quot;ttt&quot;</span><span class="p">,</span> <span class="s2">&quot;ttc&quot;</span><span class="p">,</span> <span class="s2">&quot;ttaere&quot;</span><span class="p">,</span> <span class="s2">&quot;ttg&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;ctt&quot;</span><span class="p">,</span> <span class="s2">&quot;ctc&quot;</span><span class="p">,</span> <span class="s2">&quot;cta&quot;</span><span class="p">,</span> <span class="s2">&quot;ctg&quot;</span><span class="p">]])</span>
<span class="n">codons</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[&#39;ttt&#39;, &#39;ttc&#39;, &#39;ttaere&#39;, &#39;ttg&#39;],
       [&#39;ctt&#39;, &#39;ctc&#39;, &#39;cta&#39;, &#39;ctg&#39;]], dtype=&#39;&lt;U6&#39;)
</pre></div>
</div>
</div>
</div>
<blockquote>
<div><p>Note: See the <code class="docutils literal notranslate"><span class="pre">[[</span></code> in the <code class="docutils literal notranslate"><span class="pre">codons</span></code> <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> we created above? In the print output of <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>s, each <code class="docutils literal notranslate"><span class="pre">[</span></code> indicates one dimension. So for the <code class="docutils literal notranslate"><span class="pre">codons</span></code> <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> we can read that as it being a 2D array because there are two <code class="docutils literal notranslate"><span class="pre">[</span></code>‘s in the print output for that object.</p>
</div></blockquote>
</section>
</section>
<section id="from-other-numpy-functions">
<h2>From other Numpy functions<a class="headerlink" href="#from-other-numpy-functions" title="Link to this heading">#</a></h2>
<p>Here we use <code class="docutils literal notranslate"><span class="pre">numpy.arrange()</span></code> to create an 1D <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> with the values from 2 - 10, skip counting by 2’s:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([ 0,  2,  4,  6,  8, 10])
</pre></div>
</div>
</div>
</div>
<p>There are many, many, maaaaaaaaannnnnny Numpy functions we can use to create <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>s in useful ways. We summarise some with think will be most important to you below in this table, and each function is linked to its official Numpy documentation so you can learn more and view examples.</p>
<section id="functions-for-creating-ndarrays">
<h3>Functions for creating <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>s<a class="headerlink" href="#functions-for-creating-ndarrays" title="Link to this heading">#</a></h3>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Numpy function</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.arange.html"><code class="docutils literal notranslate"><span class="pre">numpy.arange()</span></code></a></p></td>
<td><p>Returns an <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> with evenly spaced values within a given interval, given a start, stop and step-size.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.linspace.html"><code class="docutils literal notranslate"><span class="pre">numpy.linspace()</span></code></a></p></td>
<td><p>Returns an <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> with evenly spaced numbers over a specified interval, given a start, stop and number of steps.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.full.html"><code class="docutils literal notranslate"><span class="pre">numpy.full()</span></code></a></p></td>
<td><p>Returns an <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> of a given shape and type, filled with fill_value.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.zeros.html"><code class="docutils literal notranslate"><span class="pre">numpy.zeros()</span></code></a></p></td>
<td><p>Returns an <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> of a given shape and type, filled with zeros.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://numpy.org/doc/stable/reference/random/generated/numpy.random.rand.html"><code class="docutils literal notranslate"><span class="pre">numpy.random.rand()</span></code></a></p></td>
<td><p>Returns an <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> of random values in a given shape.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="mathematical-operations-with-ndarrays">
<h2>Mathematical operations with <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>s<a class="headerlink" href="#mathematical-operations-with-ndarrays" title="Link to this heading">#</a></h2>
<p>As mentioned in the introduction, <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>s are vectorized. This means that we can do element-wise operations on them without having to write <code class="docutils literal notranslate"><span class="pre">for</span></code> loops. Our element-wise operations can be an operation applied to each element of an array or can be between the paired entries of two (or more) arrays.</p>
<section id="mathematical-operators">
<h3>Mathematical operators<a class="headerlink" href="#mathematical-operators" title="Link to this heading">#</a></h3>
<p>We can use the standard Python math operators (e.g., <code class="docutils literal notranslate"><span class="pre">+</span></code>, <code class="docutils literal notranslate"><span class="pre">-</span></code>, <code class="docutils literal notranslate"><span class="pre">*</span></code>, <code class="docutils literal notranslate"><span class="pre">**</span></code>) to do math on <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>s.</p>
<p>Here we create an array, <code class="docutils literal notranslate"><span class="pre">x</span></code> and then use the <code class="docutils literal notranslate"><span class="pre">+</span></code> operator to create a new <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> named <code class="docutils literal notranslate"><span class="pre">y</span></code> with the value of 1 added to all the elements in <code class="docutils literal notranslate"><span class="pre">x</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">full</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">x</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([4, 4, 4, 4, 4])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">y</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>
<span class="n">y</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([5, 5, 5, 5, 5])
</pre></div>
</div>
</div>
</div>
<p>Here we add <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> together, element-by-element:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">*</span> <span class="n">y</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([20, 20, 20, 20, 20])
</pre></div>
</div>
</div>
</div>
<p>This is also true for the Python operators that work on strings!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">firsts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s2">&quot;Florence&quot;</span><span class="p">,</span> <span class="s2">&quot;Ada&quot;</span><span class="p">,</span> <span class="s2">&quot;Gertrude&quot;</span><span class="p">])</span>
<span class="n">space</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s2">&quot; &quot;</span><span class="p">])</span>
<span class="n">lasts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s2">&quot;Nightingale&quot;</span><span class="p">,</span> <span class="s2">&quot;Lovelace&quot;</span><span class="p">,</span> <span class="s2">&quot;Cox&quot;</span><span class="p">])</span>

<span class="n">firsts</span> <span class="o">+</span> <span class="n">space</span> <span class="o">+</span> <span class="n">lasts</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">UFuncTypeError</span><span class="g g-Whitespace">                            </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">21</span><span class="p">],</span> <span class="n">line</span> <span class="mi">5</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="n">space</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s2">&quot; &quot;</span><span class="p">])</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="n">lasts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s2">&quot;Nightingale&quot;</span><span class="p">,</span> <span class="s2">&quot;Lovelace&quot;</span><span class="p">,</span> <span class="s2">&quot;Cox&quot;</span><span class="p">])</span>
<span class="ne">----&gt; </span><span class="mi">5</span> <span class="n">firsts</span> <span class="o">+</span> <span class="n">space</span> <span class="o">+</span> <span class="n">lasts</span>

<span class="ne">UFuncTypeError</span>: ufunc &#39;add&#39; did not contain a loop with signature matching types (dtype(&#39;&lt;U8&#39;), dtype(&#39;&lt;U1&#39;)) -&gt; None
</pre></div>
</div>
</div>
</div>
</section>
<section id="mathematical-numpy-functions">
<h3>Mathematical Numpy functions<a class="headerlink" href="#mathematical-numpy-functions" title="Link to this heading">#</a></h3>
<p>As in <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> creating, there are many, many, maaaaaaaaannnnnny Numpy functions we can use to perform mathematical operations. All functions work element-wise, but some return an <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> single value when applied to an <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> (e.g., <code class="docutils literal notranslate"><span class="pre">numpy.sum()</span></code>), while others return an <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> of the same size the function was applied to (<code class="docutils literal notranslate"><span class="pre">numpy.log()</span></code>). Be sure to check the documentation for each function you use so you understand how it should be applied and what shape of object it will return.</p>
<p>Below we demonstrate how to use  <code class="docutils literal notranslate"><span class="pre">numpy.sum()</span></code> and <code class="docutils literal notranslate"><span class="pre">numpy.log()</span></code> on 2D arrays, and then we summarise some additional mathematical Numpy functions with think will be most important to you in table following the demonstrations. Again, each function is linked to its official Numpy documentation so you can learn more and view examples.</p>
<p>Creating a 2D array:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">measurements</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">2.5</span><span class="p">,</span> <span class="mf">3.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">]])</span>
<span class="n">measurements</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[ 2.5,  3.5,  2. ],
       [10. , 20. , 30. ]])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">measurements</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(2, 3)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">measurements</span><span class="o">.</span><span class="n">ndim</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2
</pre></div>
</div>
</div>
</div>
</section>
<section id="np-sum">
<h3><code class="docutils literal notranslate"><span class="pre">np.sum()</span></code><a class="headerlink" href="#np-sum" title="Link to this heading">#</a></h3>
<p>If we want to get the sum of the entire <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> (use default for <code class="docutils literal notranslate"><span class="pre">axis</span></code>, which is <code class="docutils literal notranslate"><span class="pre">None</span></code>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">total_sum_measurements</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">measurements</span><span class="p">)</span>
<span class="n">total_sum_measurements</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>68.0
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">measurements</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[ 2.5,  3.5,  2. ],
       [10. , 20. , 30. ]])
</pre></div>
</div>
</div>
</div>
<p>If we want to get the sum of axis 1:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">col_sums_measurements</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">measurements</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">col_sums_measurements</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([ 8., 60.])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">measurements</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([12.5, 23.5, 32. ])
</pre></div>
</div>
</div>
</div>
</section>
<section id="np-log">
<h3><code class="docutils literal notranslate"><span class="pre">np.log()</span></code><a class="headerlink" href="#np-log" title="Link to this heading">#</a></h3>
<p>If we want to log transform every element in the <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">log_measurements</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">measurements</span><span class="p">)</span>
<span class="n">log_measurements</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[0.91629073, 1.25276297, 0.69314718],
       [2.30258509, 2.99573227, 3.40119738]])
</pre></div>
</div>
</div>
</div>
<section id="mathematical-functions-for-ndarrays">
<h4>Mathematical functions for <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>s<a class="headerlink" href="#mathematical-functions-for-ndarrays" title="Link to this heading">#</a></h4>
<p>Below are some key mathematical functions for <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>s. This is NOT an exhaustive list, you can find an exhaustive list here in the Numpy docs: <a class="reference external" href="https://numpy.org/doc/stable/reference/routines.math.html">https://numpy.org/doc/stable/reference/routines.math.html</a></p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Numpy function</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.sum.html"><code class="docutils literal notranslate"><span class="pre">numpy.sum()</span></code></a></p></td>
<td><p>Sum of array elements over a given axis.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.mean.html#numpy.mean"><code class="docutils literal notranslate"><span class="pre">numpy.mean()</span></code></a></p></td>
<td><p>Returns the average of the array elements. The average is taken over the flattened array by default, otherwise over the specified axis. float64 intermediate and return values are used for integer inputs.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.min.html"><code class="docutils literal notranslate"><span class="pre">numpy.min()</span></code></a></p></td>
<td><p>Return the minimum of an array or minimum along an axis.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.max.html"><code class="docutils literal notranslate"><span class="pre">numpy.max()</span></code></a></p></td>
<td><p>Return the maximum of an array or maximum along an axis.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.log.html"><code class="docutils literal notranslate"><span class="pre">numpy.log()</span></code></a></p></td>
<td><p>The natural logarithm log is the inverse of the exponential function, so that log(exp(x)) = x. The natural logarithm is logarithm in base e.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
</section>
<section id="indexing-and-slicing-ndarrays">
<h2>Indexing and slicing <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>s<a class="headerlink" href="#indexing-and-slicing-ndarrays" title="Link to this heading">#</a></h2>
<p>Indexing and slicing <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>s must be done using numerical or boolean indexing because arrays do not have indices or column labels.</p>
<p>Numerical indexing is of <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>s is similar to what you have seen for other objects in Python. The new challenge comes however from doing this in higher dimensions, which <code class="docutils literal notranslate"><span class="pre">ndarrays</span></code> can come it! Let’s practice slicing 3D <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>s so we can get the hang of it.</p>
<p>Let’s create a 3 x 3 <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> that would be like this cube:</p>
<a class="reference internal image-reference" href="../_images/3d-cube.png"><img alt="../_images/3d-cube.png" src="../_images/3d-cube.png" style="width: 400px;" />
</a>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">full</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[[1, 1],
        [1, 1],
        [1, 1]],

       [[1, 1],
        [1, 1],
        [1, 1]],

       [[1, 1],
        [1, 1],
        [1, 1]],

       [[1, 1],
        [1, 1],
        [1, 1]]])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cube_3_3</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
    <span class="p">[[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
      <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
      <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]],</span>
     <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
      <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
      <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]],</span>
     <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
      <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
      <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]]</span>
<span class="p">)</span>
<span class="n">cube_3_3</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[[1, 2, 3],
        [1, 2, 3],
        [1, 2, 3]],

       [[1, 2, 3],
        [1, 2, 3],
        [1, 2, 3]],

       [[1, 2, 3],
        [1, 2, 3],
        [1, 2, 3]]])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cube_3_3</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cube_3_3</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(3, 3, 3)
</pre></div>
</div>
</div>
</div>
<section id="getting-a-single-element-from-a-3d-ndarray">
<h3>Getting a single element from a 3D <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>:<a class="headerlink" href="#getting-a-single-element-from-a-3d-ndarray" title="Link to this heading">#</a></h3>
<p>If we want to get the middle value, on the front face of the cube, as highlighted in the picture below (and should be <code class="docutils literal notranslate"><span class="pre">1</span></code>), we need to give the following numerical indices for the three axes:</p>
<ul class="simple">
<li><p>axis 0 = <code class="docutils literal notranslate"><span class="pre">1</span></code></p></li>
<li><p>axis 1 = <code class="docutils literal notranslate"><span class="pre">1</span></code></p></li>
<li><p>axis 2 = <code class="docutils literal notranslate"><span class="pre">0</span></code></p></li>
</ul>
<a class="reference internal image-reference" href="../_images/3d-cube-middle-front.png"><img alt="../_images/3d-cube-middle-front.png" src="../_images/3d-cube-middle-front.png" style="width: 400px;" />
</a>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cube_3_3</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1
</pre></div>
</div>
</div>
</div>
</section>
<section id="getting-all-the-elements-from-one-row-from-a-particular-dimension">
<h3>Getting all the elements from one row from a particular dimension<a class="headerlink" href="#getting-all-the-elements-from-one-row-from-a-particular-dimension" title="Link to this heading">#</a></h3>
<p>If we want to get the top row, at the back of the cube as highlighted in the picture below (and should be <code class="docutils literal notranslate"><span class="pre">3,</span> <span class="pre">3,</span> <span class="pre">3</span></code>), we need to give the following numerical indices for the three axes:</p>
<ul class="simple">
<li><p>axis 0 = <code class="docutils literal notranslate"><span class="pre">0</span></code></p></li>
<li><p>axis 1 = <code class="docutils literal notranslate"><span class="pre">0:2</span></code> or <code class="docutils literal notranslate"><span class="pre">:</span></code></p></li>
<li><p>axis 2 = <code class="docutils literal notranslate"><span class="pre">2</span></code></p></li>
</ul>
<a class="reference internal image-reference" href="../_images/3d-cube-top-back-row.png"><img alt="../_images/3d-cube-top-back-row.png" src="../_images/3d-cube-top-back-row.png" style="width: 400px;" />
</a>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cube_3_3</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([3, 3, 3])
</pre></div>
</div>
</div>
</div>
</section>
<section id="getting-a-slice-of-an-entire-dimension">
<h3>Getting a slice of an entire dimension<a class="headerlink" href="#getting-a-slice-of-an-entire-dimension" title="Link to this heading">#</a></h3>
<p>If we want to get a slice of an entire dimension of the cube as highlighted in the picture below (and should be comprised of nine 1’s as a 3 x 3 shape in 2D), we need to give the following numerical indices for the three axes:</p>
<ul class="simple">
<li><p>axis 0 = <code class="docutils literal notranslate"><span class="pre">0:2</span></code> or <code class="docutils literal notranslate"><span class="pre">:</span></code></p></li>
<li><p>axis 1 = <code class="docutils literal notranslate"><span class="pre">0:2</span></code> or <code class="docutils literal notranslate"><span class="pre">:</span></code></p></li>
<li><p>axis 2 = <code class="docutils literal notranslate"><span class="pre">0</span></code></p></li>
</ul>
<a class="reference internal image-reference" href="../_images/3d-cube-entire-dim.png"><img alt="../_images/3d-cube-entire-dim.png" src="../_images/3d-cube-entire-dim.png" style="width: 400px;" />
</a>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cube_3_3</span><span class="p">[:,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[1, 1, 1],
       [1, 1, 1],
       [1, 1, 1]])
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="boolean-indexing-ndarrays">
<h2>Boolean indexing <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>s<a class="headerlink" href="#boolean-indexing-ndarrays" title="Link to this heading">#</a></h2>
<p>As mentioned above, we can also use boolean indexing to subset <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>s. This works in a similar way to what we have seen of other objects in Python. We’ll look at a couple examples here to refresh and remind ourselves.</p>
<section id="returning-values-above-or-below-a-threshold">
<h3>Returning values above or below a threshold<a class="headerlink" href="#returning-values-above-or-below-a-threshold" title="Link to this heading">#</a></h3>
<p>If we have an <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> from which we want to subset values above or below a threshold, we can use comparison operators and square bracket notation to do this. In the example below, we have a mix of postive and negative numbers. We can use the threshold of 0 and the comparison operator <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> to subset and obtain only the positive values from the temperature measurements listed below:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">temps</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mf">3.5</span><span class="p">,</span> <span class="o">-</span><span class="mi">9999</span><span class="p">,</span> <span class="mf">9.3</span><span class="p">,</span> <span class="o">-</span><span class="mi">9999</span><span class="p">,</span> <span class="o">-</span><span class="mi">9999</span><span class="p">,</span> <span class="mf">2.7</span><span class="p">])</span>
<span class="n">temps</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([ 0.000e+00,  3.500e+00, -9.999e+03,  9.300e+00, -9.999e+03,
       -9.999e+03,  2.700e+00])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">postive_temps</span> <span class="o">=</span> <span class="n">temps</span><span class="p">[</span><span class="n">temps</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">postive_temps</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([3.5, 9.3, 2.7])
</pre></div>
</div>
</div>
</div>
<p>Sometimes we don’t want to subset, but instead replace values. For example <code class="docutils literal notranslate"><span class="pre">-9999</span></code> is often used to represent a missing value, and working with such data numerically in Python, it might be better to encode it as a <code class="docutils literal notranslate"><span class="pre">nan</span></code>. To do this we use boolean indexing to subset values based on a condition and then use the <code class="docutils literal notranslate"><span class="pre">=</span></code> sign to assign a new value selectively to those which were subset:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">temps_nans</span> <span class="o">=</span> <span class="n">temps</span>
<span class="n">temps_nans</span><span class="p">[</span><span class="n">temps_nans</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">temps_nans</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([0. , 3.5, nan, 9.3, nan, nan, 2.7])
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="broadcasting">
<h2>Broadcasting<a class="headerlink" href="#broadcasting" title="Link to this heading">#</a></h2>
<p>Numpy <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>’s with different sizes cannot be directly used together in mathematical operations. When we try to do something like that Numpy intentionally returns an error. This Numpy feature helps minimize mathematical errors in code.</p>
<p>For example, we get a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> when we try to add two 1D <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>s of different lengths:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fives</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="n">tens</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span>
<span class="n">fives</span> <span class="o">+</span> <span class="n">tens</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ValueError</span><span class="g g-Whitespace">                                </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">41</span><span class="p">],</span> <span class="n">line</span> <span class="mi">3</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="n">fives</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="n">tens</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span>
<span class="ne">----&gt; </span><span class="mi">3</span> <span class="n">fives</span> <span class="o">+</span> <span class="n">tens</span>

<span class="ne">ValueError</span>: operands could not be broadcast together with shapes (3,) (6,) 
</pre></div>
</div>
</div>
</div>
<p>However, you might then wonder why this works:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">five</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">5</span><span class="p">])</span>
<span class="n">tens</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span>
<span class="n">five</span> <span class="o">+</span> <span class="n">tens</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([15, 15, 15, 15, 15, 15])
</pre></div>
</div>
</div>
</div>
<p>Or this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fives</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="n">two_tens</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> 
                 <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">]])</span>
<span class="n">fives</span> <span class="o">+</span> <span class="n">two_tens</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[15, 15, 15],
       [15, 15, 15]])
</pre></div>
</div>
</div>
</div>
<p>In NumPy the smaller array is “broadcast” across the larger array so that they have compatible shapes. Why should you care about broadcasting?</p>
<ul class="simple">
<li><p>Well, it’s cleaner and faster than looping</p></li>
<li><p>It also affects the array shapes resulting from arithmetic operations</p></li>
</ul>
<p>The figure below shows more examples where this can happen.</p>
<a class="reference internal image-reference" href="../_images/broadcasting.png"><img alt="../_images/broadcasting.png" src="../_images/broadcasting.png" style="width: 600px;" />
</a>
<p>Source: <a class="reference external" href="https://jakevdp.github.io/PythonDataScienceHandbook/">Python Data Science Handbook</a> by Jake VanderPlas (2016)</p>
<p><strong>Caution!!</strong> Arrays can only be broadcast together if they are compatible in all dimensions. Dimensions are compatible if:
- <strong>they are equal</strong>, or
- <strong>one of them is 1</strong>.</p>
<p>NumPy checks for dimensional compatibility by starting from the right-most dimension. Consider these two examples from NumPy’s documentation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Broadcastable</span><span class="p">:</span>
<span class="n">A</span>      <span class="p">(</span><span class="mi">3</span><span class="n">d</span> <span class="n">array</span><span class="p">):</span> <span class="mi">256</span> <span class="n">x</span> <span class="mi">256</span> <span class="n">x</span> <span class="mi">3</span>
<span class="n">B</span>      <span class="p">(</span><span class="mi">1</span><span class="n">d</span> <span class="n">array</span><span class="p">):</span>             <span class="mi">3</span>
<span class="n">Result</span> <span class="p">(</span><span class="mi">3</span><span class="n">d</span> <span class="n">array</span><span class="p">):</span> <span class="mi">256</span> <span class="n">x</span> <span class="mi">256</span> <span class="n">x</span> <span class="mi">3</span>

<span class="n">A</span>      <span class="p">(</span><span class="mi">4</span><span class="n">d</span> <span class="n">array</span><span class="p">):</span> <span class="mi">8</span> <span class="n">x</span> <span class="mi">1</span> <span class="n">x</span> <span class="mi">6</span> <span class="n">x</span> <span class="mi">1</span>
<span class="n">B</span>      <span class="p">(</span><span class="mi">3</span><span class="n">d</span> <span class="n">array</span><span class="p">):</span>     <span class="mi">7</span> <span class="n">x</span> <span class="mi">1</span> <span class="n">x</span> <span class="mi">5</span>
<span class="n">Result</span> <span class="p">(</span><span class="mi">4</span><span class="n">d</span> <span class="n">array</span><span class="p">):</span> <span class="mi">8</span> <span class="n">x</span> <span class="mi">7</span> <span class="n">x</span> <span class="mi">6</span> <span class="n">x</span> <span class="mi">5</span>
</pre></div>
</div>
<p>We’ve provided some code below to test out array compatibility:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">a</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[[[1., 1., 1., 1., 1., 1.]],

        [[1., 1., 1., 1., 1., 1.]]],


       [[[1., 1., 1., 1., 1., 1.]],

        [[1., 1., 1., 1., 1., 1.]]],


       [[[1., 1., 1., 1., 1., 1.]],

        [[1., 1., 1., 1., 1., 1.]]]])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The shape of a is:&quot;</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">a</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The shape of b is:&quot;</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">b</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The shape of a + b is: </span><span class="si">{</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">except</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ERROR: arrays are NOT broadcast compatible!&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The shape of a is:(3, 2, 1, 6)
The shape of b is: (1, 2, 7)

ERROR: arrays are NOT broadcast compatible!
</pre></div>
</div>
</div>
</div>
</section>
<section id="reshaping-ndarrays">
<h2>Reshaping <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>s<a class="headerlink" href="#reshaping-ndarrays" title="Link to this heading">#</a></h2>
<p>Sometimes you will need to reshape <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>s in your work. There are three useful functions for doing this that we will discuss, which we list to in the table below. There are many many maaaaannnny more array manipulation routines than just these, and you can find an exhaustive list in the Numpy docs: <a class="reference external" href="https://numpy.org/doc/stable/reference/routines.array-manipulation.html">https://numpy.org/doc/stable/reference/routines.array-manipulation.html</a></p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Numpy Function</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.transpose.html"><code class="docutils literal notranslate"><span class="pre">numpy.transpose()</span></code></a></p></td>
<td><p>Returns an array with axes transposed.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.reshape.html"><code class="docutils literal notranslate"><span class="pre">numpy.reshape()</span></code></a></p></td>
<td><p>Gives a new shape to an array without changing its data.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.flatten.html"><code class="docutils literal notranslate"><span class="pre">numpy.flatten()</span></code></a></p></td>
<td><p>Return a copy of the array collapsed into one dimension.</p></td>
</tr>
</tbody>
</table>
</div>
<section id="numpy-transpose">
<h3><code class="docutils literal notranslate"><span class="pre">numpy.transpose()</span></code><a class="headerlink" href="#numpy-transpose" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">numpy.transpose()</span></code> works to returns an array with axes transposed. This can be useful in math as well as in image manipulation (more on this in later courses). Below is an example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">capital_t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
                      <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                      <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
<span class="n">capital_t</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[1, 1, 1],
       [0, 1, 0],
       [0, 1, 0]])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">capital_t_transpose</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">capital_t</span><span class="p">)</span>
<span class="n">capital_t_transpose</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[1, 0, 0],
       [1, 1, 1],
       [1, 0, 0]])
</pre></div>
</div>
</div>
</div>
</section>
<section id="numpy-reshape">
<h3><code class="docutils literal notranslate"><span class="pre">numpy.reshape()</span></code><a class="headerlink" href="#numpy-reshape" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">numpy.reshape()</span></code> works to give a new shape to an array without changing its data. The function requires an <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> and a shape (which must be compatible with the intial shape).</p>
<p>The default order for reshaping is row-major (C-like index order). You can set <code class="docutils literal notranslate"><span class="pre">order='F'</span></code> to get a column-major (Fortran-like index order) reshaping. The following image illustrates this point:</p>
<a class="reference internal image-reference" href="../_images/row_column_major.png"><img alt="../_images/row_column_major.png" src="../_images/row_column_major.png" style="width: 200px;" />
</a>
<p><em><strong>Source:</strong> https://en.wikipedia.org/wiki/Row-_and_column-major_order</em></p>
<p>Let’s take a tractable example, where we create a 4 x 3 array that is a sequence from 1-12 and then reshape it to a 6 x 2 array:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">seq</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
       <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
       <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span>
       <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">]])</span>
<span class="n">seq</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[ 1,  2,  3],
       [ 4,  5,  6],
       [ 7,  8,  9],
       [10, 11, 12]])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">row_major</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">seq</span><span class="p">,</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">row_major</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[ 1,  2],
       [ 3,  4],
       [ 5,  6],
       [ 7,  8],
       [ 9, 10],
       [11, 12]])
</pre></div>
</div>
</div>
</div>
<p>Let’s compare this to the column order:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">column_major</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">seq</span><span class="p">,</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">order</span><span class="o">=</span><span class="s1">&#39;F&#39;</span><span class="p">)</span>
<span class="n">column_major</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[ 1,  8],
       [ 4, 11],
       [ 7,  3],
       [10,  6],
       [ 2,  9],
       [ 5, 12]])
</pre></div>
</div>
</div>
</div>
</section>
<section id="numpy-ndarray-flatten">
<h3><code class="docutils literal notranslate"><span class="pre">numpy.ndarray.flatten()</span></code><a class="headerlink" href="#numpy-ndarray-flatten" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">numpy.ndarray.flatten()</span></code> works to return a <strong>copy</strong> of the array collapsed into one dimension. It is import to note that this is a method and so must be used by typing <code class="docutils literal notranslate"><span class="pre">.flatten()</span></code> following the name of the array you would like to apply it to (most of the others in this lecture have been functions). There is a related function <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ravel.html#numpy.ravel"><code class="docutils literal notranslate"><span class="pre">numpy.ravel()</span></code></a> which works similarly but only returns a copy is necessary.</p>
<p>Below we show an example of using <code class="docutils literal notranslate"><span class="pre">numpy.ndarray.flatten()</span></code> on the two arrays we worked with above (<code class="docutils literal notranslate"><span class="pre">seq</span></code> and <code class="docutils literal notranslate"><span class="pre">capital_t</span></code>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">seq</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[ 1,  2,  3],
       [ 4,  5,  6],
       [ 7,  8,  9],
       [10, 11, 12]])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">seq</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">capital_t</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[1, 1, 1],
       [0, 1, 0],
       [0, 1, 0]])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">capital_t</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([1, 1, 1, 0, 1, 0, 0, 1, 0])
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="appendix-optional">
<h2>Appendix (OPTIONAL)<a class="headerlink" href="#appendix-optional" title="Link to this heading">#</a></h2>
<p>In this appendix, I’ll show more about how NumPy manages and stores arrays in memory. <strong>This is completely optional material</strong>. I’ll stress that a thorough understanding of the NumPy internals like how memory is handled and accessed is really more for developers working on super-optimized algorithms or for those interested in these kinds of things. The data scientist who does not care about these implementation details can just continue to visualize and use arrays as N-dimensional data structures—after all, the point of NumPy is to abstract away the technical implementation details so such users can focus on writing code and wrangling data.</p>
<p>This appendix draws on excellent material presented in:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/internals.html">The NumPy documentation</a></p></li>
<li><p><a class="reference external" href="https://web.mit.edu/dvp/Public/numpybook.pdf">Guide to NumPy</a> by Travis Oliphant, 2006</p></li>
</ul>
<section id="array-data-type">
<h3>Array data type<a class="headerlink" href="#array-data-type" title="Link to this heading">#</a></h3>
<p>All ndarrays are homogeneous, meaning that every element has the exact same data-type (e.g., integer, float, string, etc) which takes up the exact same amount of memory.</p>
<p>For example, consider the following 1d-array which is full of 8-bit integers (<code class="docutils literal notranslate"><span class="pre">int8</span></code>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int8&#39;</span><span class="p">)</span>
<span class="n">a</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([1, 2, 3, 4, 5, 6], dtype=int8)
</pre></div>
</div>
</div>
</div>
<p>One byte is equal to eight bits (<a class="reference external" href="https://web.stanford.edu/class/cs101/bits-bytes.html">refresh yourself on bits and bytes here</a>), so for this array of <code class="docutils literal notranslate"><span class="pre">int8</span></code> data-types, we would expect each element to take up one byte. We can confirm using:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="o">.</span><span class="n">itemsize</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1
</pre></div>
</div>
</div>
</div>
<blockquote>
<div><p>An aside on the difference between e.g., <code class="docutils literal notranslate"><span class="pre">int8</span></code>, <code class="docutils literal notranslate"><span class="pre">int16</span></code>, <code class="docutils literal notranslate"><span class="pre">int32</span></code>. The number here refers to the number of bits used to represent each integer. For example, <code class="docutils literal notranslate"><span class="pre">int8</span></code> is an integer represented with one byte (one byte = 8 bits). Recall that bits (i.e., 0s and 1s) are the basic units of information used by computers. So the maximum <em>unsigned</em> number that can be held with an <code class="docutils literal notranslate"><span class="pre">int8</span></code> datatype is: $2^8=256$. If we wish to have negative numbers, we need to use one of those bits to represent the sign, and we are left with $2^7$ bits to make numbers with, and so the signed range of <code class="docutils literal notranslate"><span class="pre">int8</span></code> is -128 to +127. Likewise, <code class="docutils literal notranslate"><span class="pre">int16</span></code> has an unsigned range of 0 to 65,535 ($2^{16}$), or a signed range of -32,768 to +32,767, etc. It’s interesting to watch what happens if you try to use a dtype that does not support the number you wish to store:</p>
</div></blockquote>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">126</span><span class="p">,</span> <span class="mi">127</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">129</span><span class="p">,</span> <span class="mi">130</span><span class="p">,</span> <span class="mi">131</span><span class="p">,</span> <span class="mi">132</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int8&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/var/folders/j_/rfl72ddx1tz52j5wkbd8dc3w0000gn/T/ipykernel_3810/2454158965.py:1: DeprecationWarning: NumPy will stop allowing conversion of out-of-bound Python integers to integer arrays.  The conversion of 128 to int8 will fail in the future.
For the old behavior, usually:
    np.array(value).astype(dtype)
will give the desired result (the cast overflows).
  np.array([126, 127, 128, 129, 130, 131, 132], dtype=&#39;int8&#39;)
/var/folders/j_/rfl72ddx1tz52j5wkbd8dc3w0000gn/T/ipykernel_3810/2454158965.py:1: DeprecationWarning: NumPy will stop allowing conversion of out-of-bound Python integers to integer arrays.  The conversion of 129 to int8 will fail in the future.
For the old behavior, usually:
    np.array(value).astype(dtype)
will give the desired result (the cast overflows).
  np.array([126, 127, 128, 129, 130, 131, 132], dtype=&#39;int8&#39;)
/var/folders/j_/rfl72ddx1tz52j5wkbd8dc3w0000gn/T/ipykernel_3810/2454158965.py:1: DeprecationWarning: NumPy will stop allowing conversion of out-of-bound Python integers to integer arrays.  The conversion of 130 to int8 will fail in the future.
For the old behavior, usually:
    np.array(value).astype(dtype)
will give the desired result (the cast overflows).
  np.array([126, 127, 128, 129, 130, 131, 132], dtype=&#39;int8&#39;)
/var/folders/j_/rfl72ddx1tz52j5wkbd8dc3w0000gn/T/ipykernel_3810/2454158965.py:1: DeprecationWarning: NumPy will stop allowing conversion of out-of-bound Python integers to integer arrays.  The conversion of 131 to int8 will fail in the future.
For the old behavior, usually:
    np.array(value).astype(dtype)
will give the desired result (the cast overflows).
  np.array([126, 127, 128, 129, 130, 131, 132], dtype=&#39;int8&#39;)
/var/folders/j_/rfl72ddx1tz52j5wkbd8dc3w0000gn/T/ipykernel_3810/2454158965.py:1: DeprecationWarning: NumPy will stop allowing conversion of out-of-bound Python integers to integer arrays.  The conversion of 132 to int8 will fail in the future.
For the old behavior, usually:
    np.array(value).astype(dtype)
will give the desired result (the cast overflows).
  np.array([126, 127, 128, 129, 130, 131, 132], dtype=&#39;int8&#39;)
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([ 126,  127, -128, -127, -126, -125, -124], dtype=int8)
</pre></div>
</div>
</div>
</div>
<blockquote>
<div><p>Above, notice how when we exceeded the integer 127 (the max of the <code class="docutils literal notranslate"><span class="pre">int8</span></code> signed range), NumPy automatically represents this number by counting up from the minimum of the signed range (-128). Of course, this wouldn’t be a problem if we used <code class="docutils literal notranslate"><span class="pre">int16</span></code>:</p>
</div></blockquote>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">126</span><span class="p">,</span> <span class="mi">127</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">129</span><span class="p">,</span> <span class="mi">130</span><span class="p">,</span> <span class="mi">131</span><span class="p">,</span> <span class="mi">132</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int16&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([126, 127, 128, 129, 130, 131, 132], dtype=int16)
</pre></div>
</div>
</div>
</div>
<p>Finally I’ll say that technically it is possible to have mixed data-types in an array (i.e., a heterogenous array), but in this case, the array still “sees” each element as the same thing: a reference to some Python object, and the dtype would be “object”.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">3.14159</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;object&#39;</span><span class="p">)</span>
<span class="n">a</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([list([&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]), 1, 3.14159], dtype=object)
</pre></div>
</div>
</div>
</div>
<p>Above is an ndarrays of objects, each one being a reference to some other Python object with its own data-type:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">type</span><span class="p">,</span> <span class="n">a</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[list, int, float]
</pre></div>
</div>
</div>
</div>
<p>Using arrays like this negates much of the optimized functionality that comes with them, and I can’t recall a time when I’ve used a “heterogenous array”. For mixed data-types, I would typically use other structures like lists or dictionaries.</p>
</section>
<section id="memory-layout-strides">
<h3>Memory layout &amp; strides<a class="headerlink" href="#memory-layout-strides" title="Link to this heading">#</a></h3>
<p>Now that we’ve covered the basic concepts of ndarrays, we can talk more about how arrays are represented in memory. An ndarray is stored as a single “chunk” of memory starting at some location. It’s helpful to think of it as a one-dimensional sequence in memory but with “fancy indexing” that can help map an N-dimensional index (for ndarrays) into that one-dimensional representation.</p>
<p>Consider “<strong>Panel a</strong>” in the below conceptual figure from the paper <a class="reference external" href="https://www.nature.com/articles/s41586-020-2649-2">Array programming with NumPy</a>, showing how a 2d-array of data-type <code class="docutils literal notranslate"><span class="pre">int64</span></code> (8 bytes) is represented in memory as a single chunk:</p>
<p><img alt="" src="../_images/numpy_paper.png" /></p>
<p>That word <strong>strides</strong> (stride means “one long step”) is the number of bytes you need to step in each dimension when traversing the array. As you can see in the example, the <strong>stride</strong> information is particularly important for mapping the chunk of memory back to a n-dimensional array structure. So in the above case, the strides is <code class="docutils literal notranslate"><span class="pre">(24,</span> <span class="pre">8)</span></code> meaning 24 bytes (three 8-byte <code class="docutils literal notranslate"><span class="pre">int64</span></code> elements) and 8 bytes (one 8-byte <code class="docutils literal notranslate"><span class="pre">int64</span></code> element), meaning that every 3 elements we increment our first dimension (i.e., move to the next row) and every 1 element we increment our second dimension (i.e., move to the next column).</p>
<p>Let’s go through another example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int16&#39;</span><span class="p">)</span>
<span class="n">a</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[1, 2],
       [3, 4],
       [5, 6]], dtype=int16)
</pre></div>
</div>
</div>
</div>
<p>Here we have an ndarray of shape <code class="docutils literal notranslate"><span class="pre">(3,</span> <span class="pre">2)</span></code> and with a dtype of <code class="docutils literal notranslate"><span class="pre">int16</span></code> (2 bytes per element in the array). We would expect the stride to be <code class="docutils literal notranslate"><span class="pre">(4,</span> <span class="pre">2)</span></code> (every 4 bytes, which is 2 elements here for <code class="docutils literal notranslate"><span class="pre">int16</span></code>, we begin a new row, and every 2 bytes, which is 1 element here, we begin a new column). We can confirm with:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="o">.</span><span class="n">strides</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(4, 2)
</pre></div>
</div>
</div>
</div>
<p>Neat! We could actually change how our ndarray maps from the memory block back to the ndarray by changing the stride information:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="o">.</span><span class="n">strides</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">a</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[1, 3],
       [2, 4],
       [3, 5]], dtype=int16)
</pre></div>
</div>
</div>
</div>
<p>To further drive the point home, what do you expect the strides to be of a 1D array? In that case, there is only one dimension to traverse, so we’d expect the strides to just be the number of bytes of 1 element, <code class="docutils literal notranslate"><span class="pre">(2,)</span></code> (i.e., every 2 bytes, which is one <code class="docutils literal notranslate"><span class="pre">int16</span></code> element). Let’s confirm:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
<span class="n">a</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([1, 3, 2, 4, 3, 5], dtype=int16)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="o">.</span><span class="n">strides</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(2,)
</pre></div>
</div>
</div>
</div>
<p>Finally, let’s look at the strides of the following 3D array of size <code class="docutils literal notranslate"><span class="pre">(3,3,2)</span></code> but with the data-type <code class="docutils literal notranslate"><span class="pre">int8</span></code> (so that 1 byte = 1 element which makes interpreting strides a little easier). Visualizing 3D arrays starts to get a bit tricker, but I think of them as matrices stacked together like slices in a loaf of bread, or multiple chessboards stacked on top of each other.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int8&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">a</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[[ 0,  1],
        [ 2,  3],
        [ 4,  5]],

       [[ 6,  7],
        [ 8,  9],
        [10, 11]],

       [[12, 13],
        [14, 15],
        [16, 17]]], dtype=int8)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="o">.</span><span class="n">strides</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(6, 2, 1)
</pre></div>
</div>
</div>
</div>
<p>Now things are getting a little more confusing! The above is saying that every 6 elements we increment a “depth dimension”, every 2 elements we increment a “row dimension” and every 1 element we increment a “column dimension”. Using our chessboard analogy, every 6 elements in memory we move to the next chessboard in the stack, every 2 elements we move down one row of a chessboard and every element we move across 1 column of our chessboard. I’ll talk more about this 3D example in the next section.</p>
</section>
<section id="why-do-we-care">
<h3>Why do we care?<a class="headerlink" href="#why-do-we-care" title="Link to this heading">#</a></h3>
<section id="reshaping">
<h4>Reshaping<a class="headerlink" href="#reshaping" title="Link to this heading">#</a></h4>
<p>One sometimes-confusing topic in NumPy is understanding how ndarrays are reshaped. But now that you understand how ndarrays are represented in memory, you can better understand how reshaping works in NumPy too! Basically, you can think of reshaping as viewing that “chunk” of memory in a different way (reading it into a different shape but preserving the ordering of the data in memory). Consider the same 2D array we just saw earlier, but with the data-type <code class="docutils literal notranslate"><span class="pre">int8</span></code> (so that 1 byte = 1 element which makes interpreting strides a little easier):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int8&#39;</span><span class="p">)</span>
<span class="n">a</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[1, 2],
       [3, 4],
       [5, 6]], dtype=int8)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="o">.</span><span class="n">strides</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(2, 1)
</pre></div>
</div>
</div>
</div>
<p>When we reshape the array, think of it as flattening the array out:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([1, 2, 3, 4, 5, 6], dtype=int8)
</pre></div>
</div>
</div>
</div>
<p>And then reading that data back into a different shape with different strides. Below I’ll change the shape to be <code class="docutils literal notranslate"><span class="pre">(2,</span> <span class="pre">3)</span></code>, which means that we’ll need strides of <code class="docutils literal notranslate"><span class="pre">(3,</span> <span class="pre">1)</span></code> (every 3 elements, increment a row, every 1 element, increment a column in the array).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">a</span><span class="o">.</span><span class="n">strides</span> <span class="o">=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">a</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[1, 2, 3],
       [4, 5, 6]], dtype=int8)
</pre></div>
</div>
</div>
</div>
<blockquote>
<div><p>Above, I didn’t need to do <code class="docutils literal notranslate"><span class="pre">a.strides</span></code>. When I changed the shape to <code class="docutils literal notranslate"><span class="pre">(2,</span> <span class="pre">3)</span></code>, NumPy already took care of changing the strides for me, but I’m showing it for demonstration purposes.</p>
</div></blockquote>
<p>The same logic applies to reshaping ndarrays of more than 2 dimensions. For example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int8&#39;</span><span class="p">)</span>
<span class="n">a</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16,
       17], dtype=int8)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">a</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[[ 0,  1],
        [ 2,  3],
        [ 4,  5]],

       [[ 6,  7],
        [ 8,  9],
        [10, 11]],

       [[12, 13],
        [14, 15],
        [16, 17]]], dtype=int8)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="o">.</span><span class="n">strides</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(6, 2, 1)
</pre></div>
</div>
</div>
</div>
<p>In the above example, we have three 2D matrix stacked together (I’ll call them “slices”). We use the first 6 elements of our flattened array to fill in the first “slice”, and within that 2D slice, those elements are arranged in rows and columns dictated by the strides (i.e., every 2 elements increment a row and every 1 element increment a column). Once we’ve used the first 6 elements, we traverse a dimensional “slice” and use the next 6 element to fill that 2D slice. We then repeat that one more time for the last “slice”.</p>
<p>You might be wondering two things at this point:</p>
<ol class="arabic simple">
<li><p>Why is our array above composed of 3 slices of 3x2 matrices and not 2 slices of 3x3 matrices?</p></li>
<li><p>How did NumPy decide to fill each 2D matrix slice with elements first, why not fill along the “depth” dimension first?</p></li>
</ol>
<p>These questions are related and actually much deeper than you might expect. They are explained in detail in the <a class="reference external" href="https://numpy.org/doc/stable/reference/internals.html#multidimensional-array-indexing-order-issues">NumPy documentation</a> and in section <em>2.3 Memory Layout of ndarray</em> in the book <a class="reference external" href="https://web.mit.edu/dvp/Public/numpybook.pdf">Guide to NumPy</a> by Travis Oliphant, but they are to do with the fundamental implementation of how NumPy reads data from memory.</p>
<p>Briefly, NumPy uses “row-major” indexing when reading data from memory which basically means that “grouping” starts from the left most index. So for a 2D array, the order is <code class="docutils literal notranslate"><span class="pre">(row,</span> <span class="pre">column)</span></code>, for a 3D array the order is <code class="docutils literal notranslate"><span class="pre">(depth,</span> <span class="pre">row,</span> <span class="pre">column)</span></code>, for a 4D array it is <code class="docutils literal notranslate"><span class="pre">(4th</span> <span class="pre">dimension,</span> <span class="pre">depth,</span> <span class="pre">row,</span> <span class="pre">column)</span></code>, etc. The way I think about this is that the ndarray is a container, in the 3D case I think of a cube made up of stacked matrices. I can enter this for container (“dimension”) and view a matrix. The next container is a “row” of values which comprises one smaller container for each “column”. There are two overarching styles that dictate the way data is read in from memory, they are the “C style” and “Fortran style”. NumPy uses the “C style” by default which is what we saw above:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int8&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="s2">&quot;C&quot;</span><span class="p">)</span>
<span class="n">a</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[[ 0,  1],
        [ 2,  3],
        [ 4,  5]],

       [[ 6,  7],
        [ 8,  9],
        [10, 11]],

       [[12, 13],
        [14, 15],
        [16, 17]]], dtype=int8)
</pre></div>
</div>
</div>
</div>
<p>But there is also the “Fortran style”, which you can see in the example below and can specify using the order argument, which appears to fill the “depth” dimension first:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int8&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="s2">&quot;F&quot;</span><span class="p">)</span>
<span class="n">a</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[[ 0,  9],
        [ 3, 12],
        [ 6, 15]],

       [[ 1, 10],
        [ 4, 13],
        [ 7, 16]],

       [[ 2, 11],
        [ 5, 14],
        [ 8, 17]]], dtype=int8)
</pre></div>
</div>
</div>
</div>
<p>These implementation details are not really necessary to know unless your developing algorithms or packages like NumPy that are directly interfacing with a computer’s memory.</p>
</section>
<section id="super-speed-code">
<h4>Super-speed code<a class="headerlink" href="#super-speed-code" title="Link to this heading">#</a></h4>
<p>Knowing about how ndarrays are stored in memory and what strides are can help us leverage some pretty nifty tricks to speed up our NumPy code. Consider performing convolution on a 2D image by passinga filter window of “weights” over the image pixels:</p>
<p><img alt="" src="../_images/convolution.gif" /></p>
<p><a class="reference external" href="https://de.wikipedia.org/wiki/Convolutional_Neural_Network">(source: Wikipedia)</a></p>
<p>There are plenty of ways to solve this problem. The goal is really to apply our filter to windowed segments of our array. One way we can “view” our array as windows is using strides and the <code class="docutils literal notranslate"><span class="pre">numpy.lib.stride_tricks</span></code> module. Here’s a 400 x 400 pixel image of the UBC sign:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">numpy.lib.stride_tricks</span><span class="w"> </span><span class="kn">import</span> <span class="n">as_strided</span>
<span class="o">%</span><span class="k">config</span> InlineBackend.figure_formats = [&#39;svg&#39;]
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;font.size&#39;</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span> <span class="s1">&#39;figure.figsize&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="s1">&#39;axes.grid&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">})</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">image</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s1">&#39;img/ubc.jpeg&#39;</span><span class="p">)[:,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.image.AxesImage at 0x11e89b7f0&gt;
</pre></div>
</div>
<img alt="../_images/7da1be8f2fe213ac02d1295061f5b87767a102adca770370022cba0bfdbdc108.svg" src="../_images/7da1be8f2fe213ac02d1295061f5b87767a102adca770370022cba0bfdbdc108.svg" />
</div>
</div>
<p>Before applying the filter, let’s take a look at the datatype and the number of strides for the <code class="docutils literal notranslate"><span class="pre">image</span></code> (which is saved as a NumPy array):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">image</span><span class="o">.</span><span class="n">dtype</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>dtype(&#39;uint8&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">image</span><span class="o">.</span><span class="n">strides</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(1200, 3)
</pre></div>
</div>
</div>
</div>
<p>The unsigned integer datatype <code class="docutils literal notranslate"><span class="pre">unint8</span></code> should take up 1 byte per element. So you might probably expect to see <code class="docutils literal notranslate"><span class="pre">(400,</span> <span class="pre">1)</span></code> for strides. What’s happened? Why <code class="docutils literal notranslate"><span class="pre">(1200,</span> <span class="pre">3)</span></code>?</p>
<p>The reason is when the image file is read using <code class="docutils literal notranslate"><span class="pre">plt.imread('img/ubc.jpeg')</span></code> it is originally strided as <code class="docutils literal notranslate"><span class="pre">(1200,</span> <span class="pre">3,</span> <span class="pre">1)</span></code> before slicing:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s1">&#39;img/ubc.jpeg&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strides</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(1200, 3, 1)
</pre></div>
</div>
</div>
</div>
<p>This is because the image is 400x400, but since it is an RGB image, the array needs to store 400x400 values for each of the RGB colors, making the shape of the array <code class="docutils literal notranslate"><span class="pre">(400,</span> <span class="pre">400,</span> <span class="pre">3)</span></code>.</p>
<p>When we slice the array to pick one of the channels though (using <code class="docutils literal notranslate"><span class="pre">[:,</span> <span class="pre">:,</span> <span class="pre">0]</span></code>), the original array in the memory does not change. This is why NumPy still has to traverse 1200 elements (instead of 400) to reach the next row and 3 elements to get to the next column. That’s why we get <code class="docutils literal notranslate"><span class="pre">(1200,</span> <span class="pre">3)</span></code> when we run <code class="docutils literal notranslate"><span class="pre">image.strides</span></code>!</p>
<p>The image below from <a class="reference external" href="https://eli.thegreenplace.net/2015/memory-layout-of-multi-dimensional-arrays">here</a> nicely demonstrates how three dimensional arrays are stored in the memory in a <strong>row-major</strong> manner:</p>
<p><img alt="" src="../_images/row-major-3D.png" /></p>
<p>Phew! Back to our filtering task:</p>
<p>This is the filter I want to apply to the image:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
              <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
              <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]])</span>
</pre></div>
</div>
</div>
</div>
<p>Now I’ll use strides to view the image as 3 x 3 windows, so I can just apply the filter to every single window. Basically the goal here is to view our array as a series of 3x3 windows. So think of this as, for each pixel in our image, we want to view a 3x3 window around that pixel. We have 400x400 pixels, and if we have a 3x3 window for each pixel, we will have a 4D view of our array with shape <code class="docutils literal notranslate"><span class="pre">(400,</span> <span class="pre">400,</span> <span class="pre">3,</span> <span class="pre">3)</span></code>. In this case, we can’t have a 3x3 window at the edges of the image, so I’m just going to cut those off with our final shape being <code class="docutils literal notranslate"><span class="pre">(398,</span> <span class="pre">398,</span> <span class="pre">3,</span> <span class="pre">3)</span></code> (but you could just pad the image with 0’s to apply the filter at the edges if you wanted to). Once we have our 4D view, I can just apply the filter to each of those 3x3 windows and sum the numbers in each window. No <code class="docutils literal notranslate"><span class="pre">for</span></code> loops or complex functions needed!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>    <span class="c1"># start time</span>
<span class="n">size</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>      <span class="c1"># filter size</span>
<span class="n">win_img</span> <span class="o">=</span> <span class="n">as_strided</span><span class="p">(</span>  <span class="c1"># Now use as_strided to get a windowed view of the array</span>
    <span class="n">image</span><span class="p">,</span>             <span class="c1"># image to view as windows</span>
    <span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">size</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">image</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">size</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">size</span><span class="p">),</span>  <span class="c1"># the shape of the new view (398, 398, 3, 3), the edge pixels are cut-off, but we could always pad if we wanted to here</span>
    <span class="n">strides</span><span class="o">=</span><span class="n">image</span><span class="o">.</span><span class="n">strides</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span>  <span class="c1"># this just duplicates the strides as we are now working in 4 dimensions, strides will be (1200, 3, 1200, 3)</span>
<span class="p">)</span>
<span class="n">filtered_image</span> <span class="o">=</span> <span class="p">(</span><span class="n">win_img</span> <span class="o">*</span> <span class="n">f</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>  <span class="c1"># apply filter to each window (the 3rd and 4th dimensions of win_img)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">filtered_image</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Wall time taken for convolution: </span><span class="si">{</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">start</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">s&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Wall time taken for convolution: 0.0110s
</pre></div>
</div>
<img alt="../_images/527aad013f817c84f27336675b20a8862f218a86c91be9ac9fcce6ecf5c599b5.svg" src="../_images/527aad013f817c84f27336675b20a8862f218a86c91be9ac9fcce6ecf5c599b5.svg" />
</div>
</div>
<p>Even though <code class="docutils literal notranslate"><span class="pre">as_strided()</span></code> creates a new array, it uses the same data in memory as the original array. <strong>The only thing that changes is the metadata, which changes how the array is viewed.</strong></p>
<p>If that example was a little too much for you right now, Jessica Yung provides a nice simple example of using arrays and strides in the blog post <a class="reference external" href="https://www.jessicayung.com/numpy-arrays-memory-and-strides/">What makes Numpy Arrays Fast: Memory and Strides</a>.</p>
</section>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./lecture-notes"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="lecture4_plotting-merging-and-grouping.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Lecture 4: Plotting, Merging and Grouping</p>
      </div>
    </a>
    <a class="right-next"
       href="lecture6-data-types-review-conditionals-loops.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Lecture 6: Review of data types, conditionals and iteration</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lecture-learning-objectives">Lecture Learning Objectives</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-is-numpy">What is NumPy</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#almost-everything-in-scientific-python-relies-on-numpy">Almost everything in scientific Python relies on NumPy</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#numpy-arrays">NumPy arrays</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#why-is-it-important-to-have-the-same-dtype">Why is it important to have the same <code class="docutils literal notranslate"><span class="pre">dtype</span></code>?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#our-first-array">Our first array:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#what-is-vectorization">What is vectorization?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#relationship-to-pandas">Relationship to Pandas</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-ndarrays">Creating <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>s</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#from-existing-data">From existing data</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#from-other-numpy-functions">From other Numpy functions</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#functions-for-creating-ndarrays">Functions for creating <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>s</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mathematical-operations-with-ndarrays">Mathematical operations with <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>s</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mathematical-operators">Mathematical operators</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mathematical-numpy-functions">Mathematical Numpy functions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#np-sum"><code class="docutils literal notranslate"><span class="pre">np.sum()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#np-log"><code class="docutils literal notranslate"><span class="pre">np.log()</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#mathematical-functions-for-ndarrays">Mathematical functions for <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>s</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#indexing-and-slicing-ndarrays">Indexing and slicing <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>s</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-a-single-element-from-a-3d-ndarray">Getting a single element from a 3D <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-all-the-elements-from-one-row-from-a-particular-dimension">Getting all the elements from one row from a particular dimension</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-a-slice-of-an-entire-dimension">Getting a slice of an entire dimension</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#boolean-indexing-ndarrays">Boolean indexing <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>s</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#returning-values-above-or-below-a-threshold">Returning values above or below a threshold</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#broadcasting">Broadcasting</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#reshaping-ndarrays">Reshaping <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>s</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#numpy-transpose"><code class="docutils literal notranslate"><span class="pre">numpy.transpose()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#numpy-reshape"><code class="docutils literal notranslate"><span class="pre">numpy.reshape()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#numpy-ndarray-flatten"><code class="docutils literal notranslate"><span class="pre">numpy.ndarray.flatten()</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#appendix-optional">Appendix (OPTIONAL)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#array-data-type">Array data type</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#memory-layout-strides">Memory layout &amp; strides</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#why-do-we-care">Why do we care?</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#reshaping">Reshaping</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#super-speed-code">Super-speed code</a></li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By The Jupyter Book community
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>