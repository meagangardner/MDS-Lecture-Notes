

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Lecture 1 - Introduction to R via the tidyverse &#8212; DSCI 523 Programming for Data Manipulation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=ac02cc09edc035673794" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=ac02cc09edc035673794" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=ac02cc09edc035673794" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=ac02cc09edc035673794" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=ac02cc09edc035673794" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=ac02cc09edc035673794" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=ac02cc09edc035673794"></script>

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'lecture-notes/01-intro-to-r-via-tidyverse';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Lecture 2 - Key datatypes &amp; operators in R" href="02-data-types-and-operators.html" />
    <link rel="prev" title="DSCI 523: Programming for Data Manipulation" href="../README.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../README.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/hex_sticker_small.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/hex_sticker_small.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../README.html">
                    DSCI 523: Programming for Data Manipulation
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Lectures</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Lecture 1 -  Introduction to R via the tidyverse</a></li>
<li class="toctree-l1"><a class="reference internal" href="02-data-types-and-operators.html">Lecture 2 -  Key datatypes &amp; operators in R</a></li>
<li class="toctree-l1"><a class="reference internal" href="03-dates-strings-and-factors.html">Lecture 3 -  dates &amp; times, strings,  as well as factors</a></li>
<li class="toctree-l1"><a class="reference internal" href="04-two-table-joins-and-base-control-flow.html">Lecture 4 -  Combining data frames (binds and joins) &amp; base R control flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="05-tidy-control-flow.html">Lecture 5 -  Tidy control flow in R</a></li>
<li class="toctree-l1"><a class="reference internal" href="06-lecture-functions-and-testing.html">Lecture 6: Functions and testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="07-mapping-and-nested-data-frames.html">Lecture 7: Mapping and nested data frames</a></li>
<li class="toctree-l1"><a class="reference internal" href="08-lecture-tidy-evaluation.html">Lecture 8: Tidy evaluation</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.ubc.ca/mds-2023-24/DSCI_523_r-prog_students" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.ubc.ca/mds-2023-24/DSCI_523_r-prog_students/issues/new?title=Issue%20on%20page%20%2Flecture-notes/01-intro-to-r-via-tidyverse.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/lecture-notes/01-intro-to-r-via-tidyverse.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Lecture 1 -  Introduction to R via the tidyverse</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#learning-objectives">Learning objectives</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#first-a-bit-of-history-about-r">First, a bit of history about R</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#loading-importing-data">Loading/importing data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-four-most-common-ways-to-do-this-in-data-science">The four most common ways to do this in Data Science</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#reading-spreadsheet-like-data-into-r">Reading spreadsheet-like data into R</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#workflow-for-reading-in-spreadsheet-like-data">Workflow for reading in spreadsheet-like data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-simplest-case-a-comma-separated-value-file">The simplest case: a comma separated value file</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#skipping-rows-when-reading-in-data">Skipping rows when reading in data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#read-delim-as-a-more-flexible-method-to-get-data-into-r"><code class="docutils literal notranslate"><span class="pre">read_delim</span></code> as a more flexible method to get data into R</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#reading-tabular-data-directly-from-a-url">Reading tabular data directly from a URL</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#reading-data-from-an-microsoft-excel-file">Reading data from an Microsoft Excel file</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#reading-a-microsoft-excel-file-from-the-web">Reading a Microsoft Excel file from the web</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#note-about-loading-data">Note about loading data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#writing-files-from-r-to-a-csv-file">Writing files from R to a <code class="docutils literal notranslate"><span class="pre">.csv</span></code> file</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cleaning-up-column-names">Cleaning up column names</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cleaning-up-a-lot-of-column-names">Cleaning up a lot of column names</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#single-data-frame-manipulations">Single data frame manipulations</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#use-select-to-subset-columns">Use <code class="docutils literal notranslate"><span class="pre">select</span></code> to subset columns</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#use-filter-to-subset-rows-that-meet-a-specific-condition">Use <code class="docutils literal notranslate"><span class="pre">filter</span></code> to subset rows that meet a specific condition</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#combining-functions-with-the-pipe-operator">Combining functions with the pipe <code class="docutils literal notranslate"><span class="pre">|&gt;</span></code> operator</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pro-tip-for-creating-objects-using-the-pipe">Pro-tip for creating objects using the pipe</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#use-mutate-to-add-new-variables">Use <code class="docutils literal notranslate"><span class="pre">mutate</span></code> to add new variables</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#use-arrange-to-sort-a-data-frame">Use <code class="docutils literal notranslate"><span class="pre">arrange</span></code> to sort a data frame</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-a-single-value-from-a-data-frame">Getting a single value from a data frame</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tidy-data">Tidy data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#shameless-borrowing-of-slides-from-jenny-bryan">Shameless borrowing of slides from Jenny Bryan</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-should-you-wrangle-your-data">How should you wrangle your data?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#we-make-it-tidy">We make it “tidy”!</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#what-is-tidy-data">What is tidy data?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-tale-of-4-data-tables">A tale of 4 data tables…</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pivoting-longer">Pivoting longer</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pivoting-wider">Pivoting wider</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-tidy-tools-manifesto">The tidy tools manifesto</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">The tidy tools manifesto</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#reuse-existing-data-structures">Reuse existing data structures.</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#compose-simple-functions-with-the-pipe">Compose simple functions with the pipe (|&gt;)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#embrace-functional-programming">Embrace functional programming</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#design-for-humans">Design for humans</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-did-we-learn-today">What did we learn today?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#attributions">Attributions</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="lecture-1-introduction-to-r-via-the-tidyverse">
<h1>Lecture 1 -  Introduction to R via the tidyverse<a class="headerlink" href="#lecture-1-introduction-to-r-via-the-tidyverse" title="Permalink to this heading">#</a></h1>
<p>(or Reading data, single data frame manipulations &amp; tidying data in R)</p>
<section id="learning-objectives">
<h2>Learning objectives<a class="headerlink" href="#learning-objectives" title="Permalink to this heading">#</a></h2>
<p>By the end of this lecture and worksheet 1, students should be able to:</p>
<ul class="simple">
<li><p>Choose and use the appropriate <code class="docutils literal notranslate"><span class="pre">readr::read_*</span></code> function and function arguments to load a given rectangular, plain text data set into R</p></li>
<li><p>Use the assignment symbol, <code class="docutils literal notranslate"><span class="pre">&lt;-</span></code>, to assign values to objects in R</p></li>
<li><p>Write a dataframe to a .csv file using <code class="docutils literal notranslate"><span class="pre">readr::write_csv</span></code></p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">readr::read_csv</span></code> to bring data from standard comma separated value (<code class="docutils literal notranslate"><span class="pre">.csv</span></code>) files into R</p></li>
<li><p>Recall and use the following <code class="docutils literal notranslate"><span class="pre">dplyr</span></code> functions and operators for their intended data wrangling tasks:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">select</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">filter</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mutate</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arrange</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">desc</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">slice</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pull</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%in%</span></code></p></li>
</ul>
</li>
<li><p>Use the pipe operator, <code class="docutils literal notranslate"><span class="pre">|&gt;</span></code>, to combine two or more functions</p></li>
<li><p>Define the term “tidy data”</p></li>
<li><p>Discuss the advantages and disadvantages of the tidy data format</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">tidyr::pivot_wider</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">tidyr::pivot_longer</span></code> in R to make untidy data tidy</p></li>
</ul>
</section>
<section id="first-a-bit-of-history-about-r">
<h2>First, a bit of history about R<a class="headerlink" href="#first-a-bit-of-history-about-r" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>An implementation of the S programming language (created at Bell labs in 1976)</p></li>
</ul>
<ul class="simple">
<li><p>written in C, Fortran, and R itself</p></li>
</ul>
<ul class="simple">
<li><p>R was created by Ross Ihaka and Robert Gentleman (Statisticians from NZ)</p></li>
</ul>
<ul class="simple">
<li><p>R is named partly after the authors and partly as a play on the name of S</p></li>
</ul>
<ul class="simple">
<li><p>First stable beta version in 2000</p></li>
</ul>
<a class="reference internal image-reference" href="http://revolution-computing.typepad.com/.a/6a010534b1db25970b01b8d2594d25970c-pi"><img alt="http://revolution-computing.typepad.com/.a/6a010534b1db25970b01b8d2594d25970c-pi" src="http://revolution-computing.typepad.com/.a/6a010534b1db25970b01b8d2594d25970c-pi" style="width: 600px;" /></a>
<p><em>Source: https://blog.revolutionanalytics.com/2016/03/16-years-of-r-history.html</em></p>
<p>R currently has more than 15,000 additional packages (as of September 2018)!</p>
</section>
<section id="loading-importing-data">
<h2>Loading/importing data<a class="headerlink" href="#loading-importing-data" title="Permalink to this heading">#</a></h2>
<p>Taking our first step in data analysis:</p>
<p><img alt="" src="https://d33wubrfki0l68.cloudfront.net/795c039ba2520455d833b4034befc8cf360a70ba/558a5/diagrams/data-science-explore.png" /></p>
<p><em>Source: Grolemund &amp; Wickham, <a class="reference external" href="https://r4ds.had.co.nz/">R for Data Science</a></em></p>
<section id="the-four-most-common-ways-to-do-this-in-data-science">
<h3>The four most common ways to do this in Data Science<a class="headerlink" href="#the-four-most-common-ways-to-do-this-in-data-science" title="Permalink to this heading">#</a></h3>
<ol class="arabic simple">
<li><p><strong>read in a text file with data in a spreadsheet format</strong></p></li>
<li><p>read from a database (e.g., SQLite, PostgreSQL)</p></li>
<li><p>scrape data from the web</p></li>
<li><p>use a web API to read data from a website</p></li>
</ol>
</section>
<section id="reading-spreadsheet-like-data-into-r">
<h3>Reading spreadsheet-like data into R<a class="headerlink" href="#reading-spreadsheet-like-data-into-r" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>We recommend using the <code class="docutils literal notranslate"><span class="pre">readr</span></code> package (part of the tidyverse) functions for plain text files</p></li>
<li><p>We recommed using the <code class="docutils literal notranslate"><span class="pre">readxl</span></code> package (part of the tidyverse but needs to be explicitly loaded in addition to tidyverse) for Microsoft Excel files.</p></li>
</ul>
</section>
<section id="workflow-for-reading-in-spreadsheet-like-data">
<h3>Workflow for reading in spreadsheet-like data<a class="headerlink" href="#workflow-for-reading-in-spreadsheet-like-data" title="Permalink to this heading">#</a></h3>
<p><strong>Step 1: LOOK AT THE FILE!</strong> 👀</p>
<p><strong>Step 2:</strong> Match what you see with an appropriate {readr} or {readxl} package function</p>
<p><strong>Step 3:</strong> Choose the correct arguments for that file and that function</p>
<p><strong>Step 1: LOOK AT THE RESULT TO MAKE SURE IT WORKED!</strong> 👀</p>
</section>
<section id="the-simplest-case-a-comma-separated-value-file">
<h3>The simplest case: a comma separated value file<a class="headerlink" href="#the-simplest-case-a-comma-separated-value-file" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>The simplest plain text data file you will encounter is a a comma separated value (<code class="docutils literal notranslate"><span class="pre">.csv</span></code>) file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_csv</span></code>, from the {readr} package, is the function of choice here.</p></li>
<li><p>In its most basic use-case, <code class="docutils literal notranslate"><span class="pre">read_csv</span></code> expects that the data file:</p>
<ul>
<li><p>has column names (or headers),</p></li>
<li><p>uses a comma (,) to separate the columns, and</p></li>
<li><p>does not have row names.</p></li>
</ul>
</li>
</ul>
<p>Reading in <code class="docutils literal notranslate"><span class="pre">data/can_lang.csv</span></code> data using <code class="docutils literal notranslate"><span class="pre">read_csv</span></code>:</p>
<p>First, load the {readr} or {tidyverse} library:</p>
<blockquote>
<div><p>Note: {readr} is part of the {tidyverse} metapackage, so when you load {tidyverse} you get the {readr} package functions, as well as a bunch of other goodies we’ll learn about shortly!</p>
</div></blockquote>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>── <span class=" -Color -Color-Bold">Attaching core tidyverse packages</span> ───────────────────────────────────────────── tidyverse 2.0.0 ──
<span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">dplyr    </span> 1.1.2     <span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">readr    </span> 2.1.4
<span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">forcats  </span> 1.0.0     <span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">stringr  </span> 1.5.0
<span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">ggplot2  </span> 3.4.3     <span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">tibble   </span> 3.2.1
<span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">lubridate</span> 1.9.2     <span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">tidyr    </span> 1.3.0
<span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">purrr    </span> 1.0.2     
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>── <span class=" -Color -Color-Bold">Conflicts</span> ─────────────────────────────────────────────────────────────── tidyverse_conflicts() ──
<span class=" -Color -Color-Red">✖</span> <span class=" -Color -Color-Blue">dplyr</span>::<span class=" -Color -Color-Green">filter()</span> masks <span class=" -Color -Color-Blue">stats</span>::filter()
<span class=" -Color -Color-Red">✖</span> <span class=" -Color -Color-Blue">dplyr</span>::<span class=" -Color -Color-Green">lag()</span>    masks <span class=" -Color -Color-Blue">stats</span>::lag()
<span class=" -Color -Color-Cyan">ℹ</span> Use the conflicted package (<span class=" -Color -Color-Blue">&lt;http://conflicted.r-lib.org/&gt;</span>) to force all conflicts to become errors
</pre></div>
</div>
</div>
</div>
<p>Next, use the <code class="docutils literal notranslate"><span class="pre">read_csv</span></code> function to read the data into R from the <code class="docutils literal notranslate"><span class="pre">can_lang.csv</span></code> file:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">can_lang1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">read_csv</span><span class="p">(</span><span class="s">&quot;data/can_lang.csv&quot;</span><span class="p">)</span>
<span class="nf">head</span><span class="p">(</span><span class="n">can_lang1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Bold">Rows: </span><span class=" -Color -Color-Blue">214</span> <span class=" -Color -Color-Bold">Columns: </span><span class=" -Color -Color-Blue">6</span>
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Cyan">──</span> <span class=" -Color -Color-Bold">Column specification</span> <span class=" -Color -Color-Cyan">─────────────────────────────────────────────────────────────────────────────</span>
<span class=" -Color -Color-Bold">Delimiter:</span> &quot;,&quot;
<span class=" -Color -Color-Red">chr</span> (2): category, language
<span class=" -Color -Color-Green">dbl</span> (4): mother_tongue, most_at_home, most_at_work, lang_known
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Cyan">ℹ</span> Use `spec()` to retrieve the full column specification for this data.
<span class=" -Color -Color-Cyan">ℹ</span> Specify the column types or set `show_col_types = FALSE` to quiet this message.
</pre></div>
</div>
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 6 × 6</caption>
<thead>
	<tr><th scope=col>category</th><th scope=col>language</th><th scope=col>mother_tongue</th><th scope=col>most_at_home</th><th scope=col>most_at_work</th><th scope=col>lang_known</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Aboriginal languages                   </td><td>Aboriginal languages, n.o.s.  </td><td>  590</td><td>  235</td><td> 30</td><td>  665</td></tr>
	<tr><td>Non-Official &amp; Non-Aboriginal languages</td><td><span style=white-space:pre-wrap>Afrikaans                     </span></td><td>10260</td><td> 4785</td><td> 85</td><td>23415</td></tr>
	<tr><td>Non-Official &amp; Non-Aboriginal languages</td><td>Afro-Asiatic languages, n.i.e.</td><td> 1150</td><td><span style=white-space:pre-wrap>  445</span></td><td> 10</td><td> 2775</td></tr>
	<tr><td>Non-Official &amp; Non-Aboriginal languages</td><td><span style=white-space:pre-wrap>Akan (Twi)                    </span></td><td>13460</td><td> 5985</td><td> 25</td><td>22150</td></tr>
	<tr><td>Non-Official &amp; Non-Aboriginal languages</td><td><span style=white-space:pre-wrap>Albanian                      </span></td><td>26895</td><td>13135</td><td>345</td><td>31930</td></tr>
	<tr><td>Aboriginal languages                   </td><td>Algonquian languages, n.i.e.  </td><td>   45</td><td>   10</td><td>  0</td><td>  120</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="skipping-rows-when-reading-in-data">
<h3>Skipping rows when reading in data<a class="headerlink" href="#skipping-rows-when-reading-in-data" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>Often times information about how data was collected, or other relevant information, is included at the top of the data file.</p></li>
<li><p>Referred to as “metadata”</p></li>
</ul>
<p>Reading in <code class="docutils literal notranslate"><span class="pre">data/can_lang-meta-data.csv</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">can_lang2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">read_csv</span><span class="p">(</span><span class="s">&quot;data/can_lang-meta-data.csv&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">skip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">)</span>
<span class="nf">head</span><span class="p">(</span><span class="n">can_lang2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Bold">Rows: </span><span class=" -Color -Color-Blue">214</span> <span class=" -Color -Color-Bold">Columns: </span><span class=" -Color -Color-Blue">6</span>
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Cyan">──</span> <span class=" -Color -Color-Bold">Column specification</span> <span class=" -Color -Color-Cyan">─────────────────────────────────────────────────────────────────────────────</span>
<span class=" -Color -Color-Bold">Delimiter:</span> &quot;,&quot;
<span class=" -Color -Color-Red">chr</span> (2): category, language
<span class=" -Color -Color-Green">dbl</span> (4): mother_tongue, most_at_home, most_at_work, lang_known
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Cyan">ℹ</span> Use `spec()` to retrieve the full column specification for this data.
<span class=" -Color -Color-Cyan">ℹ</span> Specify the column types or set `show_col_types = FALSE` to quiet this message.
</pre></div>
</div>
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 6 × 6</caption>
<thead>
	<tr><th scope=col>category</th><th scope=col>language</th><th scope=col>mother_tongue</th><th scope=col>most_at_home</th><th scope=col>most_at_work</th><th scope=col>lang_known</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Aboriginal languages                   </td><td>Aboriginal languages, n.o.s.  </td><td>  590</td><td>  235</td><td> 30</td><td>  665</td></tr>
	<tr><td>Non-Official &amp; Non-Aboriginal languages</td><td><span style=white-space:pre-wrap>Afrikaans                     </span></td><td>10260</td><td> 4785</td><td> 85</td><td>23415</td></tr>
	<tr><td>Non-Official &amp; Non-Aboriginal languages</td><td>Afro-Asiatic languages, n.i.e.</td><td> 1150</td><td><span style=white-space:pre-wrap>  445</span></td><td> 10</td><td> 2775</td></tr>
	<tr><td>Non-Official &amp; Non-Aboriginal languages</td><td><span style=white-space:pre-wrap>Akan (Twi)                    </span></td><td>13460</td><td> 5985</td><td> 25</td><td>22150</td></tr>
	<tr><td>Non-Official &amp; Non-Aboriginal languages</td><td><span style=white-space:pre-wrap>Albanian                      </span></td><td>26895</td><td>13135</td><td>345</td><td>31930</td></tr>
	<tr><td>Aboriginal languages                   </td><td>Algonquian languages, n.i.e.  </td><td>   45</td><td>   10</td><td>  0</td><td>  120</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>If you need to skip rows at the bottom of a file, use the <code class="docutils literal notranslate"><span class="pre">n_max</span></code> argument.</p>
<p>Note - you will need to know how many lines are in the file to succesfully use this. You can use some shell/command line tools to do this.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">wc</span> <span class="pre">-l</span> <span class="pre">FILENAME</span></code> will tell you how many lines are in the file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tail</span> <span class="pre">-n</span> <span class="pre">10</span> <span class="pre">FILENAME</span></code> will print the last 10 lines of the file</p></li>
</ul>
</section>
<section id="read-delim-as-a-more-flexible-method-to-get-data-into-r">
<h3><code class="docutils literal notranslate"><span class="pre">read_delim</span></code> as a more flexible method to get data into R<a class="headerlink" href="#read-delim-as-a-more-flexible-method-to-get-data-into-r" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>most flexible <code class="docutils literal notranslate"><span class="pre">readr</span></code> function is <code class="docutils literal notranslate"><span class="pre">read_delim</span></code></p></li>
<li><p>doesn’t assume any delimiter, you have to specify</p></li>
</ul>
<p>Reading in <code class="docutils literal notranslate"><span class="pre">data/can_lang.tsv</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">can_lang3</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">read_delim</span><span class="p">(</span><span class="s">&quot;data/can_lang.tsv&quot;</span><span class="p">,</span><span class="w">  </span>
<span class="w">                     </span><span class="n">delim</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;\t&quot;</span><span class="p">,</span><span class="w"> </span>
<span class="w">                     </span><span class="n">col_names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span>
<span class="nf">head</span><span class="p">(</span><span class="n">can_lang3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Bold">Rows: </span><span class=" -Color -Color-Blue">214</span> <span class=" -Color -Color-Bold">Columns: </span><span class=" -Color -Color-Blue">6</span>
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Cyan">──</span> <span class=" -Color -Color-Bold">Column specification</span> <span class=" -Color -Color-Cyan">─────────────────────────────────────────────────────────────────────────────</span>
<span class=" -Color -Color-Bold">Delimiter:</span> &quot;\t&quot;
<span class=" -Color -Color-Red">chr</span> (2): X1, X2
<span class=" -Color -Color-Green">dbl</span> (4): X3, X4, X5, X6
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Cyan">ℹ</span> Use `spec()` to retrieve the full column specification for this data.
<span class=" -Color -Color-Cyan">ℹ</span> Specify the column types or set `show_col_types = FALSE` to quiet this message.
</pre></div>
</div>
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 6 × 6</caption>
<thead>
	<tr><th scope=col>X1</th><th scope=col>X2</th><th scope=col>X3</th><th scope=col>X4</th><th scope=col>X5</th><th scope=col>X6</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Aboriginal languages                   </td><td>Aboriginal languages, n.o.s.  </td><td>  590</td><td>  235</td><td> 30</td><td>  665</td></tr>
	<tr><td>Non-Official &amp; Non-Aboriginal languages</td><td><span style=white-space:pre-wrap>Afrikaans                     </span></td><td>10260</td><td> 4785</td><td> 85</td><td>23415</td></tr>
	<tr><td>Non-Official &amp; Non-Aboriginal languages</td><td>Afro-Asiatic languages, n.i.e.</td><td> 1150</td><td><span style=white-space:pre-wrap>  445</span></td><td> 10</td><td> 2775</td></tr>
	<tr><td>Non-Official &amp; Non-Aboriginal languages</td><td><span style=white-space:pre-wrap>Akan (Twi)                    </span></td><td>13460</td><td> 5985</td><td> 25</td><td>22150</td></tr>
	<tr><td>Non-Official &amp; Non-Aboriginal languages</td><td><span style=white-space:pre-wrap>Albanian                      </span></td><td>26895</td><td>13135</td><td>345</td><td>31930</td></tr>
	<tr><td>Aboriginal languages                   </td><td>Algonquian languages, n.i.e.  </td><td>   45</td><td>   10</td><td>  0</td><td>  120</td></tr>
</tbody>
</table>
</div></div>
</div>
<blockquote>
<div><p>Note: you can see that above we also used another argument: <code class="docutils literal notranslate"><span class="pre">col_names</span> <span class="pre">=</span> <span class="pre">FALSE</span></code>. This is because this version of the data set had no column names, and if we have such a file and don’t specify that, then the first observation will be taken (incorrectly) to be the column names. Another useful extension of this arguement is using it to assign column names, see the example below:</p>
</div></blockquote>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">can_lang3</span> <span class="o">&lt;-</span> <span class="n">read_delim</span><span class="p">(</span><span class="s2">&quot;data/can_lang.tsv&quot;</span><span class="p">,</span>  
                     <span class="n">delim</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span> 
                     <span class="n">col_names</span> <span class="o">=</span> <span class="n">c</span><span class="p">(</span><span class="s2">&quot;category&quot;</span><span class="p">,</span> <span class="s2">&quot;language&quot;</span><span class="p">,</span> <span class="s2">&quot;mother_tongue&quot;</span><span class="p">,</span> 
                                 <span class="s2">&quot;most_at_home&quot;</span><span class="p">,</span> <span class="s2">&quot;most_at_work&quot;</span><span class="p">,</span> <span class="s2">&quot;lang_known&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div></blockquote>
</section>
<section id="reading-tabular-data-directly-from-a-url">
<h3>Reading tabular data directly from a URL<a class="headerlink" href="#reading-tabular-data-directly-from-a-url" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>We can also use <code class="docutils literal notranslate"><span class="pre">read_csv</span></code> or <code class="docutils literal notranslate"><span class="pre">read_delim</span></code> (and related functions) to read in tabular data directly from a url that contains tabular data</p></li>
<li><p>In this case, we provide the url to the <code class="docutils literal notranslate"><span class="pre">read_*</span></code> function as the path to the file instead of a path to a local file on our computer</p></li>
</ul>
<p>Reading in https://github.com/ttimbers/canlang/blob/master/inst/extdata/can_lang.csv</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">can_lang4</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">read_csv</span><span class="p">(</span><span class="s">&quot;https://raw.githubusercontent.com/ttimbers/canlang/master/inst/extdata/can_lang.csv&quot;</span><span class="p">)</span>
<span class="nf">head</span><span class="p">(</span><span class="n">can_lang4</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Bold">Rows: </span><span class=" -Color -Color-Blue">214</span> <span class=" -Color -Color-Bold">Columns: </span><span class=" -Color -Color-Blue">6</span>
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Cyan">──</span> <span class=" -Color -Color-Bold">Column specification</span> <span class=" -Color -Color-Cyan">─────────────────────────────────────────────────────────────────────────────</span>
<span class=" -Color -Color-Bold">Delimiter:</span> &quot;,&quot;
<span class=" -Color -Color-Red">chr</span> (2): category, language
<span class=" -Color -Color-Green">dbl</span> (4): mother_tongue, most_at_home, most_at_work, lang_known
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Cyan">ℹ</span> Use `spec()` to retrieve the full column specification for this data.
<span class=" -Color -Color-Cyan">ℹ</span> Specify the column types or set `show_col_types = FALSE` to quiet this message.
</pre></div>
</div>
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 6 × 6</caption>
<thead>
	<tr><th scope=col>category</th><th scope=col>language</th><th scope=col>mother_tongue</th><th scope=col>most_at_home</th><th scope=col>most_at_work</th><th scope=col>lang_known</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Aboriginal languages                   </td><td>Aboriginal languages, n.o.s.  </td><td>  590</td><td>  235</td><td> 30</td><td>  665</td></tr>
	<tr><td>Non-Official &amp; Non-Aboriginal languages</td><td><span style=white-space:pre-wrap>Afrikaans                     </span></td><td>10260</td><td> 4785</td><td> 85</td><td>23415</td></tr>
	<tr><td>Non-Official &amp; Non-Aboriginal languages</td><td>Afro-Asiatic languages, n.i.e.</td><td> 1150</td><td><span style=white-space:pre-wrap>  445</span></td><td> 10</td><td> 2775</td></tr>
	<tr><td>Non-Official &amp; Non-Aboriginal languages</td><td><span style=white-space:pre-wrap>Akan (Twi)                    </span></td><td>13460</td><td> 5985</td><td> 25</td><td>22150</td></tr>
	<tr><td>Non-Official &amp; Non-Aboriginal languages</td><td><span style=white-space:pre-wrap>Albanian                      </span></td><td>26895</td><td>13135</td><td>345</td><td>31930</td></tr>
	<tr><td>Aboriginal languages                   </td><td>Algonquian languages, n.i.e.  </td><td>   45</td><td>   10</td><td>  0</td><td>  120</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="reading-data-from-an-microsoft-excel-file">
<h3>Reading data from an Microsoft Excel file<a class="headerlink" href="#reading-data-from-an-microsoft-excel-file" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>it is very common to encounter, and need to load into R, data stored as a Microsoft Excel spreadsheet (with the filename extension <code class="docutils literal notranslate"><span class="pre">.xlsx</span></code>)</p></li>
<li><p>To be able to do this, a key thing to know is that even though .csv and <code class="docutils literal notranslate"><span class="pre">.xlsx</span></code> files look almost identical when loaded into Excel, the data themselves are stored completely differently.</p></li>
</ul>
<p>Read in <code class="docutils literal notranslate"><span class="pre">data/can_lang.xlsx</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">readxl</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">can_lang5</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">read_excel</span><span class="p">(</span><span class="s">&quot;data/can_lang.xlsx&quot;</span><span class="p">)</span>
<span class="nf">head</span><span class="p">(</span><span class="n">can_lang5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 6 × 6</caption>
<thead>
	<tr><th scope=col>category</th><th scope=col>language</th><th scope=col>mother_tongue</th><th scope=col>most_at_home</th><th scope=col>most_at_work</th><th scope=col>lang_known</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Aboriginal languages                   </td><td>Aboriginal languages, n.o.s.  </td><td>  590</td><td>  235</td><td> 30</td><td>  665</td></tr>
	<tr><td>Non-Official &amp; Non-Aboriginal languages</td><td><span style=white-space:pre-wrap>Afrikaans                     </span></td><td>10260</td><td> 4785</td><td> 85</td><td>23415</td></tr>
	<tr><td>Non-Official &amp; Non-Aboriginal languages</td><td>Afro-Asiatic languages, n.i.e.</td><td> 1150</td><td><span style=white-space:pre-wrap>  445</span></td><td> 10</td><td> 2775</td></tr>
	<tr><td>Non-Official &amp; Non-Aboriginal languages</td><td><span style=white-space:pre-wrap>Akan (Twi)                    </span></td><td>13460</td><td> 5985</td><td> 25</td><td>22150</td></tr>
	<tr><td>Non-Official &amp; Non-Aboriginal languages</td><td><span style=white-space:pre-wrap>Albanian                      </span></td><td>26895</td><td>13135</td><td>345</td><td>31930</td></tr>
	<tr><td>Aboriginal languages                   </td><td>Algonquian languages, n.i.e.  </td><td>   45</td><td>   10</td><td>  0</td><td>  120</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>Note - if there are multiple sheets, use the <code class="docutils literal notranslate"><span class="pre">sheet</span></code> argument to specify the sheet number or name.</p>
</section>
<section id="reading-a-microsoft-excel-file-from-the-web">
<h3>Reading a Microsoft Excel file from the web<a class="headerlink" href="#reading-a-microsoft-excel-file-from-the-web" title="Permalink to this heading">#</a></h3>
<p>When trying to read a Microsoft Excel file from the web into R using a URL you cannot just pass the URL to <code class="docutils literal notranslate"><span class="pre">read_excel</span></code>.</p>
<p>First you must download the file, and then read it locally from there:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">url</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s">&quot;https://github.com/ttimbers/canlang/blob/master/inst/extdata/can_lang.xlsx?raw=true&quot;</span>
<span class="nf">download.file</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;temp.xlsx&quot;</span><span class="p">)</span>
<span class="n">can_lang6</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">read_excel</span><span class="p">(</span><span class="s">&quot;temp.xlsx&quot;</span><span class="p">)</span>
<span class="nf">head</span><span class="p">(</span><span class="n">can_lang6</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 6 × 6</caption>
<thead>
	<tr><th scope=col>category</th><th scope=col>language</th><th scope=col>mother_tongue</th><th scope=col>most_at_home</th><th scope=col>most_at_work</th><th scope=col>lang_known</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Aboriginal languages                   </td><td>Aboriginal languages, n.o.s.  </td><td>  590</td><td>  235</td><td> 30</td><td>  665</td></tr>
	<tr><td>Non-Official &amp; Non-Aboriginal languages</td><td><span style=white-space:pre-wrap>Afrikaans                     </span></td><td>10260</td><td> 4785</td><td> 85</td><td>23415</td></tr>
	<tr><td>Non-Official &amp; Non-Aboriginal languages</td><td>Afro-Asiatic languages, n.i.e.</td><td> 1150</td><td><span style=white-space:pre-wrap>  445</span></td><td> 10</td><td> 2775</td></tr>
	<tr><td>Non-Official &amp; Non-Aboriginal languages</td><td><span style=white-space:pre-wrap>Akan (Twi)                    </span></td><td>13460</td><td> 5985</td><td> 25</td><td>22150</td></tr>
	<tr><td>Non-Official &amp; Non-Aboriginal languages</td><td><span style=white-space:pre-wrap>Albanian                      </span></td><td>26895</td><td>13135</td><td>345</td><td>31930</td></tr>
	<tr><td>Aboriginal languages                   </td><td>Algonquian languages, n.i.e.  </td><td>   45</td><td>   10</td><td>  0</td><td>  120</td></tr>
</tbody>
</table>
</div></div>
</div>
<blockquote>
<div><p>Note: When using <code class="docutils literal notranslate"><span class="pre">download.file</span></code> on Windows for Excel files (e.g., <code class="docutils literal notranslate"><span class="pre">.xlsx</span></code>) you need to specify an additional argument: <code class="docutils literal notranslate"><span class="pre">mode</span> <span class="pre">=</span> <span class="pre">&quot;wb&quot;</span></code>. For example:</p>
</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">download</span><span class="o">.</span><span class="n">file</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="s2">&quot;temp.xlsx&quot;</span><span class="p">,</span> <span class="n">mode</span> <span class="o">=</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="note-about-loading-data">
<h3>Note about loading data<a class="headerlink" href="#note-about-loading-data" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>It’s important to do it carefully + check results after!</p>
<ul>
<li><p>will help reduce bugs and speed up your analyses down the road</p></li>
</ul>
</li>
<li><p>Think of it as tying your shoes before you run; not exciting, but if done wrong it will trip you up later!</p></li>
</ul>
<center><img src="https://media.giphy.com/media/Se449o7yNjziw/giphy.gif"/></center>
</section>
<section id="writing-files-from-r-to-a-csv-file">
<h3>Writing files from R to a <code class="docutils literal notranslate"><span class="pre">.csv</span></code> file<a class="headerlink" href="#writing-files-from-r-to-a-csv-file" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>Once you have modified or summarized some data, you often want to save that data to a file for use later, or sharing with others.</p></li>
<li><p>One of the most common formats for this is <code class="docutils literal notranslate"><span class="pre">.csv</span></code></p></li>
<li><p>To write to <code class="docutils literal notranslate"><span class="pre">.csv</span></code> in R we recommend using <code class="docutils literal notranslate"><span class="pre">readr::write_csv</span></code> as it uses sensible choices for a <code class="docutils literal notranslate"><span class="pre">.csv</span></code> file (e.g., includes column, but not row names, does not write quotes around the data, uses a comma as the delimiter, etc)</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">write_csv</span><span class="p">(</span><span class="n">can_lang6</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;data/can_lang7.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="cleaning-up-column-names">
<h3>Cleaning up column names<a class="headerlink" href="#cleaning-up-column-names" title="Permalink to this heading">#</a></h3>
<p>Column names from wild data can be wild! For example, column names with symbols or white space require special syntax (surround the column names with back ticks) to program with them in R. One of the first things you want to do when you read in data can be to clean these up!</p>
<p>If things are not too bad, and there are not too many, <code class="docutils literal notranslate"><span class="pre">rename</span></code> can be a friend. Let’s use <code class="docutils literal notranslate"><span class="pre">rename</span></code> to change the column names that have white space to using underscores. Let’s look at the <code class="docutils literal notranslate"><span class="pre">can_lang-colnames.csv</span></code> file for example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">can_lang8</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">read_csv</span><span class="p">(</span><span class="s">&quot;data/can_lang-colnames.csv&quot;</span><span class="p">)</span>
<span class="nf">head</span><span class="p">(</span><span class="n">can_lang8</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Bold">Rows: </span><span class=" -Color -Color-Blue">214</span> <span class=" -Color -Color-Bold">Columns: </span><span class=" -Color -Color-Blue">6</span>
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Cyan">──</span> <span class=" -Color -Color-Bold">Column specification</span> <span class=" -Color -Color-Cyan">─────────────────────────────────────────────────────────────────────────────</span>
<span class=" -Color -Color-Bold">Delimiter:</span> &quot;,&quot;
<span class=" -Color -Color-Red">chr</span> (2): Category, Language
<span class=" -Color -Color-Green">dbl</span> (4): Mother tongue, Spoken most at home, Spoken most at work, Language k...
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Cyan">ℹ</span> Use `spec()` to retrieve the full column specification for this data.
<span class=" -Color -Color-Cyan">ℹ</span> Specify the column types or set `show_col_types = FALSE` to quiet this message.
</pre></div>
</div>
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 6 × 6</caption>
<thead>
	<tr><th scope=col>Category</th><th scope=col>Language</th><th scope=col>Mother tongue</th><th scope=col>Spoken most at home</th><th scope=col>Spoken most at work</th><th scope=col>Language known</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Aboriginal languages                   </td><td>Aboriginal languages, n.o.s.  </td><td>  590</td><td>  235</td><td> 30</td><td>  665</td></tr>
	<tr><td>Non-Official &amp; Non-Aboriginal languages</td><td><span style=white-space:pre-wrap>Afrikaans                     </span></td><td>10260</td><td> 4785</td><td> 85</td><td>23415</td></tr>
	<tr><td>Non-Official &amp; Non-Aboriginal languages</td><td>Afro-Asiatic languages, n.i.e.</td><td> 1150</td><td><span style=white-space:pre-wrap>  445</span></td><td> 10</td><td> 2775</td></tr>
	<tr><td>Non-Official &amp; Non-Aboriginal languages</td><td><span style=white-space:pre-wrap>Akan (Twi)                    </span></td><td>13460</td><td> 5985</td><td> 25</td><td>22150</td></tr>
	<tr><td>Non-Official &amp; Non-Aboriginal languages</td><td><span style=white-space:pre-wrap>Albanian                      </span></td><td>26895</td><td>13135</td><td>345</td><td>31930</td></tr>
	<tr><td>Aboriginal languages                   </td><td>Algonquian languages, n.i.e.  </td><td>   45</td><td>   10</td><td>  0</td><td>  120</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">can_lang9</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">rename</span><span class="p">(</span><span class="n">can_lang8</span><span class="p">,</span><span class="w"> </span><span class="n">Mother_tongue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">`Mother tongue`</span><span class="p">,</span>
<span class="w">                   </span><span class="n">Spoken_most_at_home</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">`Spoken most at home`</span><span class="p">,</span>
<span class="w">                   </span><span class="n">Spoken_most_at_work</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">`Spoken most at work`</span><span class="p">,</span>
<span class="w">                   </span><span class="n">Language_known</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">`Language known`</span><span class="p">)</span>
<span class="nf">head</span><span class="p">(</span><span class="n">can_lang9</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 6 × 6</caption>
<thead>
	<tr><th scope=col>Category</th><th scope=col>Language</th><th scope=col>Mother_tongue</th><th scope=col>Spoken_most_at_home</th><th scope=col>Spoken_most_at_work</th><th scope=col>Language_known</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Aboriginal languages                   </td><td>Aboriginal languages, n.o.s.  </td><td>  590</td><td>  235</td><td> 30</td><td>  665</td></tr>
	<tr><td>Non-Official &amp; Non-Aboriginal languages</td><td><span style=white-space:pre-wrap>Afrikaans                     </span></td><td>10260</td><td> 4785</td><td> 85</td><td>23415</td></tr>
	<tr><td>Non-Official &amp; Non-Aboriginal languages</td><td>Afro-Asiatic languages, n.i.e.</td><td> 1150</td><td><span style=white-space:pre-wrap>  445</span></td><td> 10</td><td> 2775</td></tr>
	<tr><td>Non-Official &amp; Non-Aboriginal languages</td><td><span style=white-space:pre-wrap>Akan (Twi)                    </span></td><td>13460</td><td> 5985</td><td> 25</td><td>22150</td></tr>
	<tr><td>Non-Official &amp; Non-Aboriginal languages</td><td><span style=white-space:pre-wrap>Albanian                      </span></td><td>26895</td><td>13135</td><td>345</td><td>31930</td></tr>
	<tr><td>Aboriginal languages                   </td><td>Algonquian languages, n.i.e.  </td><td>   45</td><td>   10</td><td>  0</td><td>  120</td></tr>
</tbody>
</table>
</div></div>
</div>
<section id="cleaning-up-a-lot-of-column-names">
<h4>Cleaning up a lot of column names<a class="headerlink" href="#cleaning-up-a-lot-of-column-names" title="Permalink to this heading">#</a></h4>
<p>Sometimes there are A LOT of column names with non-syntactic names. <code class="docutils literal notranslate"><span class="pre">rename</span></code> is not the best choice here. Instead we’ll use the <code class="docutils literal notranslate"><span class="pre">clean_names</span></code> from the {janitor} package to transform all column names to syntactic ones.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">janitor</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Attaching package: ‘janitor’
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The following objects are masked from ‘package:stats’:

    chisq.test, fisher.test
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">census</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">read_csv</span><span class="p">(</span><span class="s">&quot;data/census_snippet.csv&quot;</span><span class="p">)</span>
<span class="nf">head</span><span class="p">(</span><span class="n">census</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Bold">Rows: </span><span class=" -Color -Color-Blue">12</span> <span class=" -Color -Color-Bold">Columns: </span><span class=" -Color -Color-Blue">16</span>
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Cyan">──</span> <span class=" -Color -Color-Bold">Column specification</span> <span class=" -Color -Color-Cyan">─────────────────────────────────────────────────────────────────────────────</span>
<span class=" -Color -Color-Bold">Delimiter:</span> &quot;,&quot;
<span class=" -Color -Color-Red">chr</span>  (4): Geographic name, Geographic type, Geographic name, Province or ter...
<span class=" -Color -Color-Green">dbl</span> (12): Geographic code, Geographic code, Province or territory, Global no...
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Cyan">ℹ</span> Use `spec()` to retrieve the full column specification for this data.
<span class=" -Color -Color-Cyan">ℹ</span> Specify the column types or set `show_col_types = FALSE` to quiet this message.
</pre></div>
</div>
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 3 × 16</caption>
<thead>
	<tr><th scope=col>Geographic code</th><th scope=col>Geographic name</th><th scope=col>Geographic type</th><th scope=col>Geographic name, Province or territory</th><th scope=col>Geographic code, Province or territory</th><th scope=col>Global non-response rate</th><th scope=col>Data quality flag</th><th scope=col>Household type</th><th scope=col>Number of households, 2006</th><th scope=col>Number of households, 2016</th><th scope=col>Median household total income (2015 constant dollars), 2005</th><th scope=col>Median household total income (2015 constant dollars), 2015</th><th scope=col>Median household total income (2015 constant dollars), % change</th><th scope=col>Median household after-tax income (2015 constant dollars), 2005</th><th scope=col>Median household after-tax income (2015 constant dollars), 2015</th><th scope=col>Median household after-tax income (2015 constant dollars), % change</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1001</td><td>Division No.  1</td><td>Census division</td><td>Newfoundland and Labrador</td><td>10</td><td>3.7</td><td>0</td><td>Total – Household type including census family structure                  </td><td>97015</td><td>112620</td><td>57667</td><td>74676</td><td>29.5</td><td>49750</td><td>64504</td><td>29.7</td></tr>
	<tr><td>1001</td><td>Division No.  1</td><td>Census division</td><td>Newfoundland and Labrador</td><td>10</td><td>3.7</td><td>0</td><td>Census-family households                                                  </td><td>71960</td><td> 78825</td><td>69720</td><td>96124</td><td>37.9</td><td>59713</td><td>81486</td><td>36.5</td></tr>
	<tr><td>1001</td><td>Division No.  1</td><td>Census division</td><td>Newfoundland and Labrador</td><td>10</td><td>3.7</td><td>0</td><td>Households consisting of only one census family without additional persons</td><td>66250</td><td> 73020</td><td>68837</td><td>94566</td><td>37.4</td><td>58715</td><td>80012</td><td>36.3</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">clean_census</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">clean_names</span><span class="p">(</span><span class="n">census</span><span class="p">)</span>
<span class="nf">head</span><span class="p">(</span><span class="n">clean_census</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 3 × 16</caption>
<thead>
	<tr><th scope=col>geographic_code</th><th scope=col>geographic_name</th><th scope=col>geographic_type</th><th scope=col>geographic_name_province_or_territory</th><th scope=col>geographic_code_province_or_territory</th><th scope=col>global_non_response_rate</th><th scope=col>data_quality_flag</th><th scope=col>household_type</th><th scope=col>number_of_households_2006</th><th scope=col>number_of_households_2016</th><th scope=col>median_household_total_income_2015_constant_dollars_2005</th><th scope=col>median_household_total_income_2015_constant_dollars_2015</th><th scope=col>median_household_total_income_2015_constant_dollars_percent_change</th><th scope=col>median_household_after_tax_income_2015_constant_dollars_2005</th><th scope=col>median_household_after_tax_income_2015_constant_dollars_2015</th><th scope=col>median_household_after_tax_income_2015_constant_dollars_percent_change</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1001</td><td>Division No.  1</td><td>Census division</td><td>Newfoundland and Labrador</td><td>10</td><td>3.7</td><td>0</td><td>Total – Household type including census family structure                  </td><td>97015</td><td>112620</td><td>57667</td><td>74676</td><td>29.5</td><td>49750</td><td>64504</td><td>29.7</td></tr>
	<tr><td>1001</td><td>Division No.  1</td><td>Census division</td><td>Newfoundland and Labrador</td><td>10</td><td>3.7</td><td>0</td><td>Census-family households                                                  </td><td>71960</td><td> 78825</td><td>69720</td><td>96124</td><td>37.9</td><td>59713</td><td>81486</td><td>36.5</td></tr>
	<tr><td>1001</td><td>Division No.  1</td><td>Census division</td><td>Newfoundland and Labrador</td><td>10</td><td>3.7</td><td>0</td><td>Households consisting of only one census family without additional persons</td><td>66250</td><td> 73020</td><td>68837</td><td>94566</td><td>37.4</td><td>58715</td><td>80012</td><td>36.3</td></tr>
</tbody>
</table>
</div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">clean_names</span></code> is a thing of great beauty!!!</p>
</section>
</section>
</section>
<section id="single-data-frame-manipulations">
<h2>Single data frame manipulations<a class="headerlink" href="#single-data-frame-manipulations" title="Permalink to this heading">#</a></h2>
<p>Here we are going to learn how to use some of the most essential single data frame manipulation functions from the {dplyr} tidyverse package. To explore these, we will work with some of the data from the <a class="reference external" href="https://www.gapminder.org/">Gapminder project</a>. Jenny Bryan (MDS Founder and Software Developer at RStudio) released this as an R package called {<a class="reference external" href="https://github.com/jennybc/gapminder">gapminder</a>}. We can load the data by loading the {gapminder} library:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">gapminder</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Let’s take a quick look at the first 6 rows using <code class="docutils literal notranslate"><span class="pre">head</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">head</span><span class="p">(</span><span class="n">gapminder</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 6 × 6</caption>
<thead>
	<tr><th scope=col>country</th><th scope=col>continent</th><th scope=col>year</th><th scope=col>lifeExp</th><th scope=col>pop</th><th scope=col>gdpPercap</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Afghanistan</td><td>Asia</td><td>1952</td><td>28.801</td><td> 8425333</td><td>779.4453</td></tr>
	<tr><td>Afghanistan</td><td>Asia</td><td>1957</td><td>30.332</td><td> 9240934</td><td>820.8530</td></tr>
	<tr><td>Afghanistan</td><td>Asia</td><td>1962</td><td>31.997</td><td>10267083</td><td>853.1007</td></tr>
	<tr><td>Afghanistan</td><td>Asia</td><td>1967</td><td>34.020</td><td>11537966</td><td>836.1971</td></tr>
	<tr><td>Afghanistan</td><td>Asia</td><td>1972</td><td>36.088</td><td>13079460</td><td>739.9811</td></tr>
	<tr><td>Afghanistan</td><td>Asia</td><td>1977</td><td>38.438</td><td>14880372</td><td>786.1134</td></tr>
</tbody>
</table>
</div></div>
</div>
<section id="use-select-to-subset-columns">
<h3>Use <code class="docutils literal notranslate"><span class="pre">select</span></code> to subset columns<a class="headerlink" href="#use-select-to-subset-columns" title="Permalink to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">select</span></code> from the [dplyr] package is used to subset the data on variables or columns. Here’s a conventional call to select two columns, <code class="docutils literal notranslate"><span class="pre">year</span></code> and <code class="docutils literal notranslate"><span class="pre">lifeExp</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">select</span><span class="p">(</span><span class="n">gapminder</span><span class="p">,</span><span class="w"> </span><span class="n">year</span><span class="p">,</span><span class="w"> </span><span class="n">lifeExp</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 1704 × 2</caption>
<thead>
	<tr><th scope=col>year</th><th scope=col>lifeExp</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1952</td><td>28.801</td></tr>
	<tr><td>1957</td><td>30.332</td></tr>
	<tr><td>1962</td><td>31.997</td></tr>
	<tr><td>1967</td><td>34.020</td></tr>
	<tr><td>1972</td><td>36.088</td></tr>
	<tr><td>1977</td><td>38.438</td></tr>
	<tr><td>1982</td><td>39.854</td></tr>
	<tr><td>1987</td><td>40.822</td></tr>
	<tr><td>1992</td><td>41.674</td></tr>
	<tr><td>1997</td><td>41.763</td></tr>
	<tr><td>2002</td><td>42.129</td></tr>
	<tr><td>2007</td><td>43.828</td></tr>
	<tr><td>1952</td><td>55.230</td></tr>
	<tr><td>1957</td><td>59.280</td></tr>
	<tr><td>1962</td><td>64.820</td></tr>
	<tr><td>1967</td><td>66.220</td></tr>
	<tr><td>1972</td><td>67.690</td></tr>
	<tr><td>1977</td><td>68.930</td></tr>
	<tr><td>1982</td><td>70.420</td></tr>
	<tr><td>1987</td><td>72.000</td></tr>
	<tr><td>1992</td><td>71.581</td></tr>
	<tr><td>1997</td><td>72.950</td></tr>
	<tr><td>2002</td><td>75.651</td></tr>
	<tr><td>2007</td><td>76.423</td></tr>
	<tr><td>1952</td><td>43.077</td></tr>
	<tr><td>1957</td><td>45.685</td></tr>
	<tr><td>1962</td><td>48.303</td></tr>
	<tr><td>1967</td><td>51.407</td></tr>
	<tr><td>1972</td><td>54.518</td></tr>
	<tr><td>1977</td><td>58.014</td></tr>
	<tr><td>⋮</td><td>⋮</td></tr>
	<tr><td>1982</td><td>49.113</td></tr>
	<tr><td>1987</td><td>52.922</td></tr>
	<tr><td>1992</td><td>55.599</td></tr>
	<tr><td>1997</td><td>58.020</td></tr>
	<tr><td>2002</td><td>60.308</td></tr>
	<tr><td>2007</td><td>62.698</td></tr>
	<tr><td>1952</td><td>42.038</td></tr>
	<tr><td>1957</td><td>44.077</td></tr>
	<tr><td>1962</td><td>46.023</td></tr>
	<tr><td>1967</td><td>47.768</td></tr>
	<tr><td>1972</td><td>50.107</td></tr>
	<tr><td>1977</td><td>51.386</td></tr>
	<tr><td>1982</td><td>51.821</td></tr>
	<tr><td>1987</td><td>50.821</td></tr>
	<tr><td>1992</td><td>46.100</td></tr>
	<tr><td>1997</td><td>40.238</td></tr>
	<tr><td>2002</td><td>39.193</td></tr>
	<tr><td>2007</td><td>42.384</td></tr>
	<tr><td>1952</td><td>48.451</td></tr>
	<tr><td>1957</td><td>50.469</td></tr>
	<tr><td>1962</td><td>52.358</td></tr>
	<tr><td>1967</td><td>53.995</td></tr>
	<tr><td>1972</td><td>55.635</td></tr>
	<tr><td>1977</td><td>57.674</td></tr>
	<tr><td>1982</td><td>60.363</td></tr>
	<tr><td>1987</td><td>62.351</td></tr>
	<tr><td>1992</td><td>60.377</td></tr>
	<tr><td>1997</td><td>46.809</td></tr>
	<tr><td>2002</td><td>39.989</td></tr>
	<tr><td>2007</td><td>43.487</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>Wow! That’s a lot of rows… For teaching purposes I am intentionally not binding a name to the output of these commands, as they are for demonstration only, however, that means we don’t have an object to call <code class="docutils literal notranslate"><span class="pre">head</span></code> on… In Jupyter we can use this <code class="docutils literal notranslate"><span class="pre">options</span></code> function call to limit the number of rows output when we call an entire data frame.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># run this command to limit data frame output to 10 rows</span>
<span class="nf">options</span><span class="p">(</span><span class="n">repr.matrix.max.rows</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">select</span><span class="p">(</span><span class="n">gapminder</span><span class="p">,</span><span class="w"> </span><span class="n">year</span><span class="p">,</span><span class="w"> </span><span class="n">lifeExp</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 1704 × 2</caption>
<thead>
	<tr><th scope=col>year</th><th scope=col>lifeExp</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1952</td><td>28.801</td></tr>
	<tr><td>1957</td><td>30.332</td></tr>
	<tr><td>1962</td><td>31.997</td></tr>
	<tr><td>1967</td><td>34.020</td></tr>
	<tr><td>1972</td><td>36.088</td></tr>
	<tr><td>⋮</td><td>⋮</td></tr>
	<tr><td>1987</td><td>62.351</td></tr>
	<tr><td>1992</td><td>60.377</td></tr>
	<tr><td>1997</td><td>46.809</td></tr>
	<tr><td>2002</td><td>39.989</td></tr>
	<tr><td>2007</td><td>43.487</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>You can also use <code class="docutils literal notranslate"><span class="pre">select</span></code> to get a range of columns using names:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">select</span><span class="p">(</span><span class="n">gapminder</span><span class="p">,</span><span class="w"> </span><span class="n">country</span><span class="o">:</span><span class="n">lifeExp</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 1704 × 4</caption>
<thead>
	<tr><th scope=col>country</th><th scope=col>continent</th><th scope=col>year</th><th scope=col>lifeExp</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Afghanistan</td><td>Asia</td><td>1952</td><td>28.801</td></tr>
	<tr><td>Afghanistan</td><td>Asia</td><td>1957</td><td>30.332</td></tr>
	<tr><td>Afghanistan</td><td>Asia</td><td>1962</td><td>31.997</td></tr>
	<tr><td>Afghanistan</td><td>Asia</td><td>1967</td><td>34.020</td></tr>
	<tr><td>Afghanistan</td><td>Asia</td><td>1972</td><td>36.088</td></tr>
	<tr><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td></tr>
	<tr><td>Zimbabwe</td><td>Africa</td><td>1987</td><td>62.351</td></tr>
	<tr><td>Zimbabwe</td><td>Africa</td><td>1992</td><td>60.377</td></tr>
	<tr><td>Zimbabwe</td><td>Africa</td><td>1997</td><td>46.809</td></tr>
	<tr><td>Zimbabwe</td><td>Africa</td><td>2002</td><td>39.989</td></tr>
	<tr><td>Zimbabwe</td><td>Africa</td><td>2007</td><td>43.487</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="use-filter-to-subset-rows-that-meet-a-specific-condition">
<h3>Use <code class="docutils literal notranslate"><span class="pre">filter</span></code> to subset rows that meet a specific condition<a class="headerlink" href="#use-filter-to-subset-rows-that-meet-a-specific-condition" title="Permalink to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">filter</span></code> from the {dplyr package, takes logical expressions and returns the rows for which all are <code class="docutils literal notranslate"><span class="pre">TRUE</span></code>, for example we can subset rows which have a life expectancy &gt; 29:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">filter</span><span class="p">(</span><span class="n">gapminder</span><span class="p">,</span><span class="w"> </span><span class="n">lifeExp</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">29</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 2 × 6</caption>
<thead>
	<tr><th scope=col>country</th><th scope=col>continent</th><th scope=col>year</th><th scope=col>lifeExp</th><th scope=col>pop</th><th scope=col>gdpPercap</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Afghanistan</td><td>Asia  </td><td>1952</td><td>28.801</td><td>8425333</td><td>779.4453</td></tr>
	<tr><td>Rwanda     </td><td>Africa</td><td>1992</td><td>23.599</td><td>7290203</td><td>737.0686</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>We can susbet rows that meet two conditions, for example we can subset rows which are from the country Rwanda and whose year is &gt; 1979. Note we use the comma <code class="docutils literal notranslate"><span class="pre">,</span></code> to separate the two conditions:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">filter</span><span class="p">(</span><span class="n">gapminder</span><span class="p">,</span><span class="w"> </span><span class="n">country</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;Rwanda&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">year</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">1979</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 6 × 6</caption>
<thead>
	<tr><th scope=col>country</th><th scope=col>continent</th><th scope=col>year</th><th scope=col>lifeExp</th><th scope=col>pop</th><th scope=col>gdpPercap</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Rwanda</td><td>Africa</td><td>1982</td><td>46.218</td><td>5507565</td><td>881.5706</td></tr>
	<tr><td>Rwanda</td><td>Africa</td><td>1987</td><td>44.020</td><td>6349365</td><td>847.9912</td></tr>
	<tr><td>Rwanda</td><td>Africa</td><td>1992</td><td>23.599</td><td>7290203</td><td>737.0686</td></tr>
	<tr><td>Rwanda</td><td>Africa</td><td>1997</td><td>36.087</td><td>7212583</td><td>589.9445</td></tr>
	<tr><td>Rwanda</td><td>Africa</td><td>2002</td><td>43.413</td><td>7852401</td><td>785.6538</td></tr>
	<tr><td>Rwanda</td><td>Africa</td><td>2007</td><td>46.242</td><td>8860588</td><td>863.0885</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>to filter for multiple conditions that <strong>need not</strong> co-occur, use <code class="docutils literal notranslate"><span class="pre">|</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">filter</span><span class="p">(</span><span class="n">gapminder</span><span class="p">,</span><span class="w"> </span><span class="n">lifeExp</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">80</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">year</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2007</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 150 × 6</caption>
<thead>
	<tr><th scope=col>country</th><th scope=col>continent</th><th scope=col>year</th><th scope=col>lifeExp</th><th scope=col>pop</th><th scope=col>gdpPercap</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Afghanistan</td><td>Asia    </td><td>2007</td><td>43.828</td><td>31889923</td><td>  974.5803</td></tr>
	<tr><td>Albania    </td><td>Europe  </td><td>2007</td><td>76.423</td><td> 3600523</td><td> 5937.0295</td></tr>
	<tr><td>Algeria    </td><td>Africa  </td><td>2007</td><td>72.301</td><td>33333216</td><td> 6223.3675</td></tr>
	<tr><td>Angola     </td><td>Africa  </td><td>2007</td><td>42.731</td><td>12420476</td><td> 4797.2313</td></tr>
	<tr><td>Argentina  </td><td>Americas</td><td>2007</td><td>75.320</td><td>40301927</td><td>12779.3796</td></tr>
	<tr><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td></tr>
	<tr><td>Vietnam           </td><td>Asia  </td><td>2007</td><td>74.249</td><td>85262356</td><td>2441.5764</td></tr>
	<tr><td>West Bank and Gaza</td><td>Asia  </td><td>2007</td><td>73.422</td><td> 4018332</td><td>3025.3498</td></tr>
	<tr><td>Yemen, Rep.       </td><td>Asia  </td><td>2007</td><td>62.698</td><td>22211743</td><td>2280.7699</td></tr>
	<tr><td>Zambia            </td><td>Africa</td><td>2007</td><td>42.384</td><td>11746035</td><td>1271.2116</td></tr>
	<tr><td>Zimbabwe          </td><td>Africa</td><td>2007</td><td>43.487</td><td>12311143</td><td> 469.7093</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>Finally, we can use the <code class="docutils literal notranslate"><span class="pre">%in%</span></code> operator to subset rows which have values that match a value from several possible values:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">filter</span><span class="p">(</span><span class="n">gapminder</span><span class="p">,</span><span class="w"> </span><span class="n">country</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;Mexico&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;United States&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Canada&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 36 × 6</caption>
<thead>
	<tr><th scope=col>country</th><th scope=col>continent</th><th scope=col>year</th><th scope=col>lifeExp</th><th scope=col>pop</th><th scope=col>gdpPercap</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Canada</td><td>Americas</td><td>1952</td><td>68.75</td><td>14785584</td><td>11367.16</td></tr>
	<tr><td>Canada</td><td>Americas</td><td>1957</td><td>69.96</td><td>17010154</td><td>12489.95</td></tr>
	<tr><td>Canada</td><td>Americas</td><td>1962</td><td>71.30</td><td>18985849</td><td>13462.49</td></tr>
	<tr><td>Canada</td><td>Americas</td><td>1967</td><td>72.13</td><td>20819767</td><td>16076.59</td></tr>
	<tr><td>Canada</td><td>Americas</td><td>1972</td><td>72.88</td><td>22284500</td><td>18970.57</td></tr>
	<tr><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td></tr>
	<tr><td>United States</td><td>Americas</td><td>1987</td><td>75.020</td><td>242803533</td><td>29884.35</td></tr>
	<tr><td>United States</td><td>Americas</td><td>1992</td><td>76.090</td><td>256894189</td><td>32003.93</td></tr>
	<tr><td>United States</td><td>Americas</td><td>1997</td><td>76.810</td><td>272911760</td><td>35767.43</td></tr>
	<tr><td>United States</td><td>Americas</td><td>2002</td><td>77.310</td><td>287675526</td><td>39097.10</td></tr>
	<tr><td>United States</td><td>Americas</td><td>2007</td><td>78.242</td><td>301139947</td><td>42951.65</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="combining-functions-with-the-pipe-operator">
<h3>Combining functions with the pipe <code class="docutils literal notranslate"><span class="pre">|&gt;</span></code> operator<a class="headerlink" href="#combining-functions-with-the-pipe-operator" title="Permalink to this heading">#</a></h3>
<p>In R, we often have to call multiple functions in a sequence to process a data frame. The basic ways of doing this can become quickly unreadable if there are many steps. For example, suppose we need to perform three operations on a data frame <code class="docutils literal notranslate"><span class="pre">data</span></code>:</p>
<ol class="arabic simple">
<li><p>add a new column <code class="docutils literal notranslate"><span class="pre">new_col</span></code> that is double another <code class="docutils literal notranslate"><span class="pre">old_col</span></code></p></li>
<li><p>filter for rows where another column, <code class="docutils literal notranslate"><span class="pre">other_col</span></code>, is more than 5, and</p></li>
<li><p>select only the new column <code class="docutils literal notranslate"><span class="pre">new_col</span></code> for those rows.</p></li>
</ol>
<p>One way of doing is to just write multiple lines of code, storing temporary objects as you go:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">output_1</span> <span class="o">&lt;-</span> <span class="n">mutate</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">new_col</span> <span class="o">=</span> <span class="n">old_col</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">output_2</span> <span class="o">&lt;-</span> <span class="nb">filter</span><span class="p">(</span><span class="n">output_1</span><span class="p">,</span> <span class="n">other_col</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">output</span> <span class="o">&lt;-</span> <span class="n">select</span><span class="p">(</span><span class="n">output_2</span><span class="p">,</span> <span class="n">new_col</span><span class="p">)</span>
</pre></div>
</div>
<p>This is difficult to understand for multiple reasons. The reader may be tricked into thinking the named <code class="docutils literal notranslate"><span class="pre">output_1</span></code> and <code class="docutils literal notranslate"><span class="pre">output_2</span></code> objects are important for some reason, while they are just temporary intermediate computations. Further, the reader has to look through and find where <code class="docutils literal notranslate"><span class="pre">output_1</span></code> and <code class="docutils literal notranslate"><span class="pre">output_2</span></code> are used in each subsequent line.</p>
<p>Another option for doing this would be to compose the functions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">output</span> <span class="o">&lt;-</span> <span class="n">select</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="n">mutate</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">new_col</span> <span class="o">=</span> <span class="n">old_col</span> <span class="o">*</span> <span class="mi">2</span><span class="p">),</span> <span class="n">other_col</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">),</span> <span class="n">new_col</span><span class="p">)</span>
</pre></div>
</div>
<p>Code like this can also be difficult to understand. Functions compose (reading from left to right) in the opposite order in which they are computed by R (above, <code class="docutils literal notranslate"><span class="pre">mutate</span></code> happens first, then <code class="docutils literal notranslate"><span class="pre">filter</span></code>, then <code class="docutils literal notranslate"><span class="pre">select</span></code>). It is also just a really long line of code to read in one go.</p>
<p>The pipe operator <code class="docutils literal notranslate"><span class="pre">|&gt;</span></code> solves this problem, resulting in cleaner and easier-to-follow code. |&gt; in built into R so you don’t need to load any packages to use it. The code below accomplishes the same thing as the previous two code blocks:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">output</span> <span class="o">&lt;-</span> <span class="n">data</span> <span class="o">|&gt;</span>
<span class="n">mutate</span><span class="p">(</span><span class="n">new_col</span> <span class="o">=</span> <span class="n">old_col</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span> <span class="o">|&gt;</span>
<span class="nb">filter</span><span class="p">(</span><span class="n">other_col</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">)</span> <span class="o">|&gt;</span>
<span class="n">select</span><span class="p">(</span><span class="n">new_col</span><span class="p">)</span>
</pre></div>
</div>
<p>The pipe operator takes the thing on the left-hand-side and pipes it into the function call on the right-hand-side – <em><strong>literally, drops it in as the first argument.</strong></em></p>
<ul class="simple">
<li><p>this year (2021) R created <code class="docutils literal notranslate"><span class="pre">|&gt;</span></code> as a built-in pipe operator!!!</p></li>
<li><p>it was inspired from the pipe from the <code class="docutils literal notranslate"><span class="pre">magrittr</span></code> package <code class="docutils literal notranslate"><span class="pre">%&gt;%</span></code>; which is imported by the <code class="docutils literal notranslate"><span class="pre">tidyverse</span></code> (and <code class="docutils literal notranslate"><span class="pre">dplyr</span></code>) package</p></li>
</ul>
<p><img alt="" src="http://hexb.in/hexagons/magrittr.png" />
<em>Referring to the <a class="reference external" href="https://www.wikiart.org/en/rene-magritte/the-treachery-of-images-this-is-not-a-pipe-1948">1948 painting La Trahison des images</a> by Rene Magritte</em></p>
<p>So now we also have:</p>
<p><img alt="base R pipe hex" src="../_images/base-pipe-hex.jpg" /></p>
<p>Logo by <a class="reference external" href="https://twitter.com/LuisDVerde">&#64;LuisDVerde</a></p>
<p><em>Source: https://twitter.com/LuisDVerde/status/1430905603405144065</em></p>
<p>Which to use? Most of the time there will be no difference. I will be adopting <code class="docutils literal notranslate"><span class="pre">|&gt;</span></code> in my notes, homeworks, etc however, some from past times will use <code class="docutils literal notranslate"><span class="pre">%&gt;%</span></code> and you will still see <code class="docutils literal notranslate"><span class="pre">|&gt;</span></code> in other people’s code.</p>
<p>I am choosing <code class="docutils literal notranslate"><span class="pre">|&gt;</span></code> because I can then use piping in R packages without depending upon the <code class="docutils literal notranslate"><span class="pre">magrittr</span></code> package. More on this in DSCI 524: Collaborative Software Developement.</p>
<p>So instead of using intermediate objects to combine two functions (<em>e.g.</em>, <code class="docutils literal notranslate"><span class="pre">select</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">filter</span></code>) like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">gap_under_29</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">filter</span><span class="p">(</span><span class="n">gapminder</span><span class="p">,</span><span class="w"> </span><span class="n">lifeExp</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">29</span><span class="p">)</span>
<span class="nf">select</span><span class="p">(</span><span class="n">gap_under_29</span><span class="p">,</span><span class="w"> </span><span class="n">country</span><span class="p">,</span><span class="w"> </span><span class="n">year</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 2 × 2</caption>
<thead>
	<tr><th scope=col>country</th><th scope=col>year</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Afghanistan</td><td>1952</td></tr>
	<tr><td>Rwanda     </td><td>1992</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>And instead of composing functions in a hard to read manner:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">select</span><span class="p">(</span><span class="nf">filter</span><span class="p">(</span><span class="n">gapminder</span><span class="p">,</span><span class="w"> </span><span class="n">lifeExp</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">29</span><span class="p">),</span><span class="w"> </span><span class="n">country</span><span class="p">,</span><span class="w"> </span><span class="n">year</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 2 × 2</caption>
<thead>
	<tr><th scope=col>country</th><th scope=col>year</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Afghanistan</td><td>1952</td></tr>
	<tr><td>Rwanda     </td><td>1992</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>We can use the pipe <code class="docutils literal notranslate"><span class="pre">|&gt;</span></code> to create easy to read piplines to connect our function calls:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">filter</span><span class="p">(</span><span class="n">gapminder</span><span class="p">,</span><span class="w"> </span><span class="n">lifeExp</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">29</span><span class="p">)</span><span class="w"> </span><span class="o">|&gt;</span>
<span class="w">    </span><span class="nf">select</span><span class="p">(</span><span class="n">country</span><span class="p">,</span><span class="w"> </span><span class="n">year</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 2 × 2</caption>
<thead>
	<tr><th scope=col>country</th><th scope=col>year</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Afghanistan</td><td>1952</td></tr>
	<tr><td>Rwanda     </td><td>1992</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>We can even start out our pipelines with an R data frame!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">gapminder</span><span class="w"> </span><span class="o">|&gt;</span>
<span class="w">    </span><span class="nf">filter</span><span class="p">(</span><span class="n">lifeExp</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">29</span><span class="p">)</span><span class="w"> </span><span class="o">|&gt;</span>
<span class="w">    </span><span class="nf">select</span><span class="p">(</span><span class="n">country</span><span class="p">,</span><span class="w"> </span><span class="n">year</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 2 × 2</caption>
<thead>
	<tr><th scope=col>country</th><th scope=col>year</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Afghanistan</td><td>1952</td></tr>
	<tr><td>Rwanda     </td><td>1992</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>We will embrace the pipe going forward in MDS!</p>
<section id="pro-tip-for-creating-objects-using-the-pipe">
<h4>Pro-tip for creating objects using the pipe<a class="headerlink" href="#pro-tip-for-creating-objects-using-the-pipe" title="Permalink to this heading">#</a></h4>
<p>Don’t start writing your code by assigning to an object - it’s hard to debug and find the errors:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">new_df</span> <span class="o">&lt;-</span> <span class="n">gapminder</span> <span class="o">|&gt;</span> 
    <span class="nb">filter</span><span class="p">(</span><span class="n">country</span> <span class="o">==</span> <span class="s2">&quot;Cabodia&quot;</span><span class="p">)</span> <span class="o">|&gt;</span>
    <span class="n">select</span><span class="p">(</span><span class="n">Year</span><span class="p">,</span> <span class="n">lifeExp</span><span class="p">)</span> 
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Error in .f(.x[[i]], ...): object &#39;Year&#39; not found
Traceback:

1. gapminder |&gt; filter(country == &quot;Cabodia&quot;) |&gt; select(Year, lifeExp)
2. withVisible(eval(quote(`_fseq`(`_lhs`)), env, env))
3. eval(quote(`_fseq`(`_lhs`)), env, env)
4. eval(quote(`_fseq`(`_lhs`)), env, env)
5. `_fseq`(`_lhs`)
6. freduce(value, `_function_list`)
7. withVisible(function_list[[k]](value))
8. function_list[[k]](value)
9. select(., Year, lifeExp)
10. select.data.frame(., Year, lifeExp)
11. tidyselect::vars_select(tbl_vars(.data), !!!enquos(...))
12. vars_select_eval(.vars, quos)
13. map_if(quos, !is_helper, eval_tidy, mask)
14. map(.x[sel], .f, ...)
15. .f(.x[[i]], ...)
</pre></div>
</div>
<p>Instead, create your pipeline, just dumping it to the screen:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">gapminder</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span>
<span class="w">    </span><span class="nf">filter</span><span class="p">(</span><span class="n">country</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;Cambodia&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">|&gt;</span>
<span class="w">    </span><span class="nf">select</span><span class="p">(</span><span class="n">year</span><span class="p">,</span><span class="w"> </span><span class="n">lifeExp</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 12 × 2</caption>
<thead>
	<tr><th scope=col>year</th><th scope=col>lifeExp</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1952</td><td>39.417</td></tr>
	<tr><td>1957</td><td>41.366</td></tr>
	<tr><td>1962</td><td>43.415</td></tr>
	<tr><td>1967</td><td>45.415</td></tr>
	<tr><td>1972</td><td>40.317</td></tr>
	<tr><td>⋮</td><td>⋮</td></tr>
	<tr><td>1987</td><td>53.914</td></tr>
	<tr><td>1992</td><td>55.803</td></tr>
	<tr><td>1997</td><td>56.534</td></tr>
	<tr><td>2002</td><td>56.752</td></tr>
	<tr><td>2007</td><td>59.723</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>Then, once you know it works, assign it to an object:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">new_df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">gapminder</span><span class="w"> </span><span class="o">|&gt;</span>
<span class="w">    </span><span class="nf">filter</span><span class="p">(</span><span class="n">country</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;Cambodia&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">|&gt;</span>
<span class="w">    </span><span class="nf">select</span><span class="p">(</span><span class="n">year</span><span class="p">,</span><span class="w"> </span><span class="n">lifeExp</span><span class="p">)</span><span class="w"> </span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="use-mutate-to-add-new-variables">
<h3>Use <code class="docutils literal notranslate"><span class="pre">mutate</span></code> to add new variables<a class="headerlink" href="#use-mutate-to-add-new-variables" title="Permalink to this heading">#</a></h3>
<p>Imagine we wanted to recover each country’s GDP. After all, the Gapminder data has a variable for population and GDP per capita. Let’s multiply them together.</p>
<p><code class="docutils literal notranslate"><span class="pre">mutate</span></code> is a function that defines and inserts new variables into a tibble. You can refer to existing variables by name.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">gapminder</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span>
<span class="w">    </span><span class="nf">mutate</span><span class="p">(</span><span class="n">tot_gdp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pop</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">gdpPercap</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 1704 × 7</caption>
<thead>
	<tr><th scope=col>country</th><th scope=col>continent</th><th scope=col>year</th><th scope=col>lifeExp</th><th scope=col>pop</th><th scope=col>gdpPercap</th><th scope=col>tot_gdp</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Afghanistan</td><td>Asia</td><td>1952</td><td>28.801</td><td> 8425333</td><td>779.4453</td><td>6567086330</td></tr>
	<tr><td>Afghanistan</td><td>Asia</td><td>1957</td><td>30.332</td><td> 9240934</td><td>820.8530</td><td>7585448670</td></tr>
	<tr><td>Afghanistan</td><td>Asia</td><td>1962</td><td>31.997</td><td>10267083</td><td>853.1007</td><td>8758855797</td></tr>
	<tr><td>Afghanistan</td><td>Asia</td><td>1967</td><td>34.020</td><td>11537966</td><td>836.1971</td><td>9648014150</td></tr>
	<tr><td>Afghanistan</td><td>Asia</td><td>1972</td><td>36.088</td><td>13079460</td><td>739.9811</td><td>9678553274</td></tr>
	<tr><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td></tr>
	<tr><td>Zimbabwe</td><td>Africa</td><td>1987</td><td>62.351</td><td> 9216418</td><td>706.1573</td><td>6508240905</td></tr>
	<tr><td>Zimbabwe</td><td>Africa</td><td>1992</td><td>60.377</td><td>10704340</td><td>693.4208</td><td>7422611852</td></tr>
	<tr><td>Zimbabwe</td><td>Africa</td><td>1997</td><td>46.809</td><td>11404948</td><td>792.4500</td><td>9037850590</td></tr>
	<tr><td>Zimbabwe</td><td>Africa</td><td>2002</td><td>39.989</td><td>11926563</td><td>672.0386</td><td>8015110972</td></tr>
	<tr><td>Zimbabwe</td><td>Africa</td><td>2007</td><td>43.487</td><td>12311143</td><td>469.7093</td><td>5782658337</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>To <code class="docutils literal notranslate"><span class="pre">mutate</span></code> more than one column, use commas to separate the mutation for each column:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">gapminder</span><span class="w"> </span><span class="o">|&gt;</span>
<span class="w">    </span><span class="nf">mutate</span><span class="p">(</span><span class="n">tot_gdp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pop</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">gdpPercap</span><span class="p">,</span>
<span class="w">          </span><span class="n">pop_thousands</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pop</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">1000</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 1704 × 8</caption>
<thead>
	<tr><th scope=col>country</th><th scope=col>continent</th><th scope=col>year</th><th scope=col>lifeExp</th><th scope=col>pop</th><th scope=col>gdpPercap</th><th scope=col>tot_gdp</th><th scope=col>pop_thousands</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Afghanistan</td><td>Asia</td><td>1952</td><td>28.801</td><td> 8425333</td><td>779.4453</td><td>6567086330</td><td> 8425.333</td></tr>
	<tr><td>Afghanistan</td><td>Asia</td><td>1957</td><td>30.332</td><td> 9240934</td><td>820.8530</td><td>7585448670</td><td> 9240.934</td></tr>
	<tr><td>Afghanistan</td><td>Asia</td><td>1962</td><td>31.997</td><td>10267083</td><td>853.1007</td><td>8758855797</td><td>10267.083</td></tr>
	<tr><td>Afghanistan</td><td>Asia</td><td>1967</td><td>34.020</td><td>11537966</td><td>836.1971</td><td>9648014150</td><td>11537.966</td></tr>
	<tr><td>Afghanistan</td><td>Asia</td><td>1972</td><td>36.088</td><td>13079460</td><td>739.9811</td><td>9678553274</td><td>13079.460</td></tr>
	<tr><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td></tr>
	<tr><td>Zimbabwe</td><td>Africa</td><td>1987</td><td>62.351</td><td> 9216418</td><td>706.1573</td><td>6508240905</td><td> 9216.418</td></tr>
	<tr><td>Zimbabwe</td><td>Africa</td><td>1992</td><td>60.377</td><td>10704340</td><td>693.4208</td><td>7422611852</td><td>10704.340</td></tr>
	<tr><td>Zimbabwe</td><td>Africa</td><td>1997</td><td>46.809</td><td>11404948</td><td>792.4500</td><td>9037850590</td><td>11404.948</td></tr>
	<tr><td>Zimbabwe</td><td>Africa</td><td>2002</td><td>39.989</td><td>11926563</td><td>672.0386</td><td>8015110972</td><td>11926.563</td></tr>
	<tr><td>Zimbabwe</td><td>Africa</td><td>2007</td><td>43.487</td><td>12311143</td><td>469.7093</td><td>5782658337</td><td>12311.143</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>We can even change a column in place:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">gapminder</span><span class="w"> </span><span class="o">|&gt;</span>
<span class="w">    </span><span class="nf">mutate</span><span class="p">(</span><span class="n">lifeExp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">round</span><span class="p">(</span><span class="n">lifeExp</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 1704 × 6</caption>
<thead>
	<tr><th scope=col>country</th><th scope=col>continent</th><th scope=col>year</th><th scope=col>lifeExp</th><th scope=col>pop</th><th scope=col>gdpPercap</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Afghanistan</td><td>Asia</td><td>1952</td><td>29</td><td> 8425333</td><td>779.4453</td></tr>
	<tr><td>Afghanistan</td><td>Asia</td><td>1957</td><td>30</td><td> 9240934</td><td>820.8530</td></tr>
	<tr><td>Afghanistan</td><td>Asia</td><td>1962</td><td>32</td><td>10267083</td><td>853.1007</td></tr>
	<tr><td>Afghanistan</td><td>Asia</td><td>1967</td><td>34</td><td>11537966</td><td>836.1971</td></tr>
	<tr><td>Afghanistan</td><td>Asia</td><td>1972</td><td>36</td><td>13079460</td><td>739.9811</td></tr>
	<tr><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td></tr>
	<tr><td>Zimbabwe</td><td>Africa</td><td>1987</td><td>62</td><td> 9216418</td><td>706.1573</td></tr>
	<tr><td>Zimbabwe</td><td>Africa</td><td>1992</td><td>60</td><td>10704340</td><td>693.4208</td></tr>
	<tr><td>Zimbabwe</td><td>Africa</td><td>1997</td><td>47</td><td>11404948</td><td>792.4500</td></tr>
	<tr><td>Zimbabwe</td><td>Africa</td><td>2002</td><td>40</td><td>11926563</td><td>672.0386</td></tr>
	<tr><td>Zimbabwe</td><td>Africa</td><td>2007</td><td>43</td><td>12311143</td><td>469.7093</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="use-arrange-to-sort-a-data-frame">
<h3>Use <code class="docutils literal notranslate"><span class="pre">arrange</span></code> to sort a data frame<a class="headerlink" href="#use-arrange-to-sort-a-data-frame" title="Permalink to this heading">#</a></h3>
<p>Imagine we wanted to know the country (and year) with the shortest life expectancy? How can we do this?</p>
<p><code class="docutils literal notranslate"><span class="pre">arrange</span></code> is a function that sorts data frames based on a column, or columns. Let’s use it below to answer the questiom we just posed above!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">gapminder</span><span class="w"> </span><span class="o">|&gt;</span>
<span class="w">    </span><span class="nf">arrange</span><span class="p">(</span><span class="n">lifeExp</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 1704 × 6</caption>
<thead>
	<tr><th scope=col>country</th><th scope=col>continent</th><th scope=col>year</th><th scope=col>lifeExp</th><th scope=col>pop</th><th scope=col>gdpPercap</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Rwanda      </td><td>Africa</td><td>1992</td><td>23.599</td><td>7290203</td><td> 737.0686</td></tr>
	<tr><td>Afghanistan </td><td>Asia  </td><td>1952</td><td>28.801</td><td>8425333</td><td> 779.4453</td></tr>
	<tr><td>Gambia      </td><td>Africa</td><td>1952</td><td>30.000</td><td> 284320</td><td> 485.2307</td></tr>
	<tr><td>Angola      </td><td>Africa</td><td>1952</td><td>30.015</td><td>4232095</td><td>3520.6103</td></tr>
	<tr><td>Sierra Leone</td><td>Africa</td><td>1952</td><td>30.331</td><td>2143249</td><td> 879.7877</td></tr>
	<tr><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td></tr>
	<tr><td>Switzerland     </td><td>Europe</td><td>2007</td><td>81.701</td><td>  7554661</td><td>37506.42</td></tr>
	<tr><td>Iceland         </td><td>Europe</td><td>2007</td><td>81.757</td><td>   301931</td><td>36180.79</td></tr>
	<tr><td>Japan           </td><td>Asia  </td><td>2002</td><td>82.000</td><td>127065841</td><td>28604.59</td></tr>
	<tr><td>Hong Kong, China</td><td>Asia  </td><td>2007</td><td>82.208</td><td>  6980412</td><td>39724.98</td></tr>
	<tr><td>Japan           </td><td>Asia  </td><td>2007</td><td>82.603</td><td>127467972</td><td>31656.07</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>What about the hightest life expectancy? We can pair the <code class="docutils literal notranslate"><span class="pre">arrange</span></code> function, with another function, called <code class="docutils literal notranslate"><span class="pre">desc</span></code> to sort the data frame in descending order:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">gapminder</span><span class="w"> </span><span class="o">|&gt;</span>
<span class="w">    </span><span class="nf">arrange</span><span class="p">(</span><span class="nf">desc</span><span class="p">(</span><span class="n">lifeExp</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 1704 × 6</caption>
<thead>
	<tr><th scope=col>country</th><th scope=col>continent</th><th scope=col>year</th><th scope=col>lifeExp</th><th scope=col>pop</th><th scope=col>gdpPercap</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Japan           </td><td>Asia  </td><td>2007</td><td>82.603</td><td>127467972</td><td>31656.07</td></tr>
	<tr><td>Hong Kong, China</td><td>Asia  </td><td>2007</td><td>82.208</td><td>  6980412</td><td>39724.98</td></tr>
	<tr><td>Japan           </td><td>Asia  </td><td>2002</td><td>82.000</td><td>127065841</td><td>28604.59</td></tr>
	<tr><td>Iceland         </td><td>Europe</td><td>2007</td><td>81.757</td><td>   301931</td><td>36180.79</td></tr>
	<tr><td>Switzerland     </td><td>Europe</td><td>2007</td><td>81.701</td><td>  7554661</td><td>37506.42</td></tr>
	<tr><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td></tr>
	<tr><td>Sierra Leone</td><td>Africa</td><td>1952</td><td>30.331</td><td>2143249</td><td> 879.7877</td></tr>
	<tr><td>Angola      </td><td>Africa</td><td>1952</td><td>30.015</td><td>4232095</td><td>3520.6103</td></tr>
	<tr><td>Gambia      </td><td>Africa</td><td>1952</td><td>30.000</td><td> 284320</td><td> 485.2307</td></tr>
	<tr><td>Afghanistan </td><td>Asia  </td><td>1952</td><td>28.801</td><td>8425333</td><td> 779.4453</td></tr>
	<tr><td>Rwanda      </td><td>Africa</td><td>1992</td><td>23.599</td><td>7290203</td><td> 737.0686</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="getting-a-single-value-from-a-data-frame">
<h3>Getting a single value from a data frame<a class="headerlink" href="#getting-a-single-value-from-a-data-frame" title="Permalink to this heading">#</a></h3>
<p>What if you want the name of the country with the longest life expectancy back as just a single character vector, and not a data frame? How do we do this?</p>
<p>We need two additional {dplyr} functions to get this job done using the tidyverse, <code class="docutils literal notranslate"><span class="pre">slice</span></code> and <code class="docutils literal notranslate"><span class="pre">pull</span></code>. <code class="docutils literal notranslate"><span class="pre">slice</span></code> allows you to numerically index rows in R, returning the row number(s) specified. <code class="docutils literal notranslate"><span class="pre">pull</span></code> removes the data frame structure, returning the data as the next simpler data structure in R, a vector.</p>
<p>Let’s use <code class="docutils literal notranslate"><span class="pre">slice</span></code> and <code class="docutils literal notranslate"><span class="pre">pull</span></code> to now extract the name of the country with the longest life expectancy:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">gapminder</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span>
<span class="w">    </span><span class="nf">arrange</span><span class="p">(</span><span class="nf">desc</span><span class="p">(</span><span class="n">lifeExp</span><span class="p">))</span><span class="w"> </span><span class="o">|&gt;</span>
<span class="w">    </span><span class="nf">slice</span><span class="p">(</span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="o">|&gt;</span>
<span class="w">    </span><span class="nf">pull</span><span class="p">(</span><span class="n">lifeExp</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">82.603</div></div>
</div>
<p>We just learned A LOT of new functions and operators:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">select</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">filter</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mutate</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arrange</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">desc</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">slice</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pull</span></code></p></li>
<li><p><code class="docutils literal notranslate"> <span class="pre">|&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%in%</span></code></p></li>
</ul>
<p>Trust that with practice (and you will get a lot of practice by completing the worksheet and lab homeworks) you will learn these. Also, when needed, you can refer to the data transformation cheat sheet: https://github.com/rstudio/cheatsheets/raw/main/data-transformation.pdf</p>
</section>
</section>
<section id="tidy-data">
<h2>Tidy data<a class="headerlink" href="#tidy-data" title="Permalink to this heading">#</a></h2>
<section id="shameless-borrowing-of-slides-from-jenny-bryan">
<h3>Shameless borrowing of slides from Jenny Bryan<a class="headerlink" href="#shameless-borrowing-of-slides-from-jenny-bryan" title="Permalink to this heading">#</a></h3>
<p>https://www.slideshare.net/Plotly/plotcon-nyc-behind-every-great-plot-theres-a-great-deal-of-wrangling</p>
<a class="reference internal image-reference" href="../_images/whisperer.png"><img alt="../_images/whisperer.png" src="../_images/whisperer.png" style="width: 500px;" /></a>
<a class="reference internal image-reference" href="../_images/on_balcony.png"><img alt="../_images/on_balcony.png" src="../_images/on_balcony.png" style="width: 500px;" /></a>
<a class="reference internal image-reference" href="../_images/tame.png"><img alt="../_images/tame.png" src="../_images/tame.png" style="width: 500px;" /></a>
</section>
<section id="how-should-you-wrangle-your-data">
<h3>How should you wrangle your data?<a class="headerlink" href="#how-should-you-wrangle-your-data" title="Permalink to this heading">#</a></h3>
</section>
<section id="we-make-it-tidy">
<h3>We make it “tidy”!<a class="headerlink" href="#we-make-it-tidy" title="Permalink to this heading">#</a></h3>
</section>
<section id="what-is-tidy-data">
<h3>What is tidy data?<a class="headerlink" href="#what-is-tidy-data" title="Permalink to this heading">#</a></h3>
<p>A tidy data is one that is satified by these three criteria:</p>
<ul class="simple">
<li><p>each row is a single observation,</p></li>
<li><p>each variable is a single column, and</p></li>
<li><p>each value is a single cell (i.e., its row, column position in the data frame is not shared with another value)</p></li>
</ul>
<p><img alt="" src="https://d33wubrfki0l68.cloudfront.net/6f1ddb544fc5c69a2478e444ab8112fb0eea23f8/91adc/images/tidy-1.png" /></p>
<p>What is a variable and an observation may depend on your immediate goal.</p>
<p><em>Source: <a class="reference external" href="https://r4ds.had.co.nz/">R for Data Science</a> by Garrett Grolemund &amp; Hadley Wickham</em></p>
</section>
<section id="a-tale-of-4-data-tables">
<h3>A tale of 4 data tables…<a class="headerlink" href="#a-tale-of-4-data-tables" title="Permalink to this heading">#</a></h3>
<p>…here is the same data represented in 4 different ways, let’s vote on which are tidy</p>
<p><em>Example source: https://garrettgman.github.io/tidying/</em></p>
<p>Statistical question: What variables are associated with the number of TB cases?</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>country</p></th>
<th class="head"><p>year</p></th>
<th class="head"><p>cases_per_capita</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Afghanistan</p></td>
<td><p>1999</p></td>
<td><p>745/19987071</p></td>
</tr>
<tr class="row-odd"><td><p>Afghanistan</p></td>
<td><p>2000</p></td>
<td><p>2666/20595360</p></td>
</tr>
<tr class="row-even"><td><p>Brazil</p></td>
<td><p>1999</p></td>
<td><p>37737/172006362</p></td>
</tr>
<tr class="row-odd"><td><p>Brazil</p></td>
<td><p>2000</p></td>
<td><p>80488/174504898</p></td>
</tr>
<tr class="row-even"><td><p>China</p></td>
<td><p>1999</p></td>
<td><p>212258/1272915272</p></td>
</tr>
<tr class="row-odd"><td><p>China</p></td>
<td><p>2000</p></td>
<td><p>213766/1280428583</p></td>
</tr>
</tbody>
</table>
<p>Statistical question: What variables are associated with the number of TB cases?</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>country</p></th>
<th class="head"><p>cases (year=1999)</p></th>
<th class="head"><p>cases (year=2000)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Afghanistan</p></td>
<td><p>745</p></td>
<td><p>2666</p></td>
</tr>
<tr class="row-odd"><td><p>Brazil</p></td>
<td><p>37737</p></td>
<td><p>80488</p></td>
</tr>
<tr class="row-even"><td><p>China</p></td>
<td><p>212258</p></td>
<td><p>213766</p></td>
</tr>
</tbody>
</table>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>country</p></th>
<th class="head"><p>population (year=1999)</p></th>
<th class="head"><p>population (year=2000)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Afghanistan</p></td>
<td><p>19987071</p></td>
<td><p>20595360</p></td>
</tr>
<tr class="row-odd"><td><p>Brazil</p></td>
<td><p>172006362</p></td>
<td><p>174504898</p></td>
</tr>
<tr class="row-even"><td><p>China</p></td>
<td><p>1272915272</p></td>
<td><p>1280428583</p></td>
</tr>
</tbody>
</table>
<p>Statistical question: What variables are associated with the number of TB cases?</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>country</p></th>
<th class="head"><p>year</p></th>
<th class="head"><p>cases</p></th>
<th class="head"><p>population</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Afghanistan</p></td>
<td><p>1999</p></td>
<td><p>745</p></td>
<td><p>19987071</p></td>
</tr>
<tr class="row-odd"><td><p>Afghanistan</p></td>
<td><p>2000</p></td>
<td><p>2666</p></td>
<td><p>20595360</p></td>
</tr>
<tr class="row-even"><td><p>Brazil</p></td>
<td><p>1999</p></td>
<td><p>37737</p></td>
<td><p>172006362</p></td>
</tr>
<tr class="row-odd"><td><p>Brazil</p></td>
<td><p>2000</p></td>
<td><p>80488</p></td>
<td><p>174504898</p></td>
</tr>
<tr class="row-even"><td><p>China</p></td>
<td><p>1999</p></td>
<td><p>212258</p></td>
<td><p>1272915272</p></td>
</tr>
<tr class="row-odd"><td><p>China</p></td>
<td><p>2000</p></td>
<td><p>213766</p></td>
<td><p>1280428583</p></td>
</tr>
</tbody>
</table>
<p>Statistical question: What variables are associated with the number of TB cases?</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>country</p></th>
<th class="head"><p>year</p></th>
<th class="head"><p>key</p></th>
<th class="head"><p>value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Afghanistan</p></td>
<td><p>1999</p></td>
<td><p>cases</p></td>
<td><p>745</p></td>
</tr>
<tr class="row-odd"><td><p>Afghanistan</p></td>
<td><p>1999</p></td>
<td><p>population</p></td>
<td><p>19987071</p></td>
</tr>
<tr class="row-even"><td><p>Afghanistan</p></td>
<td><p>2000</p></td>
<td><p>cases</p></td>
<td><p>2666</p></td>
</tr>
<tr class="row-odd"><td><p>Afghanistan</p></td>
<td><p>2000</p></td>
<td><p>population</p></td>
<td><p>20595360</p></td>
</tr>
<tr class="row-even"><td><p>Brazil</p></td>
<td><p>1999</p></td>
<td><p>cases</p></td>
<td><p>37737</p></td>
</tr>
<tr class="row-odd"><td><p>Brazil</p></td>
<td><p>1999</p></td>
<td><p>population</p></td>
<td><p>172006362</p></td>
</tr>
<tr class="row-even"><td><p>Brazil</p></td>
<td><p>2000</p></td>
<td><p>cases</p></td>
<td><p>80488</p></td>
</tr>
<tr class="row-odd"><td><p>Brazil</p></td>
<td><p>2000</p></td>
<td><p>population</p></td>
<td><p>174504898</p></td>
</tr>
<tr class="row-even"><td><p>China</p></td>
<td><p>1999</p></td>
<td><p>cases</p></td>
<td><p>212258</p></td>
</tr>
<tr class="row-odd"><td><p>China</p></td>
<td><p>1999</p></td>
<td><p>population</p></td>
<td><p>1272915272</p></td>
</tr>
<tr class="row-even"><td><p>China</p></td>
<td><p>2000</p></td>
<td><p>cases</p></td>
<td><p>213766</p></td>
</tr>
<tr class="row-odd"><td><p>China</p></td>
<td><p>2000</p></td>
<td><p>population</p></td>
<td><p>1280428583</p></td>
</tr>
</tbody>
</table>
</section>
<section id="pivoting-longer">
<h3>Pivoting longer<a class="headerlink" href="#pivoting-longer" title="Permalink to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">pivot_longer</span></code> from the {tidyr} package takes a wide data frame and making it longer! {tidyr} is another package in the {tidyverse} metapackage.</p>
<p><img alt=" " src="https://github.com/apreshill/teachthat/blob/master/pivot/pivot_longer_smaller.gif?raw=true" /></p>
<p><em>Source: April Hill’s <a class="reference external" href="https://github.com/apreshill/teachthat/">teachthat</a> GitHub repository</em></p>
<p>Consider the data frame below and that we are interested in finding what variables are associated with the number of TB cases?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">table4a</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 3 × 3</caption>
<thead>
	<tr><th scope=col>country</th><th scope=col>1999</th><th scope=col>2000</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Afghanistan</td><td>   745</td><td>  2666</td></tr>
	<tr><td>Brazil     </td><td> 37737</td><td> 80488</td></tr>
	<tr><td>China      </td><td>212258</td><td>213766</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>This is currently difficult as the values for the variable year are stuck in column names. We can use the <code class="docutils literal notranslate"><span class="pre">pivot_longer</span></code> function to tidy this data:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">table4a</span><span class="w"> </span><span class="o">|&gt;</span>
<span class="w">    </span><span class="nf">pivot_longer</span><span class="p">(</span><span class="n">`1999`</span><span class="o">:</span><span class="n">`2000`</span><span class="p">,</span><span class="w"> </span><span class="n">names_to</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;year&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">values_to</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;cases&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 6 × 3</caption>
<thead>
	<tr><th scope=col>country</th><th scope=col>year</th><th scope=col>cases</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Afghanistan</td><td>1999</td><td>   745</td></tr>
	<tr><td>Afghanistan</td><td>2000</td><td>  2666</td></tr>
	<tr><td>Brazil     </td><td>1999</td><td> 37737</td></tr>
	<tr><td>Brazil     </td><td>2000</td><td> 80488</td></tr>
	<tr><td>China      </td><td>1999</td><td>212258</td></tr>
	<tr><td>China      </td><td>2000</td><td>213766</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># or a less verbose and efficient way to specify this:</span>
<span class="n">table4a</span><span class="w"> </span><span class="o">|&gt;</span>
<span class="w">    </span><span class="nf">pivot_longer</span><span class="p">(</span><span class="o">-</span><span class="n">country</span><span class="p">,</span><span class="w"> </span><span class="n">names_to</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;year&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">values_to</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;cases&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 6 × 3</caption>
<thead>
	<tr><th scope=col>country</th><th scope=col>year</th><th scope=col>cases</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Afghanistan</td><td>1999</td><td>   745</td></tr>
	<tr><td>Afghanistan</td><td>2000</td><td>  2666</td></tr>
	<tr><td>Brazil     </td><td>1999</td><td> 37737</td></tr>
	<tr><td>Brazil     </td><td>2000</td><td> 80488</td></tr>
	<tr><td>China      </td><td>1999</td><td>212258</td></tr>
	<tr><td>China      </td><td>2000</td><td>213766</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>To use <code class="docutils literal notranslate"><span class="pre">pivot_longer</span></code> we need to specify:</p>
<ol class="arabic simple">
<li><p>the dataset</p></li>
<li><p>The columns we want to apply our pivot operation to (we use <code class="docutils literal notranslate"><span class="pre">select</span></code>-like syntax for this, and if you want to operate on all columns in a data frame, you can provide the function <code class="docutils literal notranslate"><span class="pre">everything()</span></code> here.</p></li>
<li><p>the name of a new column that will be created, whose values will come from the names of the columns that we want to combine (the result argument)</p></li>
<li><p>the name of a new column that will be created, whose values will come from the values of the columns we want to combine (the value argument)</p></li>
</ol>
</section>
<section id="pivoting-wider">
<h3>Pivoting wider<a class="headerlink" href="#pivoting-wider" title="Permalink to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">pivot_wider</span></code> from the {tidyr} package takes a narrow data frame and making it wider! It is the opposite of <code class="docutils literal notranslate"><span class="pre">pivot_longer</span></code>!</p>
<p>Consider the data frame below and that we are interested in finding what variables are associated with the number of TB cases?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">table2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 12 × 4</caption>
<thead>
	<tr><th scope=col>country</th><th scope=col>year</th><th scope=col>type</th><th scope=col>count</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Afghanistan</td><td>1999</td><td>cases     </td><td>     745</td></tr>
	<tr><td>Afghanistan</td><td>1999</td><td>population</td><td>19987071</td></tr>
	<tr><td>Afghanistan</td><td>2000</td><td>cases     </td><td>    2666</td></tr>
	<tr><td>Afghanistan</td><td>2000</td><td>population</td><td>20595360</td></tr>
	<tr><td>Brazil     </td><td>1999</td><td>cases     </td><td>   37737</td></tr>
	<tr><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td></tr>
	<tr><td>Brazil</td><td>2000</td><td>population</td><td> 174504898</td></tr>
	<tr><td>China </td><td>1999</td><td>cases     </td><td>    212258</td></tr>
	<tr><td>China </td><td>1999</td><td>population</td><td>1272915272</td></tr>
	<tr><td>China </td><td>2000</td><td>cases     </td><td>    213766</td></tr>
	<tr><td>China </td><td>2000</td><td>population</td><td>1280428583</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>This is currently difficult as observation is scattered across multiple rows. We can tidy this data frame with the function <code class="docutils literal notranslate"><span class="pre">pivot_wider</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">table2</span><span class="w"> </span><span class="o">|&gt;</span>
<span class="w">    </span><span class="nf">pivot_wider</span><span class="p">(</span><span class="n">names_from</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="n">values_from</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">count</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 6 × 4</caption>
<thead>
	<tr><th scope=col>country</th><th scope=col>year</th><th scope=col>cases</th><th scope=col>population</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Afghanistan</td><td>1999</td><td>   745</td><td>  19987071</td></tr>
	<tr><td>Afghanistan</td><td>2000</td><td>  2666</td><td>  20595360</td></tr>
	<tr><td>Brazil     </td><td>1999</td><td> 37737</td><td> 172006362</td></tr>
	<tr><td>Brazil     </td><td>2000</td><td> 80488</td><td> 174504898</td></tr>
	<tr><td>China      </td><td>1999</td><td>212258</td><td>1272915272</td></tr>
	<tr><td>China      </td><td>2000</td><td>213766</td><td>1280428583</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>To use <code class="docutils literal notranslate"><span class="pre">pivot_wider</span></code> we need to specify:</p>
<ol class="arabic simple">
<li><p>the dataset</p></li>
<li><p>the name of the column whose values we would like to use as column names when we widen the data</p></li>
<li><p>the name of the column whose values you would like to spread into separate columns based on the value they had in the column specified as the key</p></li>
</ol>
<p><img alt="" src="../_images/tidyverse.png" /></p>
<p>https://www.tidyverse.org/</p>
</section>
<section id="the-tidy-tools-manifesto">
<h3>The tidy tools manifesto<a class="headerlink" href="#the-tidy-tools-manifesto" title="Permalink to this heading">#</a></h3>
<p>“<em>The goal of these principles is to provide a uniform interface so that tidyverse packages work together naturally, and once you’ve mastered one, you have a head start on mastering the others.</em>”</p>
<p>https://cran.r-project.org/web/packages/tidyverse/vignettes/manifesto.html</p>
</section>
<section id="id1">
<h3>The tidy tools manifesto<a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h3>
<p>There are four basic principles to a tidy API:</p>
<ol class="arabic simple">
<li><p>Reuse existing data structures.</p></li>
<li><p>Compose simple functions with the pipe (<code class="docutils literal notranslate"><span class="pre">|&gt;</span></code>).</p></li>
<li><p>Embrace functional programming.</p></li>
<li><p>Design for humans.</p></li>
</ol>
</section>
<section id="reuse-existing-data-structures">
<h3>Reuse existing data structures.<a class="headerlink" href="#reuse-existing-data-structures" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>Where possible, re-use existing data structures, rather than creating custom data structures for your own package</p></li>
<li><p>When it is not possible to use an existing data structure, use S3 class (simplest OO system in R) built on top of an atomic vector or list</p></li>
<li><p>When working on data.frames/tibbles, assume the data is tidy</p></li>
</ul>
</section>
<section id="compose-simple-functions-with-the-pipe">
<h3>Compose simple functions with the pipe (|&gt;)<a class="headerlink" href="#compose-simple-functions-with-the-pipe" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>A powerful strategy for solving complex problems is to combine many simple pieces. Each piece should be easily understood in isolation, and have a standard way to combine with other pieces.</p></li>
<li><p>In R, this strategy plays out by composing single functions with the pipe, <code class="docutils literal notranslate"><span class="pre">|&gt;</span></code>.</p></li>
<li><p>The pipe is a common composition tool that works across all packages.</p></li>
</ul>
</section>
<section id="embrace-functional-programming">
<h3>Embrace functional programming<a class="headerlink" href="#embrace-functional-programming" title="Permalink to this heading">#</a></h3>
<p>R is a functional programming language; embrace it, don’t fight it. If you’re familiar with an object-oriented language like Python or C#, this is going to take some adjustment. But in the long run you will be much better off working with the language rather than fighting it.</p>
<p>Generally, this means you should favour:</p>
<ul class="simple">
<li><p>Immutable objects and copy-on-modify semantics. This makes your code easier to reason about.</p></li>
<li><p>The generic functions provided by S3 and S4. These work very naturally inside a pipe. If you do need mutable state, try to make it an internal implementation detail, rather than exposing it to the user.</p></li>
<li><p>Tools that abstract over for-loops, like the <code class="docutils literal notranslate"><span class="pre">apply</span></code> family of functions or the map functions in <code class="docutils literal notranslate"><span class="pre">purrr</span></code>.</p></li>
</ul>
</section>
<section id="design-for-humans">
<h3>Design for humans<a class="headerlink" href="#design-for-humans" title="Permalink to this heading">#</a></h3>
<p>Design your API primarily so that it is easy to use by humans. Computer efficiency is a secondary concern because the bottleneck in most data analysis is thinking time, not computing time.</p>
<ul class="simple">
<li><p>Invest time in naming your functions. Evocative function names make your API easier to use and remember.</p></li>
<li><p>Favour explicit, lengthy names, over short, implicit, names. Save the shortest names for the most important operations.</p></li>
<li><p>Think about how autocomplete can also make an API that’s easy to write. Make sure that function families are identified by a common prefix, not a common suffix. This makes autocomplete more helpful, as you can jog your memory with the prompts. For smaller packages, this may mean that every function has a common prefix (e.g. stringr, xml2, rvest).</p></li>
</ul>
</section>
</section>
<section id="what-did-we-learn-today">
<h2>What did we learn today?<a class="headerlink" href="#what-did-we-learn-today" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>How to read and write data using R</p></li>
<li><p>Single table functions from {dplyr} to manipulate data frames</p></li>
<li><p>A new operator, the pipe <code class="docutils literal notranslate"><span class="pre">|&gt;</span></code> for combining function calls</p></li>
<li><p>What tidy data is, and how to use the {tidyr} functions to get our data tidy</p></li>
<li><p><em>That R is awesome for manipulating data!</em></p></li>
</ul>
</section>
<section id="attributions">
<h2>Attributions<a class="headerlink" href="#attributions" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>MUCH of these notes were derived from <a class="reference external" href="https://stat545.com/">Stat 545</a> created by Jenny Bryan</p></li>
<li><p><a class="reference external" href="https://r4ds.had.co.nz/index.html">R for Data Science</a> by Garrett Grolemund &amp; Hadley Wickham</p></li>
</ul>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "r"
        },
        kernelOptions: {
            name: "ir",
            path: "./lecture-notes"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'ir'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="../README.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">DSCI 523: Programming for Data Manipulation</p>
      </div>
    </a>
    <a class="right-next"
       href="02-data-types-and-operators.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Lecture 2 -  Key datatypes &amp; operators in R</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#learning-objectives">Learning objectives</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#first-a-bit-of-history-about-r">First, a bit of history about R</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#loading-importing-data">Loading/importing data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-four-most-common-ways-to-do-this-in-data-science">The four most common ways to do this in Data Science</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#reading-spreadsheet-like-data-into-r">Reading spreadsheet-like data into R</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#workflow-for-reading-in-spreadsheet-like-data">Workflow for reading in spreadsheet-like data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-simplest-case-a-comma-separated-value-file">The simplest case: a comma separated value file</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#skipping-rows-when-reading-in-data">Skipping rows when reading in data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#read-delim-as-a-more-flexible-method-to-get-data-into-r"><code class="docutils literal notranslate"><span class="pre">read_delim</span></code> as a more flexible method to get data into R</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#reading-tabular-data-directly-from-a-url">Reading tabular data directly from a URL</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#reading-data-from-an-microsoft-excel-file">Reading data from an Microsoft Excel file</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#reading-a-microsoft-excel-file-from-the-web">Reading a Microsoft Excel file from the web</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#note-about-loading-data">Note about loading data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#writing-files-from-r-to-a-csv-file">Writing files from R to a <code class="docutils literal notranslate"><span class="pre">.csv</span></code> file</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cleaning-up-column-names">Cleaning up column names</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cleaning-up-a-lot-of-column-names">Cleaning up a lot of column names</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#single-data-frame-manipulations">Single data frame manipulations</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#use-select-to-subset-columns">Use <code class="docutils literal notranslate"><span class="pre">select</span></code> to subset columns</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#use-filter-to-subset-rows-that-meet-a-specific-condition">Use <code class="docutils literal notranslate"><span class="pre">filter</span></code> to subset rows that meet a specific condition</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#combining-functions-with-the-pipe-operator">Combining functions with the pipe <code class="docutils literal notranslate"><span class="pre">|&gt;</span></code> operator</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pro-tip-for-creating-objects-using-the-pipe">Pro-tip for creating objects using the pipe</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#use-mutate-to-add-new-variables">Use <code class="docutils literal notranslate"><span class="pre">mutate</span></code> to add new variables</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#use-arrange-to-sort-a-data-frame">Use <code class="docutils literal notranslate"><span class="pre">arrange</span></code> to sort a data frame</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-a-single-value-from-a-data-frame">Getting a single value from a data frame</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tidy-data">Tidy data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#shameless-borrowing-of-slides-from-jenny-bryan">Shameless borrowing of slides from Jenny Bryan</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-should-you-wrangle-your-data">How should you wrangle your data?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#we-make-it-tidy">We make it “tidy”!</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#what-is-tidy-data">What is tidy data?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-tale-of-4-data-tables">A tale of 4 data tables…</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pivoting-longer">Pivoting longer</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pivoting-wider">Pivoting wider</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-tidy-tools-manifesto">The tidy tools manifesto</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">The tidy tools manifesto</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#reuse-existing-data-structures">Reuse existing data structures.</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#compose-simple-functions-with-the-pipe">Compose simple functions with the pipe (|&gt;)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#embrace-functional-programming">Embrace functional programming</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#design-for-humans">Design for humans</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-did-we-learn-today">What did we learn today?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#attributions">Attributions</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By The Jupyter Book community
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=ac02cc09edc035673794"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=ac02cc09edc035673794"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>