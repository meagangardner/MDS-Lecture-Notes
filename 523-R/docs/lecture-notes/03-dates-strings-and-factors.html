

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Lecture 3 - dates &amp; times, strings, as well as factors &#8212; DSCI 523 Programming for Data Manipulation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=ac02cc09edc035673794" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=ac02cc09edc035673794" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=ac02cc09edc035673794" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=ac02cc09edc035673794" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=ac02cc09edc035673794" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=ac02cc09edc035673794" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=ac02cc09edc035673794"></script>

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'lecture-notes/03-dates-strings-and-factors';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Lecture 4 - Combining data frames (binds and joins) &amp; base R control flow" href="04-two-table-joins-and-base-control-flow.html" />
    <link rel="prev" title="Lecture 2 - Key datatypes &amp; operators in R" href="02-data-types-and-operators.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../README.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/hex_sticker_small.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/hex_sticker_small.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../README.html">
                    DSCI 523: Programming for Data Manipulation
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Lectures</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="01-intro-to-r-via-tidyverse.html">Lecture 1 -  Introduction to R via the tidyverse</a></li>
<li class="toctree-l1"><a class="reference internal" href="02-data-types-and-operators.html">Lecture 2 -  Key datatypes &amp; operators in R</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Lecture 3 -  dates &amp; times, strings,  as well as factors</a></li>
<li class="toctree-l1"><a class="reference internal" href="04-two-table-joins-and-base-control-flow.html">Lecture 4 -  Combining data frames (binds and joins) &amp; base R control flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="05-tidy-control-flow.html">Lecture 5 -  Tidy control flow in R</a></li>
<li class="toctree-l1"><a class="reference internal" href="06-lecture-functions-and-testing.html">Lecture 6: Functions and testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="07-mapping-and-nested-data-frames.html">Lecture 7: Mapping and nested data frames</a></li>
<li class="toctree-l1"><a class="reference internal" href="08-lecture-tidy-evaluation.html">Lecture 8: Tidy evaluation</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.ubc.ca/mds-2023-24/DSCI_523_r-prog_students" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.ubc.ca/mds-2023-24/DSCI_523_r-prog_students/issues/new?title=Issue%20on%20page%20%2Flecture-notes/03-dates-strings-and-factors.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/lecture-notes/03-dates-strings-and-factors.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Lecture 3 -  dates & times, strings,  as well as factors</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lecture-learning-objectives">Lecture learning objectives:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tibbles-versus-data-frames">Tibbles versus data frames</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dates-and-times">Dates and times</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#working-with-dates-and-times">Working with dates and times</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#get-your-hands-on-some-dates-or-date-times">Get your hands on some dates or date-times</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#get-date-or-date-time-from-character">Get date or date-time from character</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#build-date-or-date-time-from-parts">Build date or date-time from parts</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-components-from-a-date-or-date-time">Getting components from a date or date-time</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#more-date-and-time-wrangling-possibilities">More date and time wrangling possibilities:</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#string-manipulations">String manipulations</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-recommended-tools">The recommended tools:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#regex-free-string-manipulation-with-stringr-and-tidyr">Regex-free string manipulation with stringr and tidyr</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#detect-or-filter-on-a-target-string">Detect or filter on a target string</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#string-splitting-by-delimiter">String splitting by delimiter</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#substring-extraction-and-replacement-by-position">Substring extraction (and replacement) by position</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#collapse-a-vector">Collapse a vector</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-a-character-vector-by-catenating-multiple-vectors">Create a character vector by catenating multiple vectors</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#substring-replacement">Substring replacement</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#other-str-functions">Other <code class="docutils literal notranslate"><span class="pre">str_*</span></code> functions?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#regular-expressions-with-stringr">Regular expressions with stringr</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#examples-with-gapminder">Examples with gapminder</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#filtering-rows-with-str-detect">Filtering rows with <code class="docutils literal notranslate"><span class="pre">str_detect</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#extract-matches-optional">Extract matches (optional)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#capture-groups-optional">Capture groups (optional)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#summary-of-string-manipulation-functions-covered-so-far">Summary of string manipulation functions covered so far:</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#factors">Factors</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#be-the-boss-of-your-factors">Be the boss of your factors</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#tidyverse-philosophy-for-factors">Tidyverse philosophy for factors</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#factor-inspection">Factor inspection</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dropping-unused-levels">Dropping unused levels</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#change-order-of-the-levels-principled">Change order of the levels, principled</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#order-one-variable-by-another">Order one variable by another</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#change-order-of-the-levels-because-i-said-so">Change order of the levels, “because I said so”</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#why-do-we-need-to-know-how-to-do-this">Why do we need to know how to do this?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-did-we-learn-today">What did we learn today?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#attributions">Attributions</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="lecture-3-dates-times-strings-as-well-as-factors">
<h1>Lecture 3 -  dates &amp; times, strings,  as well as factors<a class="headerlink" href="#lecture-3-dates-times-strings-as-well-as-factors" title="Permalink to this heading">#</a></h1>
<section id="lecture-learning-objectives">
<h2>Lecture learning objectives:<a class="headerlink" href="#lecture-learning-objectives" title="Permalink to this heading">#</a></h2>
<p>By the end of this lecture and worksheet 3, students should be able to:</p>
<ul class="simple">
<li><p>Manipulate dates and times using the {lubridate} package</p></li>
<li><p>Be able to modify strings in a data frame using regular expressions and the {stringr} package</p></li>
<li><p>Cast categorical columns in a data frame as factors when appropriate, and manipulate factor levels as needed in preparation for data visualisation and statistical analysis (using base R and {forcats} package functions)</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">gapminder</span><span class="p">)</span>
<span class="nf">options</span><span class="p">(</span><span class="n">repr.matrix.max.rows</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>── <span class=" -Color -Color-Bold">Attaching core tidyverse packages</span> ───────────────────────────────────────────── tidyverse 2.0.0 ──
<span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">dplyr    </span> 1.1.2     <span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">readr    </span> 2.1.4
<span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">forcats  </span> 1.0.0     <span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">stringr  </span> 1.5.0
<span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">ggplot2  </span> 3.4.3     <span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">tibble   </span> 3.2.1
<span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">lubridate</span> 1.9.2     <span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">tidyr    </span> 1.3.0
<span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">purrr    </span> 1.0.2     
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>── <span class=" -Color -Color-Bold">Conflicts</span> ─────────────────────────────────────────────────────────────── tidyverse_conflicts() ──
<span class=" -Color -Color-Red">✖</span> <span class=" -Color -Color-Blue">dplyr</span>::<span class=" -Color -Color-Green">filter()</span> masks <span class=" -Color -Color-Blue">stats</span>::filter()
<span class=" -Color -Color-Red">✖</span> <span class=" -Color -Color-Blue">dplyr</span>::<span class=" -Color -Color-Green">lag()</span>    masks <span class=" -Color -Color-Blue">stats</span>::lag()
<span class=" -Color -Color-Cyan">ℹ</span> Use the conflicted package (<span class=" -Color -Color-Blue">&lt;http://conflicted.r-lib.org/&gt;</span>) to force all conflicts to become errors
</pre></div>
</div>
</div>
</div>
</section>
<section id="tibbles-versus-data-frames">
<h2>Tibbles versus data frames<a class="headerlink" href="#tibbles-versus-data-frames" title="Permalink to this heading">#</a></h2>
<p>You have seen and heard me talk about data frames and tibbles in R, and sometimes I carelessly interchange the terms. Let’s take moment to discuss the difference between the two!</p>
<p>Tibbles are special data frames, with special/extra properties. The two important ones you will care about are:</p>
<ul class="simple">
<li><p>In RStudio, tibbles only output the first 10 rows</p></li>
</ul>
<ul class="simple">
<li><p>When you numerically subset a data frame to 1 column, you get a vector. However, when you numerically subset a tibble you still get a tibble back.</p></li>
</ul>
<p>When you create a data frame using base R functions, either via <code class="docutils literal notranslate"><span class="pre">data.frame</span></code> or one of the base R <code class="docutils literal notranslate"><span class="pre">read.*</span></code> functions, you get an objects whose class is data frame:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">example</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">data.frame</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="m">9</span><span class="p">),</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;z&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;t&quot;</span><span class="p">)</span>
<span class="n">example</span>

<span class="nf">class</span><span class="p">(</span><span class="n">example</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A data.frame: 3 × 4</caption>
<thead>
	<tr><th scope=col>a</th><th scope=col>b</th><th scope=col>X.a.</th><th scope=col>X.t.</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>z</td><td>a</td><td>t</td></tr>
	<tr><td>5</td><td>z</td><td>a</td><td>t</td></tr>
	<tr><td>9</td><td>z</td><td>a</td><td>t</td></tr>
</tbody>
</table>
</div><div class="output text_html">'data.frame'</div></div>
</div>
<p>Tibbles inherit from the data frame class (meaning that have many of the same properties as data frames), but they also have the extra properties I just discussed:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">example2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">tibble</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="m">9</span><span class="p">),</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;z&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;t&quot;</span><span class="p">)</span>
<span class="n">example</span>

<span class="nf">class</span><span class="p">(</span><span class="n">example2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A data.frame: 3 × 4</caption>
<thead>
	<tr><th scope=col>a</th><th scope=col>b</th><th scope=col>X.a.</th><th scope=col>X.t.</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>z</td><td>a</td><td>t</td></tr>
	<tr><td>5</td><td>z</td><td>a</td><td>t</td></tr>
	<tr><td>9</td><td>z</td><td>a</td><td>t</td></tr>
</tbody>
</table>
</div><div class="output text_html"><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'tbl_df'</li><li>'tbl'</li><li>'data.frame'</li></ol>
</div></div>
</div>
<p>Note: there are <strong>some</strong> tidyverse functions that will coerce a data frame to a tibble, because what the user is asking for is not possible with a data frame. One such example is <code class="docutils literal notranslate"><span class="pre">group_by</span></code> (which we will learn about next week):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">group_by</span><span class="p">(</span><span class="n">example</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">    </span><span class="nf">class</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'grouped_df'</li><li>'tbl_df'</li><li>'tbl'</li><li>'data.frame'</li></ol>
</div></div>
</div>
<p><strong>Rule of thumb:</strong>  if you want a tibble, it’s on you to know that and express that explicitly with <code class="docutils literal notranslate"><span class="pre">as_tibble()</span></code> (if it’s a data frame to start out with).</p>
</section>
<section id="dates-and-times">
<h2>Dates and times<a class="headerlink" href="#dates-and-times" title="Permalink to this heading">#</a></h2>
<a class="reference internal image-reference" href="https://d33wubrfki0l68.cloudfront.net/baa19d0ebf9b97949a7ad259b29a1c4ae031c8e2/8e9b8/diagrams/vectors/summary-tree-s3-1.png"><img alt="https://d33wubrfki0l68.cloudfront.net/baa19d0ebf9b97949a7ad259b29a1c4ae031c8e2/8e9b8/diagrams/vectors/summary-tree-s3-1.png" src="https://d33wubrfki0l68.cloudfront.net/baa19d0ebf9b97949a7ad259b29a1c4ae031c8e2/8e9b8/diagrams/vectors/summary-tree-s3-1.png" style="width: 300px;" /></a>
<p><em>Source: <a class="reference external" href="https://adv-r.hadley.nz/">Advanced R</a> by Hadley Wickham</em></p>
<section id="working-with-dates-and-times">
<h3>Working with dates and times<a class="headerlink" href="#working-with-dates-and-times" title="Permalink to this heading">#</a></h3>
<p>Your weapon: The lubridate package (CRAN; <a class="reference external" href="https://github.com/tidyverse/lubridate">GitHub</a>; <a class="reference external" href="https://cran.r-project.org/web/packages/lubridate/vignettes/lubridate.html">main vignette</a>).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">lubridate</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="get-your-hands-on-some-dates-or-date-times">
<h3>Get your hands on some dates or date-times<a class="headerlink" href="#get-your-hands-on-some-dates-or-date-times" title="Permalink to this heading">#</a></h3>
<p>Use <code class="docutils literal notranslate"><span class="pre">lubridate</span></code>’s <code class="docutils literal notranslate"><span class="pre">today</span></code> to get today’s date, without any time:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">today</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><time datetime="2024-08-27">2024-08-27</time></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">class</span><span class="p">(</span><span class="nf">today</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">'Date'</div></div>
</div>
<p>Use <code class="docutils literal notranslate"><span class="pre">lubridate</span></code>’s <code class="docutils literal notranslate"><span class="pre">now</span></code> to get RIGHT NOW, meaning the date and the time:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">now</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1] &quot;2024-08-27 15:05:15 PDT&quot;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">class</span><span class="p">(</span><span class="nf">now</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'POSIXct'</li><li>'POSIXt'</li></ol>
</div></div>
</div>
</section>
<section id="get-date-or-date-time-from-character">
<h3>Get date or date-time from character<a class="headerlink" href="#get-date-or-date-time-from-character" title="Permalink to this heading">#</a></h3>
<p>Use the <code class="docutils literal notranslate"><span class="pre">lubridate</span></code> helpers to convert character or unquoted numbers into dates or date-times:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ymd</span><span class="p">(</span><span class="s">&quot;2017-01-31&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><time datetime="2017-01-31">2017-01-31</time></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">mdy</span><span class="p">(</span><span class="s">&quot;January 31st, 2017&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><time datetime="2017-01-31">2017-01-31</time></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">dmy</span><span class="p">(</span><span class="s">&quot;31-Jan-2017&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><time datetime="2017-01-31">2017-01-31</time></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ymd</span><span class="p">(</span><span class="m">20170131</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><time datetime="2017-01-31">2017-01-31</time></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ymd_hms</span><span class="p">(</span><span class="s">&quot;2017-01-31 20:11:59&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1] &quot;2017-01-31 20:11:59 UTC&quot;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">mdy_hm</span><span class="p">(</span><span class="s">&quot;01/31/2017 08:01&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1] &quot;2017-01-31 08:01:00 UTC&quot;
</pre></div>
</div>
</div>
</div>
<p>You can also force the creation of a date-time from a date by supplying a timezone:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">class</span><span class="p">(</span><span class="nf">ymd</span><span class="p">(</span><span class="m">20170131</span><span class="p">,</span><span class="w"> </span><span class="n">tz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;UTC&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'POSIXct'</li><li>'POSIXt'</li></ol>
</div></div>
</div>
</section>
<section id="build-date-or-date-time-from-parts">
<h3>Build date or date-time from parts<a class="headerlink" href="#build-date-or-date-time-from-parts" title="Permalink to this heading">#</a></h3>
<p>Instead of a single string, sometimes you’ll have the individual components of the date-time spread across multiple columns.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">dates</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">tibble</span><span class="p">(</span><span class="n">year</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">2015</span><span class="p">,</span><span class="w"> </span><span class="m">2016</span><span class="p">,</span><span class="w"> </span><span class="m">2017</span><span class="p">,</span><span class="w"> </span><span class="m">2018</span><span class="p">,</span><span class="w"> </span><span class="m">2019</span><span class="p">),</span>
<span class="w">               </span><span class="n">month</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">9</span><span class="p">,</span><span class="w"> </span><span class="m">9</span><span class="p">,</span><span class="w"> </span><span class="m">9</span><span class="p">,</span><span class="w"> </span><span class="m">9</span><span class="p">,</span><span class="w"> </span><span class="m">9</span><span class="p">),</span>
<span class="w">               </span><span class="n">day</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">6</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">))</span>

<span class="n">dates</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 5 × 3</caption>
<thead>
	<tr><th scope=col>year</th><th scope=col>month</th><th scope=col>day</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>2015</td><td>9</td><td>3</td></tr>
	<tr><td>2016</td><td>9</td><td>4</td></tr>
	<tr><td>2017</td><td>9</td><td>2</td></tr>
	<tr><td>2018</td><td>9</td><td>6</td></tr>
	<tr><td>2019</td><td>9</td><td>3</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>To create a date/time from this sort of input, use <code class="docutils literal notranslate"><span class="pre">make_date</span></code> for dates, or <code class="docutils literal notranslate"><span class="pre">make_datetime</span></code> for date-times:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># make a single date from year, month and day</span>
<span class="n">dates</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">    </span><span class="nf">mutate</span><span class="p">(</span><span class="n">date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">make_date</span><span class="p">(</span><span class="n">year</span><span class="p">,</span><span class="w"> </span><span class="n">month</span><span class="p">,</span><span class="w"> </span><span class="n">day</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 5 × 4</caption>
<thead>
	<tr><th scope=col>year</th><th scope=col>month</th><th scope=col>day</th><th scope=col>date</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;date&gt;</th></tr>
</thead>
<tbody>
	<tr><td>2015</td><td>9</td><td>3</td><td>2015-09-03</td></tr>
	<tr><td>2016</td><td>9</td><td>4</td><td>2016-09-04</td></tr>
	<tr><td>2017</td><td>9</td><td>2</td><td>2017-09-02</td></tr>
	<tr><td>2018</td><td>9</td><td>6</td><td>2018-09-06</td></tr>
	<tr><td>2019</td><td>9</td><td>3</td><td>2019-09-03</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="getting-components-from-a-date-or-date-time">
<h3>Getting components from a date or date-time<a class="headerlink" href="#getting-components-from-a-date-or-date-time" title="Permalink to this heading">#</a></h3>
<p>Sometimes you have the date or date-time and you want to extract a component, such as year or day.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">datetime</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">ymd_hms</span><span class="p">(</span><span class="s">&quot;2016-07-08 12:34:56&quot;</span><span class="p">)</span>
<span class="n">datetime</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1] &quot;2016-07-08 12:34:56 UTC&quot;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">year</span><span class="p">(</span><span class="n">datetime</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">2016</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">month</span><span class="p">(</span><span class="n">datetime</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">7</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">mday</span><span class="p">(</span><span class="n">datetime</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">8</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">yday</span><span class="p">(</span><span class="n">datetime</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">190</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">wday</span><span class="p">(</span><span class="n">datetime</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">abbr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">Friday
<details>
	<summary style=display:list-item;cursor:pointer>
		<strong>Levels</strong>:
	</summary>
	<style>
	.list-inline {list-style: none; margin:0; padding: 0}
	.list-inline>li {display: inline-block}
	.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
	</style>
	<ol class=list-inline><li>'Sunday'</li><li>'Monday'</li><li>'Tuesday'</li><li>'Wednesday'</li><li>'Thursday'</li><li>'Friday'</li><li>'Saturday'</li></ol>
</details></div></div>
</div>
<p>For <code class="docutils literal notranslate"><span class="pre">month</span></code> and <code class="docutils literal notranslate"><span class="pre">wday</span></code> you can set <code class="docutils literal notranslate"><span class="pre">label</span> <span class="pre">=</span> <span class="pre">TRUE</span></code> to return the abbreviated name of the month or day of the week. Set <code class="docutils literal notranslate"><span class="pre">abbr</span> <span class="pre">=</span> <span class="pre">FALSE</span></code> to return the full name.</p>
</section>
<section id="more-date-and-time-wrangling-possibilities">
<h3>More date and time wrangling possibilities:<a class="headerlink" href="#more-date-and-time-wrangling-possibilities" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://r4ds.had.co.nz/dates-and-times.html#time-spans">Tools for working with time spans</a>, to calculate durations, periods and intervals</p></li>
<li><p><a class="reference external" href="https://r4ds.had.co.nz/dates-and-times.html#time-zones">Tools for dealing with time zones</a></p></li>
</ul>
</section>
</section>
<section id="string-manipulations">
<h2>String manipulations<a class="headerlink" href="#string-manipulations" title="Permalink to this heading">#</a></h2>
<section id="the-recommended-tools">
<h3>The recommended tools:<a class="headerlink" href="#the-recommended-tools" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p><strong><a class="reference external" href="https://stringr.tidyverse.org/">stringr</a> package:</strong> A core package in the tidyverse. Main functions start with str_. Auto-complete is your friend. <a class="reference external" href="https://github.com/rstudio/cheatsheets/blob/master/strings.pdf"><code class="docutils literal notranslate"><span class="pre">stringr</span></code> cheatsheet</a></p></li>
<li><p><strong><a class="reference external" href="https://tidyr.tidyverse.org/">tidyr</a> package:</strong> Useful for functions that split one character vector into many and vice versa: <code class="docutils literal notranslate"><span class="pre">separate</span></code>, <code class="docutils literal notranslate"><span class="pre">unite</span></code>, <code class="docutils literal notranslate"><span class="pre">extract</span></code>. <a class="reference external" href="https://github.com/rstudio/cheatsheets/blob/master/data-import.pdf"><code class="docutils literal notranslate"><span class="pre">tidyr</span></code> cheatsheet</a></p></li>
<li><p><strong>Base functions:</strong> <code class="docutils literal notranslate"><span class="pre">nchar</span></code>, <code class="docutils literal notranslate"><span class="pre">strsplit</span></code>, <code class="docutils literal notranslate"><span class="pre">substr</span></code>, <code class="docutils literal notranslate"><span class="pre">paste</span></code>, and <code class="docutils literal notranslate"><span class="pre">paste0</span></code>.</p></li>
</ul>
</section>
<section id="regex-free-string-manipulation-with-stringr-and-tidyr">
<h3>Regex-free string manipulation with stringr and tidyr<a class="headerlink" href="#regex-free-string-manipulation-with-stringr-and-tidyr" title="Permalink to this heading">#</a></h3>
<p>Basic string manipulation tasks:</p>
<ul class="simple">
<li><p>Study a single character vector</p>
<ul>
<li><p>How long are the strings?</p></li>
<li><p>Presence/absence of a literal string</p></li>
</ul>
</li>
<li><p>Operate on a single character vector</p>
<ul>
<li><p>Keep/discard elements that contain a literal string</p></li>
<li><p>Split into two or more character vectors using a fixed delimiter</p></li>
<li><p>Snip out pieces of the strings based on character position</p></li>
<li><p>Collapse into a single string</p></li>
</ul>
</li>
<li><p>Operate on two or more character vectors</p>
<ul>
<li><p>Glue them together element-wise to get a new character vector.</p></li>
</ul>
</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">fruit</span></code>, <code class="docutils literal notranslate"><span class="pre">words</span></code>, and <code class="docutils literal notranslate"><span class="pre">sentences</span></code> are character vectors that ship with <code class="docutils literal notranslate"><span class="pre">stringr</span></code> for practicing.</p>
<p>NOTE - we will be working with vectors today. If you want to operate on data frames, you will need to use these functions inside of data frame/tibble functions, like <code class="docutils literal notranslate"><span class="pre">filter</span></code> and <code class="docutils literal notranslate"><span class="pre">mutate</span></code>.</p>
</section>
<section id="detect-or-filter-on-a-target-string">
<h3>Detect or filter on a target string<a class="headerlink" href="#detect-or-filter-on-a-target-string" title="Permalink to this heading">#</a></h3>
<p>Determine presence/absence of a literal string with <code class="docutils literal notranslate"><span class="pre">str_detect</span></code>. Spoiler: later we see <code class="docutils literal notranslate"><span class="pre">str_detect</span></code> also detects regular expressions.</p>
<p>Which fruits actually use the word “fruit”?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># detect &quot;fruit&quot;</span>
<span class="c1">#typeof(fruit)</span>
<span class="c1">#fruit</span>
<span class="nf">str_detect</span><span class="p">(</span><span class="n">fruit</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;fruit&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>TRUE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>TRUE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>TRUE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>TRUE</li><li>FALSE</li><li>FALSE</li><li>TRUE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>TRUE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>TRUE</li><li>FALSE</li><li>FALSE</li><li>FALSE</li><li>TRUE</li><li>FALSE</li></ol>
</div></div>
</div>
<p>What’s the easiest way to get the actual fruits that match? Use <code class="docutils literal notranslate"><span class="pre">str_subset</span></code> to keep only the matching elements. Note we are storing this new vector <code class="docutils literal notranslate"><span class="pre">my_fruit</span></code> to use in later examples!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># subset &quot;fruit&quot;</span>
<span class="n">my_fruit</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">str_subset</span><span class="p">(</span><span class="n">fruit</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;fruit&quot;</span><span class="p">)</span>
<span class="n">my_fruit</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'breadfruit'</li><li>'dragonfruit'</li><li>'grapefruit'</li><li>'jackfruit'</li><li>'kiwi fruit'</li><li>'passionfruit'</li><li>'star fruit'</li><li>'ugli fruit'</li></ol>
</div></div>
</div>
</section>
<section id="string-splitting-by-delimiter">
<h3>String splitting by delimiter<a class="headerlink" href="#string-splitting-by-delimiter" title="Permalink to this heading">#</a></h3>
<p>Use <code class="docutils literal notranslate"><span class="pre">stringr::str_split</span></code> to split strings on a delimiter.</p>
<p>Some of our fruits are compound words, like “grapefruit”, but some have two words, like “ugli fruit”. Here we split on a single space ” “, but show use of a regular expression later.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># split on &quot; &quot;</span>
<span class="nf">str_split</span><span class="p">(</span><span class="n">my_fruit</span><span class="p">,</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol>
	<li>'breadfruit'</li>
	<li>'dragonfruit'</li>
	<li>'grapefruit'</li>
	<li>'jackfruit'</li>
	<li><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'kiwi'</li><li>'fruit'</li></ol>
</li>
	<li>'passionfruit'</li>
	<li><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'star'</li><li>'fruit'</li></ol>
</li>
	<li><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'ugli'</li><li>'fruit'</li></ol>
</li>
</ol>
</div></div>
</div>
<p>It’s bummer that we get a list back. But it must be so! In full generality, split strings must return list, because who knows how many pieces there will be?</p>
<p>If you are willing to commit to the number of pieces, you can use <code class="docutils literal notranslate"><span class="pre">str_split_fixed</span></code> and get a character matrix. You’re welcome!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">str_split_fixed</span><span class="p">(</span><span class="n">my_fruit</span><span class="p">,</span><span class="w"> </span><span class="n">pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A matrix: 8 × 2 of type chr</caption>
<tbody>
	<tr><td>breadfruit  </td><td>     </td></tr>
	<tr><td>dragonfruit </td><td>     </td></tr>
	<tr><td>grapefruit  </td><td>     </td></tr>
	<tr><td>jackfruit   </td><td>     </td></tr>
	<tr><td>kiwi        </td><td>fruit</td></tr>
	<tr><td>passionfruit</td><td>     </td></tr>
	<tr><td>star        </td><td>fruit</td></tr>
	<tr><td>ugli        </td><td>fruit</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>If the to-be-split variable lives in a data frame, <code class="docutils literal notranslate"><span class="pre">tidyr::separate</span></code> will split it into 2 or more variables:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># separate on &quot; &quot;</span>
<span class="n">my_fruit</span><span class="p">[</span><span class="m">5</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s">&quot;yellow kiwi fruit&quot;</span>
<span class="n">my_fruit</span>
<span class="nf">tibble</span><span class="p">(</span><span class="n">unsplit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">my_fruit</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">    </span><span class="nf">separate</span><span class="p">(</span><span class="n">unsplit</span><span class="p">,</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;pre&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;post&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">sep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'breadfruit'</li><li>'dragonfruit'</li><li>'grapefruit'</li><li>'jackfruit'</li><li>'yellow kiwi fruit'</li><li>'passionfruit'</li><li>'star fruit'</li><li>'ugli fruit'</li></ol>
</div><div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Warning message:
“Expected 2 pieces. Additional pieces discarded in 1 rows [5].”
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Warning message:
“Expected 2 pieces. Missing pieces filled with `NA` in 5 rows [1, 2, 3, 4, 6].”
</pre></div>
</div>
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 8 × 2</caption>
<thead>
	<tr><th scope=col>pre</th><th scope=col>post</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th></tr>
</thead>
<tbody>
	<tr><td>breadfruit  </td><td>NA   </td></tr>
	<tr><td>dragonfruit </td><td>NA   </td></tr>
	<tr><td>grapefruit  </td><td>NA   </td></tr>
	<tr><td>jackfruit   </td><td>NA   </td></tr>
	<tr><td>yellow      </td><td>kiwi </td></tr>
	<tr><td>passionfruit</td><td>NA   </td></tr>
	<tr><td>star        </td><td>fruit</td></tr>
	<tr><td>ugli        </td><td>fruit</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="substring-extraction-and-replacement-by-position">
<h3>Substring extraction (and replacement) by position<a class="headerlink" href="#substring-extraction-and-replacement-by-position" title="Permalink to this heading">#</a></h3>
<p>Count characters in your strings with <code class="docutils literal notranslate"><span class="pre">str_length</span></code>. <em>Note this is different from the length of the character vector itself.</em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># get length of each string</span>
<span class="nf">str_length</span><span class="p">(</span><span class="n">my_fruit</span><span class="p">)</span>
<span class="n">my_fruit</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>10</li><li>11</li><li>10</li><li>9</li><li>17</li><li>12</li><li>10</li><li>10</li></ol>
</div><div class="output text_html"><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'breadfruit'</li><li>'dragonfruit'</li><li>'grapefruit'</li><li>'jackfruit'</li><li>'yellow kiwi fruit'</li><li>'passionfruit'</li><li>'star fruit'</li><li>'ugli fruit'</li></ol>
</div></div>
</div>
<p>You can snip out substrings based on character position with <code class="docutils literal notranslate"><span class="pre">str_sub</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># remove first three strings</span>
<span class="nf">str_sub</span><span class="p">(</span><span class="n">my_fruit</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'bre'</li><li>'dra'</li><li>'gra'</li><li>'jac'</li><li>'yel'</li><li>'pas'</li><li>'sta'</li><li>'ugl'</li></ol>
</div></div>
</div>
<p>Finally, <code class="docutils literal notranslate"><span class="pre">str_sub</span></code> also works for assignment, i.e. on the left hand side of <code class="docutils literal notranslate"><span class="pre">&lt;-</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># replace three characters with AAA</span>
<span class="nf">str_sub</span><span class="p">(</span><span class="n">my_fruit</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="w">  </span><span class="o">&lt;-</span><span class="w"> </span><span class="s">&quot;AAA&quot;</span>
<span class="n">my_fruit</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'AAAadfruit'</li><li>'AAAgonfruit'</li><li>'AAApefruit'</li><li>'AAAkfruit'</li><li>'AAAlow kiwi fruit'</li><li>'AAAsionfruit'</li><li>'AAAr fruit'</li><li>'AAAi fruit'</li></ol>
</div></div>
</div>
</section>
<section id="collapse-a-vector">
<h3>Collapse a vector<a class="headerlink" href="#collapse-a-vector" title="Permalink to this heading">#</a></h3>
<p>You can collapse a character vector of length n &gt; 1 to a single string with <code class="docutils literal notranslate"><span class="pre">str_c</span></code>, which also has other uses (see the next section).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># collapse a character vector into one </span>
<span class="nf">head</span><span class="p">(</span><span class="n">fruit</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">    </span><span class="nf">str_c</span><span class="p">(</span><span class="n">collapse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;-&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">'apple-apricot-avocado-banana-bell pepper-bilberry'</div></div>
</div>
</section>
<section id="create-a-character-vector-by-catenating-multiple-vectors">
<h3>Create a character vector by catenating multiple vectors<a class="headerlink" href="#create-a-character-vector-by-catenating-multiple-vectors" title="Permalink to this heading">#</a></h3>
<p>If you have two or more character vectors of the same length, you can glue them together element-wise, to get a new vector of that length. Here are some … awful smoothie flavors?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># concatenate character vectors</span>
<span class="n">fruit</span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">4</span><span class="p">]</span>
<span class="n">fruit</span><span class="p">[</span><span class="m">5</span><span class="o">:</span><span class="m">8</span><span class="p">]</span>
<span class="nf">str_c</span><span class="p">(</span><span class="n">fruit</span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">4</span><span class="p">],</span><span class="w"> </span><span class="n">fruit</span><span class="p">[</span><span class="m">5</span><span class="o">:</span><span class="m">8</span><span class="p">],</span><span class="w"> </span><span class="n">sep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'apple'</li><li>'apricot'</li><li>'avocado'</li><li>'banana'</li></ol>
</div><div class="output text_html"><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'bell pepper'</li><li>'bilberry'</li><li>'blackberry'</li><li>'blackcurrant'</li></ol>
</div><div class="output text_html"><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'applebell pepper'</li><li>'apricotbilberry'</li><li>'avocadoblackberry'</li><li>'bananablackcurrant'</li></ol>
</div></div>
</div>
<p>If the to-be-combined vectors are variables in a data frame, you can use <code class="docutils literal notranslate"><span class="pre">tidyr::unite</span></code> to make a single new variable from them.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># concatenate character vectors when they are in a data frame</span>
<span class="nf">tibble</span><span class="p">(</span><span class="n">fruit1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fruit</span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">4</span><span class="p">],</span>
<span class="w">      </span><span class="n">fruit2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fruit</span><span class="p">[</span><span class="m">5</span><span class="o">:</span><span class="m">8</span><span class="p">])</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">    </span><span class="nf">unite</span><span class="p">(</span><span class="s">&quot;flavour_combo&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">fruit1</span><span class="p">,</span><span class="w"> </span><span class="n">fruit2</span><span class="p">,</span><span class="w"> </span><span class="n">sep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot; &amp; &quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 4 × 1</caption>
<thead>
	<tr><th scope=col>flavour_combo</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th></tr>
</thead>
<tbody>
	<tr><td><span style=white-space:pre-wrap>apple &amp; bell pepper  </span></td></tr>
	<tr><td><span style=white-space:pre-wrap>apricot &amp; bilberry   </span></td></tr>
	<tr><td>avocado &amp; blackberry </td></tr>
	<tr><td>banana &amp; blackcurrant</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="substring-replacement">
<h3>Substring replacement<a class="headerlink" href="#substring-replacement" title="Permalink to this heading">#</a></h3>
<p>You can replace a pattern with <code class="docutils literal notranslate"><span class="pre">str_replace</span></code>. Here we use an explicit string-to-replace, but later we revisit with a regular expression.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># replace fruit with vegetable</span>
<span class="n">my_fruit</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">str_subset</span><span class="p">(</span><span class="n">fruit</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;fruit&quot;</span><span class="p">)</span>
<span class="n">my_fruit</span>
<span class="nf">str_replace</span><span class="p">(</span><span class="n">my_fruit</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;fruit&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;vegetable&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'breadfruit'</li><li>'dragonfruit'</li><li>'grapefruit'</li><li>'jackfruit'</li><li>'kiwi fruit'</li><li>'passionfruit'</li><li>'star fruit'</li><li>'ugli fruit'</li></ol>
</div><div class="output text_html"><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'breadvegetable'</li><li>'dragonvegetable'</li><li>'grapevegetable'</li><li>'jackvegetable'</li><li>'kiwi vegetable'</li><li>'passionvegetable'</li><li>'star vegetable'</li><li>'ugli vegetable'</li></ol>
</div></div>
</div>
<ul class="simple">
<li><p>A special case that comes up a lot is replacing <code class="docutils literal notranslate"><span class="pre">NA</span></code>, for which there is <code class="docutils literal notranslate"><span class="pre">str_replace_na</span></code>.</p></li>
<li><p>If the NA-afflicted variable lives in a data frame, you can use <code class="docutils literal notranslate"><span class="pre">tidyr::replace_na</span></code>.</p></li>
</ul>
</section>
<section id="other-str-functions">
<h3>Other <code class="docutils literal notranslate"><span class="pre">str_*</span></code> functions?<a class="headerlink" href="#other-str-functions" title="Permalink to this heading">#</a></h3>
<p>There are many many other useful <code class="docutils literal notranslate"><span class="pre">str_*</span></code> functions from the <code class="docutils literal notranslate"><span class="pre">stringr</span></code> package. Too many to go through them all here. If these shown in lecture aren’t what you need, then you should try <code class="docutils literal notranslate"><span class="pre">?str</span></code> + tab to see the possibilities:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="o">?</span><span class="n">str_</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="regular-expressions-with-stringr">
<h3>Regular expressions with stringr<a class="headerlink" href="#regular-expressions-with-stringr" title="Permalink to this heading">#</a></h3>
<p>or…</p>
<p><img alt="" src="https://stat545.com/img/regexbytrialanderror-big-smaller.png" /></p>
</section>
<section id="examples-with-gapminder">
<h3>Examples with gapminder<a class="headerlink" href="#examples-with-gapminder" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">gapminder</span><span class="p">)</span>
<span class="nf">head</span><span class="p">(</span><span class="n">gapminder</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 6 × 6</caption>
<thead>
	<tr><th scope=col>country</th><th scope=col>continent</th><th scope=col>year</th><th scope=col>lifeExp</th><th scope=col>pop</th><th scope=col>gdpPercap</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Afghanistan</td><td>Asia</td><td>1952</td><td>28.801</td><td> 8425333</td><td>779.4453</td></tr>
	<tr><td>Afghanistan</td><td>Asia</td><td>1957</td><td>30.332</td><td> 9240934</td><td>820.8530</td></tr>
	<tr><td>Afghanistan</td><td>Asia</td><td>1962</td><td>31.997</td><td>10267083</td><td>853.1007</td></tr>
	<tr><td>Afghanistan</td><td>Asia</td><td>1967</td><td>34.020</td><td>11537966</td><td>836.1971</td></tr>
	<tr><td>Afghanistan</td><td>Asia</td><td>1972</td><td>36.088</td><td>13079460</td><td>739.9811</td></tr>
	<tr><td>Afghanistan</td><td>Asia</td><td>1977</td><td>38.438</td><td>14880372</td><td>786.1134</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="filtering-rows-with-str-detect">
<h3>Filtering rows with <code class="docutils literal notranslate"><span class="pre">str_detect</span></code><a class="headerlink" href="#filtering-rows-with-str-detect" title="Permalink to this heading">#</a></h3>
<p>Let’s filter for rows where the country name starts with “AL”:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">gapminder</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># detect countries that start with &quot;AL&quot;</span>
<span class="n">gapminder</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">    </span><span class="nf">filter</span><span class="p">(</span><span class="nf">str_detect</span><span class="p">(</span><span class="n">country</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;^Al&quot;</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">    </span><span class="nf">pull</span><span class="p">(</span><span class="n">country</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">    </span><span class="nf">unique</span><span class="p">()</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">    </span><span class="nf">length</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">2</div></div>
</div>
<p>And now rows where the country ends in <code class="docutils literal notranslate"><span class="pre">tan</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># detect countries that end with &quot;tan&quot;</span>
<span class="n">gapminder</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">    </span><span class="nf">filter</span><span class="p">(</span><span class="nf">str_detect</span><span class="p">(</span><span class="n">country</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;tan$&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 24 × 6</caption>
<thead>
	<tr><th scope=col>country</th><th scope=col>continent</th><th scope=col>year</th><th scope=col>lifeExp</th><th scope=col>pop</th><th scope=col>gdpPercap</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Afghanistan</td><td>Asia</td><td>1952</td><td>28.801</td><td> 8425333</td><td>779.4453</td></tr>
	<tr><td>Afghanistan</td><td>Asia</td><td>1957</td><td>30.332</td><td> 9240934</td><td>820.8530</td></tr>
	<tr><td>Afghanistan</td><td>Asia</td><td>1962</td><td>31.997</td><td>10267083</td><td>853.1007</td></tr>
	<tr><td>Afghanistan</td><td>Asia</td><td>1967</td><td>34.020</td><td>11537966</td><td>836.1971</td></tr>
	<tr><td>Afghanistan</td><td>Asia</td><td>1972</td><td>36.088</td><td>13079460</td><td>739.9811</td></tr>
	<tr><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td></tr>
	<tr><td>Pakistan</td><td>Asia</td><td>1987</td><td>58.245</td><td>105186881</td><td>1704.687</td></tr>
	<tr><td>Pakistan</td><td>Asia</td><td>1992</td><td>60.838</td><td>120065004</td><td>1971.829</td></tr>
	<tr><td>Pakistan</td><td>Asia</td><td>1997</td><td>61.818</td><td>135564834</td><td>2049.351</td></tr>
	<tr><td>Pakistan</td><td>Asia</td><td>2002</td><td>63.610</td><td>153403524</td><td>2092.712</td></tr>
	<tr><td>Pakistan</td><td>Asia</td><td>2007</td><td>65.483</td><td>169270617</td><td>2605.948</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>Or countries containing “, Dem. Rep.” :</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># detect countries that contain &quot;, Dem. Rep.&quot; </span>
<span class="n">gapminder</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">    </span><span class="nf">filter</span><span class="p">(</span><span class="nf">str_detect</span><span class="p">(</span><span class="n">country</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;\\, Dem. Rep.&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 24 × 6</caption>
<thead>
	<tr><th scope=col>country</th><th scope=col>continent</th><th scope=col>year</th><th scope=col>lifeExp</th><th scope=col>pop</th><th scope=col>gdpPercap</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Congo, Dem. Rep.</td><td>Africa</td><td>1952</td><td>39.143</td><td>14100005</td><td>780.5423</td></tr>
	<tr><td>Congo, Dem. Rep.</td><td>Africa</td><td>1957</td><td>40.652</td><td>15577932</td><td>905.8602</td></tr>
	<tr><td>Congo, Dem. Rep.</td><td>Africa</td><td>1962</td><td>42.122</td><td>17486434</td><td>896.3146</td></tr>
	<tr><td>Congo, Dem. Rep.</td><td>Africa</td><td>1967</td><td>44.056</td><td>19941073</td><td>861.5932</td></tr>
	<tr><td>Congo, Dem. Rep.</td><td>Africa</td><td>1972</td><td>45.989</td><td>23007669</td><td>904.8961</td></tr>
	<tr><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td></tr>
	<tr><td>Korea, Dem. Rep.</td><td>Asia</td><td>1987</td><td>70.647</td><td>19067554</td><td>4106.492</td></tr>
	<tr><td>Korea, Dem. Rep.</td><td>Asia</td><td>1992</td><td>69.978</td><td>20711375</td><td>3726.064</td></tr>
	<tr><td>Korea, Dem. Rep.</td><td>Asia</td><td>1997</td><td>67.727</td><td>21585105</td><td>1690.757</td></tr>
	<tr><td>Korea, Dem. Rep.</td><td>Asia</td><td>2002</td><td>66.662</td><td>22215365</td><td>1646.758</td></tr>
	<tr><td>Korea, Dem. Rep.</td><td>Asia</td><td>2007</td><td>67.297</td><td>23301725</td><td>1593.065</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>Replace “, Dem. Rep.” with ” Democratic Republic”:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># replace &quot;, Dem. Rep.&quot; with &quot; Democratic Republic&quot;</span>
<span class="n">gapminder</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">    </span><span class="nf">mutate</span><span class="p">(</span><span class="n">country</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">str_replace</span><span class="p">(</span><span class="n">country</span><span class="p">,</span>
<span class="w">                                </span><span class="s">&quot;\\, Dem. Rep.&quot;</span><span class="p">,</span>
<span class="w">                                </span><span class="s">&quot; Democratic Republic&quot;</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span>
<span class="w">    </span><span class="nf">filter</span><span class="p">(</span><span class="n">country</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;Korea Democratic Republic&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 12 × 6</caption>
<thead>
	<tr><th scope=col>country</th><th scope=col>continent</th><th scope=col>year</th><th scope=col>lifeExp</th><th scope=col>pop</th><th scope=col>gdpPercap</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Korea Democratic Republic</td><td>Asia</td><td>1952</td><td>50.056</td><td> 8865488</td><td>1088.278</td></tr>
	<tr><td>Korea Democratic Republic</td><td>Asia</td><td>1957</td><td>54.081</td><td> 9411381</td><td>1571.135</td></tr>
	<tr><td>Korea Democratic Republic</td><td>Asia</td><td>1962</td><td>56.656</td><td>10917494</td><td>1621.694</td></tr>
	<tr><td>Korea Democratic Republic</td><td>Asia</td><td>1967</td><td>59.942</td><td>12617009</td><td>2143.541</td></tr>
	<tr><td>Korea Democratic Republic</td><td>Asia</td><td>1972</td><td>63.983</td><td>14781241</td><td>3701.622</td></tr>
	<tr><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td></tr>
	<tr><td>Korea Democratic Republic</td><td>Asia</td><td>1987</td><td>70.647</td><td>19067554</td><td>4106.492</td></tr>
	<tr><td>Korea Democratic Republic</td><td>Asia</td><td>1992</td><td>69.978</td><td>20711375</td><td>3726.064</td></tr>
	<tr><td>Korea Democratic Republic</td><td>Asia</td><td>1997</td><td>67.727</td><td>21585105</td><td>1690.757</td></tr>
	<tr><td>Korea Democratic Republic</td><td>Asia</td><td>2002</td><td>66.662</td><td>22215365</td><td>1646.758</td></tr>
	<tr><td>Korea Democratic Republic</td><td>Asia</td><td>2007</td><td>67.297</td><td>23301725</td><td>1593.065</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="extract-matches-optional">
<h3>Extract matches (optional)<a class="headerlink" href="#extract-matches-optional" title="Permalink to this heading">#</a></h3>
<p>To extract the actual text of a match, use <code class="docutils literal notranslate"><span class="pre">str_extract</span></code>.</p>
<p>We’re going to need a more complicated example, the Harvard <code class="docutils literal notranslate"><span class="pre">sentences</span></code> from the <code class="docutils literal notranslate"><span class="pre">stringr</span></code> package:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">typeof</span><span class="p">(</span><span class="n">sentences</span><span class="p">)</span>
<span class="nf">head</span><span class="p">(</span><span class="n">sentences</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">'character'</div><div class="output text_html"><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'The birch canoe slid on the smooth planks.'</li><li>'Glue the sheet to the dark blue background.'</li><li>'It\'s easy to tell the depth of a well.'</li><li>'These days a chicken leg is a rare dish.'</li><li>'Rice is often served in round bowls.'</li><li>'The juice of lemons makes fine punch.'</li></ol>
</div></div>
</div>
<p>Say we want to extract all of the colours used in the sentences. We can do this by creating a pattern which would match them, and passing that and our vector of sentences to <code class="docutils literal notranslate"><span class="pre">str_extract</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">colours</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s">&quot;red|orange|yellow|green|blue|purple&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># extract colours used in sentences</span>
<span class="nf">str_extract</span><span class="p">(</span><span class="n">sentences</span><span class="p">,</span><span class="w"> </span><span class="n">colours</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>NA</li><li>'blue'</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>'blue'</li><li>NA</li><li>'red'</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>'red'</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>'red'</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>'blue'</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>'yellow'</li><li>NA</li><li>NA</li><li>NA</li><li>'red'</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>'red'</li><li>NA</li><li>'green'</li><li>'red'</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>'red'</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>'blue'</li><li>'red'</li><li>NA</li><li>'red'</li><li>'red'</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>'red'</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>⋯</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>'red'</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>'red'</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>'green'</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>'green'</li><li>'green'</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>'red'</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>'red'</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>'yellow'</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>'red'</li><li>NA</li><li>'orange'</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>'red'</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>'red'</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>'red'</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li><li>NA</li></ol>
</div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">str_extract</span></code> only returns the first match for each element. To return all matches from an element we need to use <code class="docutils literal notranslate"><span class="pre">str_extract_all</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># extract all colours used in sentences</span>
<span class="nf">str_extract_all</span><span class="p">(</span><span class="n">sentences</span><span class="p">,</span><span class="w"> </span><span class="n">colours</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><ol>
	<li></li>
	<li>'blue'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'blue'</li>
	<li></li>
	<li>'red'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'red'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'red'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'blue'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'yellow'</li>
	<li></li>
	<li></li>
	<li></li>
	<li>'red'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'red'</li>
	<li></li>
	<li>'green'</li>
	<li>'red'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'red'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'blue'</li>
	<li>'red'</li>
	<li></li>
	<li>'red'</li>
	<li>'red'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'red'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'blue'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'red'</li>
	<li></li>
	<li><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'blue'</li><li>'red'</li></ol>
</li>
	<li></li>
	<li></li>
	<li>'red'</li>
	<li></li>
	<li></li>
	<li></li>
	<li>'green'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'red'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'red'</li>
	<li>'red'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'red'</li>
	<li></li>
	<li></li>
	<li>'red'</li>
	<li></li>
	<li>'red'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'green'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'red'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'green'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'red'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'purple'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'green'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'red'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'red'</li>
	<li></li>
	<li></li>
	<li></li>
	<li>'red'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'red'</li>
	<li>'red'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'blue'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'red'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'blue'</li>
	<li></li>
	<li></li>
	<li>'red'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'red'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'red'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'red'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'green'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'green'</li>
	<li><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'green'</li><li>'red'</li></ol>
</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'red'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'red'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'yellow'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'red'</li>
	<li></li>
	<li><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'orange'</li><li>'red'</li></ol>
</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'red'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'red'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li>'red'</li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
</ol>
</div></div>
</div>
<p>Note: <code class="docutils literal notranslate"><span class="pre">str_extract</span></code> returns a character vector, whereas <code class="docutils literal notranslate"><span class="pre">str_extract_all</span></code> returns a litst. This is because when asking for multiple matches back, you do not know how many you will get, and thus we cannot expect a rectangular shape.</p>
</section>
<section id="capture-groups-optional">
<h3>Capture groups (optional)<a class="headerlink" href="#capture-groups-optional" title="Permalink to this heading">#</a></h3>
<p>You can also use parentheses to extract parts of a complex match.</p>
<p>For example, imagine we want to extract nouns from the sentences. As a heuristic, we’ll look for any word that comes after “a” or “the”. Defining a “word” in a regular expression is a little tricky, so here I use a simple approximation: a sequence of at least one character that isn’t a space.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># extract nouns from sentences</span>
<span class="n">noun</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s">&quot;(a|the) ([^ ]+)&quot;</span>

<span class="nf">str_match</span><span class="p">(</span><span class="n">sentences</span><span class="p">,</span><span class="w"> </span><span class="n">noun</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">    </span><span class="nf">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A matrix: 6 × 3 of type chr</caption>
<tbody>
	<tr><td>the smooth</td><td>the</td><td>smooth </td></tr>
	<tr><td>the sheet </td><td>the</td><td>sheet  </td></tr>
	<tr><td>the depth </td><td>the</td><td>depth  </td></tr>
	<tr><td>a chicken </td><td>a  </td><td>chicken</td></tr>
	<tr><td>NA        </td><td>NA </td><td>NA     </td></tr>
	<tr><td>NA        </td><td>NA </td><td>NA     </td></tr>
</tbody>
</table>
</div></div>
</div>
<p>Like <code class="docutils literal notranslate"><span class="pre">str_extract</span></code>, if you want all matches for each string, you’ll need <code class="docutils literal notranslate"><span class="pre">str_match_all</span></code></p>
</section>
<section id="summary-of-string-manipulation-functions-covered-so-far">
<h3>Summary of string manipulation functions covered so far:<a class="headerlink" href="#summary-of-string-manipulation-functions-covered-so-far" title="Permalink to this heading">#</a></h3>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>function</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">str_detect</span></code></p></td>
<td><p>Detects elements in a vector that match a pattern, returns a vector of logicals</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">srt_subset</span></code></p></td>
<td><p>Detects and returns elements in a vector that match a pattern</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">str_split</span></code></p></td>
<td><p>Split strings in a vector on a delimiter. Returns a list (used <code class="docutils literal notranslate"><span class="pre">str_split_fixed</span></code> to get a matrix)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">separate</span></code></p></td>
<td><p>Split character vectors from a data frame on a delimiter which get returned as additional columns in the data frame</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">str_length</span></code></p></td>
<td><p>Counts the number of characters for each element of a character vector, and returns a numeric vector of the counts</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">str_sub</span></code></p></td>
<td><p>Remove substrings based on character position</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">str_c</span></code></p></td>
<td><p>Collapse and/or concatenate elements from a character vector(s)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">unite</span></code></p></td>
<td><p>Concatenate elements from character vectors from a data frame to create a single column</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">str_replace</span></code></p></td>
<td><p>Replace a pattern in a vector of character vectors with a given string</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">str_extract</span></code></p></td>
<td><p>Extract the actual text of a match from a character vector</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">str_match</span></code></p></td>
<td><p>Use capture groups to extract parts of a complex match from a character vector, returns the match and the capture groups as columns of a matrix</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="factors">
<h2>Factors<a class="headerlink" href="#factors" title="Permalink to this heading">#</a></h2>
<a class="reference internal image-reference" href="https://d33wubrfki0l68.cloudfront.net/baa19d0ebf9b97949a7ad259b29a1c4ae031c8e2/8e9b8/diagrams/vectors/summary-tree-s3-1.png"><img alt="https://d33wubrfki0l68.cloudfront.net/baa19d0ebf9b97949a7ad259b29a1c4ae031c8e2/8e9b8/diagrams/vectors/summary-tree-s3-1.png" src="https://d33wubrfki0l68.cloudfront.net/baa19d0ebf9b97949a7ad259b29a1c4ae031c8e2/8e9b8/diagrams/vectors/summary-tree-s3-1.png" style="width: 300px;" /></a>
<p><em>Source: <a class="reference external" href="https://adv-r.hadley.nz/">Advanced R</a> by Hadley Wickham</em></p>
<section id="be-the-boss-of-your-factors">
<h3>Be the boss of your factors<a class="headerlink" href="#be-the-boss-of-your-factors" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>I love and hate factors</p></li>
<li><p>I love them for data visualization and statistics because I do not need to make dummy variables</p></li>
<li><p>I hate them because if you are not careful, they fool you because they look like character vectors. And when you treat them like character vectors you get cryptic error messages, like we saw when we tried to do a conditional mutate on the gapminder data set</p></li>
</ul>
<section id="tidyverse-philosophy-for-factors">
<h4>Tidyverse philosophy for factors<a class="headerlink" href="#tidyverse-philosophy-for-factors" title="Permalink to this heading">#</a></h4>
<ul class="simple">
<li><p>Humans, not computers should decide which columns are factors</p></li>
<li><p>Factors are not that useful until you are at the end of your data wrangling, before that you want character vectors so you can do string manipulations</p></li>
<li><p>Tidyverse functions, like <code class="docutils literal notranslate"><span class="pre">tibble</span></code>, and <code class="docutils literal notranslate"><span class="pre">read_csv</span></code> give you columns with strings as character vectors, Base R functions like <code class="docutils literal notranslate"><span class="pre">data.frame</span></code> and <code class="docutils literal notranslate"><span class="pre">read.csv</span></code></p></li>
</ul>
</section>
</section>
<section id="factor-inspection">
<h3>Factor inspection<a class="headerlink" href="#factor-inspection" title="Permalink to this heading">#</a></h3>
<p>Get to know your factor before you start touching it! It’s polite. Let’s use <code class="docutils literal notranslate"><span class="pre">gapminder$continent</span></code> as our example.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">str</span><span class="p">(</span><span class="n">gapminder</span><span class="o">$</span><span class="n">continent</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> Factor w/ 5 levels &quot;Africa&quot;,&quot;Americas&quot;,..: 3 3 3 3 3 3 3 3 3 3 ...
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">levels</span><span class="p">(</span><span class="n">gapminder</span><span class="o">$</span><span class="n">continent</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'Africa'</li><li>'Americas'</li><li>'Asia'</li><li>'Europe'</li><li>'Oceania'</li></ol>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">nlevels</span><span class="p">(</span><span class="n">gapminder</span><span class="o">$</span><span class="n">continent</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">5</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">class</span><span class="p">(</span><span class="n">gapminder</span><span class="o">$</span><span class="n">continent</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">'factor'</div></div>
</div>
</section>
<section id="dropping-unused-levels">
<h3>Dropping unused levels<a class="headerlink" href="#dropping-unused-levels" title="Permalink to this heading">#</a></h3>
<p>Just because you drop all the rows corresponding to a specific factor level, the levels of the factor itself do not change. Sometimes all these unused levels can come back to haunt you later, e.g., in figure legends.</p>
<p>Watch what happens to the levels of <code class="docutils literal notranslate"><span class="pre">country</span></code> when we filter Gapminder to a handful of countries:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">nlevels</span><span class="p">(</span><span class="n">gapminder</span><span class="o">$</span><span class="n">country</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">142</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">h_countries</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">gapminder</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">    </span><span class="nf">filter</span><span class="p">(</span><span class="n">country</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;Egypt&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Haiti&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Romania&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Thailand&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Venezuela&quot;</span><span class="p">))</span>

<span class="nf">nlevels</span><span class="p">(</span><span class="n">h_countries</span><span class="o">$</span><span class="n">country</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">142</div></div>
</div>
<p>huh? Even though <code class="docutils literal notranslate"><span class="pre">h_gap</span></code> only has data for a handful of countries, we are still schlepping around all 142 levels from the original <code class="docutils literal notranslate"><span class="pre">gapminder</span></code> tibble.</p>
<p>How to get rid of them? We’ll use the <code class="docutils literal notranslate"><span class="pre">forcats::fct_drop</span></code> function to do this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">h_countries</span><span class="o">$</span><span class="n">country</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">nlevels</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">142</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">h_countries</span><span class="o">$</span><span class="n">country</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">    </span><span class="nf">fct_drop</span><span class="p">()</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">    </span><span class="n">nlevels</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">5</div></div>
</div>
</section>
<section id="change-order-of-the-levels-principled">
<h3>Change order of the levels, principled<a class="headerlink" href="#change-order-of-the-levels-principled" title="Permalink to this heading">#</a></h3>
<p>By default, factor levels are ordered alphabetically. Which might as well be random, when you think about it! It is preferable to order the levels according to some principle:</p>
<ul class="simple">
<li><p>Frequency. Make the most common level the first and so on.</p></li>
<li><p>Another variable. Order factor levels according to a summary statistic for another variable. Example: order Gapminder countries by life expectancy.</p></li>
</ul>
<p>First, let’s order continent by frequency, forwards and backwards. This is often a great idea for tables and figures, esp. frequency barplots.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">## default order is alphabetical</span>
<span class="n">gapminder</span><span class="o">$</span><span class="n">continent</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">    </span><span class="nf">levels</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'Africa'</li><li>'Americas'</li><li>'Asia'</li><li>'Europe'</li><li>'Oceania'</li></ol>
</div></div>
</div>
<p>Let’s use <code class="docutils literal notranslate"><span class="pre">forcats::fct_infreq</span></code> to order by frequency:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">gapminder</span><span class="o">$</span><span class="n">continent</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">    </span><span class="nf">fct_infreq</span><span class="p">()</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">    </span><span class="nf">levels</span><span class="p">()</span>

<span class="n">gap2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">gapminder</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">    </span><span class="nf">mutate</span><span class="p">(</span><span class="n">continent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">fct_infreq</span><span class="p">(</span><span class="n">continent</span><span class="p">))</span>

<span class="n">gap2</span><span class="o">$</span><span class="n">continent</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">    </span><span class="nf">levels</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'Africa'</li><li>'Asia'</li><li>'Europe'</li><li>'Americas'</li><li>'Oceania'</li></ol>
</div><div class="output text_html"><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'Africa'</li><li>'Asia'</li><li>'Europe'</li><li>'Americas'</li><li>'Oceania'</li></ol>
</div></div>
</div>
<p>Or reverse frequency:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">gapminder</span><span class="o">$</span><span class="n">continent</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">fct_infreq</span><span class="p">()</span><span class="w"> </span><span class="o">%&gt;%</span>
<span class="w">  </span><span class="nf">fct_rev</span><span class="p">()</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">levels</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'Oceania'</li><li>'Americas'</li><li>'Europe'</li><li>'Asia'</li><li>'Africa'</li></ol>
</div></div>
</div>
</section>
<section id="order-one-variable-by-another">
<h3>Order one variable by another<a class="headerlink" href="#order-one-variable-by-another" title="Permalink to this heading">#</a></h3>
<p>You can use <code class="docutils literal notranslate"><span class="pre">forcats::fct_reorder</span></code> to order one variable by another.</p>
<p>The factor is the grouping variable and the default summarizing function is <code class="docutils literal notranslate"><span class="pre">median</span></code> but you can specify something else.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">## order countries by median life expectancy</span>
<span class="nf">fct_reorder</span><span class="p">(</span><span class="n">gapminder</span><span class="o">$</span><span class="n">country</span><span class="p">,</span><span class="w"> </span><span class="n">gapminder</span><span class="o">$</span><span class="n">lifeExp</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">    </span><span class="nf">levels</span><span class="p">()</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">    </span><span class="nf">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'Sierra Leone'</li><li>'Guinea-Bissau'</li><li>'Afghanistan'</li><li>'Angola'</li><li>'Somalia'</li><li>'Guinea'</li></ol>
</div></div>
</div>
<p>Using <code class="docutils literal notranslate"><span class="pre">min</span></code> instead to reorder the factors:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">## order accoring to minimum life exp instead of median</span>
<span class="nf">fct_reorder</span><span class="p">(</span><span class="n">gapminder</span><span class="o">$</span><span class="n">country</span><span class="p">,</span><span class="w"> </span><span class="n">gapminder</span><span class="o">$</span><span class="n">lifeExp</span><span class="p">,</span><span class="w"> </span><span class="n">min</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">    </span><span class="nf">levels</span><span class="p">()</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">    </span><span class="nf">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'Rwanda'</li><li>'Afghanistan'</li><li>'Gambia'</li><li>'Angola'</li><li>'Sierra Leone'</li><li>'Cambodia'</li></ol>
</div></div>
</div>
</section>
<section id="change-order-of-the-levels-because-i-said-so">
<h3>Change order of the levels, “because I said so”<a class="headerlink" href="#change-order-of-the-levels-because-i-said-so" title="Permalink to this heading">#</a></h3>
<p>Sometimes you just want to hoist one or more levels to the front. Why? Because I said so (sometimes really useful when creating visualizations).</p>
<p>Reminding ourselves of the level order for <code class="docutils literal notranslate"><span class="pre">gapminder$continent</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">gapminder</span><span class="o">$</span><span class="n">continent</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">levels</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'Africa'</li><li>'Americas'</li><li>'Asia'</li><li>'Europe'</li><li>'Oceania'</li></ol>
</div></div>
</div>
<p>Reorder and put Asia and Africa first:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">gapminder</span><span class="o">$</span><span class="n">continent</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">    </span><span class="nf">fct_relevel</span><span class="p">(</span><span class="s">&quot;Asia&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Africa&quot;</span><span class="p">)</span><span class="w">  </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">    </span><span class="nf">levels</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'Asia'</li><li>'Africa'</li><li>'Americas'</li><li>'Europe'</li><li>'Oceania'</li></ol>
</div></div>
</div>
<section id="why-do-we-need-to-know-how-to-do-this">
<h4>Why do we need to know how to do this?<a class="headerlink" href="#why-do-we-need-to-know-how-to-do-this" title="Permalink to this heading">#</a></h4>
<ul class="simple">
<li><p>Factor levels impact statistical analysis &amp; data visualization!</p></li>
<li><p>For example, these two barcharts of frequency by continent differ only in the order of the continents. Which do you prefer? Discuss with your neighbour.</p></li>
</ul>
<p><img alt="" src="../_images/factor_viz.png" /></p>
</section>
</section>
</section>
<section id="what-did-we-learn-today">
<h2>What did we learn today?<a class="headerlink" href="#what-did-we-learn-today" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>The differences between data frames and tibbles</p></li>
<li><p>The beautiful {lubridate} package for working with dates and times</p></li>
<li><p>Tools for manipulating and working with character data in the {stringr} and {tidyr} packages</p></li>
<li><p>How to take control of our factors using {forcats} and how to investigate factors using base R functions</p></li>
</ul>
</section>
<section id="attributions">
<h2>Attributions<a class="headerlink" href="#attributions" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://stat545.com/">Stat 545</a> created by Jenny Bryan</p></li>
<li><p><a class="reference external" href="https://r4ds.had.co.nz/index.html">R for Data Science</a> by Garrett Grolemund &amp; Hadley Wickham</p></li>
</ul>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "r"
        },
        kernelOptions: {
            name: "ir",
            path: "./lecture-notes"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'ir'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="02-data-types-and-operators.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Lecture 2 -  Key datatypes &amp; operators in R</p>
      </div>
    </a>
    <a class="right-next"
       href="04-two-table-joins-and-base-control-flow.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Lecture 4 -  Combining data frames (binds and joins) &amp; base R control flow</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lecture-learning-objectives">Lecture learning objectives:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tibbles-versus-data-frames">Tibbles versus data frames</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dates-and-times">Dates and times</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#working-with-dates-and-times">Working with dates and times</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#get-your-hands-on-some-dates-or-date-times">Get your hands on some dates or date-times</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#get-date-or-date-time-from-character">Get date or date-time from character</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#build-date-or-date-time-from-parts">Build date or date-time from parts</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-components-from-a-date-or-date-time">Getting components from a date or date-time</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#more-date-and-time-wrangling-possibilities">More date and time wrangling possibilities:</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#string-manipulations">String manipulations</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-recommended-tools">The recommended tools:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#regex-free-string-manipulation-with-stringr-and-tidyr">Regex-free string manipulation with stringr and tidyr</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#detect-or-filter-on-a-target-string">Detect or filter on a target string</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#string-splitting-by-delimiter">String splitting by delimiter</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#substring-extraction-and-replacement-by-position">Substring extraction (and replacement) by position</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#collapse-a-vector">Collapse a vector</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-a-character-vector-by-catenating-multiple-vectors">Create a character vector by catenating multiple vectors</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#substring-replacement">Substring replacement</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#other-str-functions">Other <code class="docutils literal notranslate"><span class="pre">str_*</span></code> functions?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#regular-expressions-with-stringr">Regular expressions with stringr</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#examples-with-gapminder">Examples with gapminder</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#filtering-rows-with-str-detect">Filtering rows with <code class="docutils literal notranslate"><span class="pre">str_detect</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#extract-matches-optional">Extract matches (optional)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#capture-groups-optional">Capture groups (optional)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#summary-of-string-manipulation-functions-covered-so-far">Summary of string manipulation functions covered so far:</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#factors">Factors</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#be-the-boss-of-your-factors">Be the boss of your factors</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#tidyverse-philosophy-for-factors">Tidyverse philosophy for factors</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#factor-inspection">Factor inspection</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dropping-unused-levels">Dropping unused levels</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#change-order-of-the-levels-principled">Change order of the levels, principled</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#order-one-variable-by-another">Order one variable by another</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#change-order-of-the-levels-because-i-said-so">Change order of the levels, “because I said so”</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#why-do-we-need-to-know-how-to-do-this">Why do we need to know how to do this?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-did-we-learn-today">What did we learn today?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#attributions">Attributions</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By The Jupyter Book community
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=ac02cc09edc035673794"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=ac02cc09edc035673794"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>