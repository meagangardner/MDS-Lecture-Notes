
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Lecture 3: Advanced data wrangling with Pandas &#8212; DSCI 511 Python Programming for Data Science</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'lecture-notes/lecture3_advanced-data-wrangling-with-pandas';</script>
    <link rel="canonical" href="./lecture-notes/lecture3_advanced-data-wrangling-with-pandas.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Lecture 4: Plotting, Merging and Grouping" href="lecture4_plotting-merging-and-grouping.html" />
    <link rel="prev" title="Lecture 2: Reshaping data" href="lecture2_data-types-operators-and-tidy-data.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../README.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/hex_sticker_small.png" class="logo__image only-light" alt="DSCI 511 Python Programming for Data Science - Home"/>
    <script>document.write(`<img src="../_static/hex_sticker_small.png" class="logo__image only-dark" alt="DSCI 511 Python Programming for Data Science - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../README.html">
                    DSCI 511: Python Programming for Data Science
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Lectures</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="lecture1_intro-to-python-via-pandas.html">Lecture 1: Introduction to Pandas</a></li>






<li class="toctree-l1"><a class="reference internal" href="lecture2_data-types-operators-and-tidy-data.html">Lecture 2: Reshaping data</a></li>





<li class="toctree-l1 current active"><a class="current reference internal" href="#">Lecture 3: Advanced data wrangling with Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="lecture4_plotting-merging-and-grouping.html">Lecture 4: Plotting, Merging and Grouping</a></li>
<li class="toctree-l1"><a class="reference internal" href="lecture5_numpy.html">Lecture 5: Numpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="lecture6-data-types-review-conditionals-loops.html">Lecture 6: Review of data types, conditionals and iteration</a></li>
<li class="toctree-l1"><a class="reference internal" href="lecture7-functions_testing.html">Lecture 7: Functions &amp; Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="lecture8-classes-and-style.html">Lecture 8: Classes and Style</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.ubc.ca/mds-2024-25/DSCI_511_py-prog_students" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.ubc.ca/mds-2024-25/DSCI_511_py-prog_students/issues/new?title=Issue%20on%20page%20%2Flecture-notes/lecture3_advanced-data-wrangling-with-pandas.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/lecture-notes/lecture3_advanced-data-wrangling-with-pandas.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Lecture 3: Advanced data wrangling with Pandas</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lecture-learning-objectives">Lecture learning objectives</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#strings">Strings</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#manipulating-strings">Manipulating Strings</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#substrings-splitting-and-joining">Substrings, Splitting and Joining</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#formatted-strings">Formatted Strings</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-string-methods-in-pandas">Using String Methods in Pandas</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#regular-expressions-or-regex">Regular Expressions or REGEX</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#time-series-data">Time Series Data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-datetimes">Creating Datetimes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#converting-existing-data">Converting Existing Data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#indexing-datetimes">Indexing Datetimes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#manipulating-datetimes">Manipulating Datetimes</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#resampling-and-aggregating">Resampling and Aggregating</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#categorical-data">Categorical Data</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#examples-of-categorical-data-in-pandas">Examples of categorical data in Pandas</a></li>
</ul>
</li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <a class="reference internal image-reference" href="../_images/dsci511_header.png"><img alt="../_images/dsci511_header.png" src="../_images/dsci511_header.png" style="width: 600px;" />
</a>
<section id="lecture-3-advanced-data-wrangling-with-pandas">
<h1>Lecture 3: Advanced data wrangling with Pandas<a class="headerlink" href="#lecture-3-advanced-data-wrangling-with-pandas" title="Link to this heading">#</a></h1>
<section id="lecture-learning-objectives">
<h2>Lecture learning objectives<a class="headerlink" href="#lecture-learning-objectives" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Manipulate strings in Python with methods like <code class="docutils literal notranslate"><span class="pre">find</span></code>, <code class="docutils literal notranslate"><span class="pre">replace</span></code> and <code class="docutils literal notranslate"><span class="pre">join</span></code>.</p></li>
<li><p>Access string methods in Pandas via <code class="docutils literal notranslate"><span class="pre">Series.str</span></code>.</p></li>
<li><p>Understand how to use regular expressions in Pandas for wrangling strings.</p></li>
<li><p>Differentiate between datetime object in Pandas such as <code class="docutils literal notranslate"><span class="pre">Timestamp</span></code>, <code class="docutils literal notranslate"><span class="pre">Timedelta</span></code>, <code class="docutils literal notranslate"><span class="pre">Period</span></code>, <code class="docutils literal notranslate"><span class="pre">DateOffset</span></code>.</p></li>
<li><p>Create these datetime objects with functions like <code class="docutils literal notranslate"><span class="pre">pd.Timestamp()</span></code>, <code class="docutils literal notranslate"><span class="pre">pd.Period()</span></code>, <code class="docutils literal notranslate"><span class="pre">pd.date_range()</span></code>, <code class="docutils literal notranslate"><span class="pre">pd.period_range()</span></code>.</p></li>
<li><p>Index a datetime index with partial string indexing.</p></li>
<li><p>Perform basic datetime operations like splitting a datetime into constituent parts (e.g., <code class="docutils literal notranslate"><span class="pre">year</span></code>, <code class="docutils literal notranslate"><span class="pre">weekday</span></code>, <code class="docutils literal notranslate"><span class="pre">second</span></code>, etc), apply offsets, change timezones, and resample with <code class="docutils literal notranslate"><span class="pre">.resample()</span></code>.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">altair</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">alt</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.max_rows&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ModuleNotFoundError</span><span class="g g-Whitespace">                       </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">line</span> <span class="mi">3</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="ne">----&gt; </span><span class="mi">3</span> <span class="kn">import</span><span class="w"> </span><span class="nn">altair</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">alt</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.max_rows&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

<span class="ne">ModuleNotFoundError</span>: No module named &#39;altair&#39;
</pre></div>
</div>
</div>
</div>
</section>
<section id="strings">
<h2>Strings<a class="headerlink" href="#strings" title="Link to this heading">#</a></h2>
<p>Strings are a core data type in Python used for text-based data. They are enclosed in single (<code class="docutils literal notranslate"><span class="pre">'</span></code>) or double (<code class="docutils literal notranslate"><span class="pre">&quot;</span></code>) quotes.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">single</span> <span class="o">=</span> <span class="s1">&#39;I love Python!&#39;</span>
<span class="n">double</span> <span class="o">=</span> <span class="s2">&quot;I love Data Science!&quot;</span>
<span class="n">single</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;I love Python!&#39;
</pre></div>
</div>
</div>
</div>
<p>Sometimes our strings may themselves contain quotation marks or apostrophes.</p>
<div class="cell tag_raises-exception docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">single</span> <span class="o">=</span> <span class="s1">&#39;That&#39;</span><span class="n">s</span> <span class="n">weird</span><span class="s1">&#39; </span>
<span class="c1"># raises error </span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span>  <span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
    <span class="n">single</span> <span class="o">=</span> <span class="s1">&#39;That&#39;</span><span class="n">s</span> <span class="n">weird</span><span class="s1">&#39;</span>
                   <span class="o">^</span>
<span class="ne">SyntaxError</span>: invalid syntax
</pre></div>
</div>
</div>
</div>
<p>We can use a backlash <code class="docutils literal notranslate"><span class="pre">\</span></code> (called an escape character) to prevent Python from interpreting <code class="docutils literal notranslate"><span class="pre">'</span></code> as a string delimiter</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">single</span> <span class="o">=</span> <span class="s1">&#39;That</span><span class="se">\&#39;</span><span class="s1">s weird&#39;</span>
<span class="n">single</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&quot;That&#39;s weird&quot;
</pre></div>
</div>
</div>
</div>
<p>You may also have strings that contain backslashes, so you need to tell Python not to treat them as escape characters.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">path1</span> <span class="o">=</span> <span class="s1">&#39;Documents</span><span class="se">\\</span><span class="s1">Lecture1&#39;</span>
<span class="n">path2</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;Documents\Lecture1\solutions.ipynb&#39;</span>
</pre></div>
</div>
</div>
</div>
<section id="manipulating-strings">
<h3>Manipulating Strings<a class="headerlink" href="#manipulating-strings" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Strings can be concatenated using the <code class="docutils literal notranslate"><span class="pre">+</span></code> operator.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">len()</span></code> function returns the length of a string, i.e. the number of characters it contains.</p></li>
<li><p>Use the <code class="docutils literal notranslate"><span class="pre">lower()</span></code>, <code class="docutils literal notranslate"><span class="pre">upper()</span></code> and <code class="docutils literal notranslate"><span class="pre">capitalize()</span></code> methods for case conversion.</p></li>
<li><p>You can remove leading and trailing whitespace from strings using <code class="docutils literal notranslate"><span class="pre">strip()</span></code>, <code class="docutils literal notranslate"><span class="pre">lstrip()</span></code>, and <code class="docutils literal notranslate"><span class="pre">rstrip()</span></code>.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">first</span> <span class="o">=</span> <span class="s1">&#39;florence&#39;</span>
<span class="n">last</span> <span class="o">=</span> <span class="s1">&#39;nightingale&#39;</span>
<span class="n">first</span> <span class="o">+</span> <span class="n">last</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;florencenightingale&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">first</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>8
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">first</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;FLORENCE&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fullname</span> <span class="o">=</span> <span class="s1">&#39;  Florence Nightingale      &#39;</span>
<span class="n">fullname</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Florence Nightingale&#39;
</pre></div>
</div>
</div>
</div>
<p><strong>Note:</strong> A whitespace character is any character that is displayed as “blank space” when text is rendered for display. Usual spaces and tabs (<code class="docutils literal notranslate"><span class="pre">'t'</span></code>)  are both whitespace characters. You might also frequently encounter new line characters (<code class="docutils literal notranslate"><span class="pre">'\n'</span></code>), which force line breaks. Less commonly used whitespace characters are carriage returns, vertical tabs, and form feeds.</p>
</section>
<section id="substrings-splitting-and-joining">
<h3>Substrings, Splitting and Joining<a class="headerlink" href="#substrings-splitting-and-joining" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>You can slice a string using integer indexing.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">find()</span></code> and <code class="docutils literal notranslate"><span class="pre">index()</span></code> methods help you locate substrings.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">replace()</span></code> method allows you to replace occurences of one substring with another.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">split()</span></code> method splits one string into a list of substrings based on a delimiter</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">join()</span></code> method joins a list of strings into one, using a specified delimiter</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;The-University-of-British-Columbia&#39;</span>
<span class="n">text</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;v&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>7
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">text</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;v&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>6
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">text</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;z&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>-1
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">,</span><span class="s1">&#39; &#39;</span><span class="p">)</span> <span class="c1"># Note this returns a new string, and does not modify the original in place.</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;The University of British Columbia&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">words</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">)</span>
<span class="n">words</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;The&#39;, &#39;University&#39;, &#39;of&#39;, &#39;British&#39;, &#39;Columbia&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;The University of British Columbia&#39;
</pre></div>
</div>
</div>
</div>
</section>
<section id="formatted-strings">
<h3>Formatted Strings<a class="headerlink" href="#formatted-strings" title="Link to this heading">#</a></h3>
<p>Python can “fill in the blanks” using specified input to create strings. One way of doing this is using f-strings. These are useful when you want to print statements including variables.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">num</span> <span class="o">=</span> <span class="mi">12</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;There are </span><span class="si">{</span><span class="n">num</span><span class="si">}</span><span class="s2"> months in a year&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>There are 12 months in a year
</pre></div>
</div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">print()</span></code> function above has some useful options that you can find in the Python documentation.</p>
</section>
<section id="using-string-methods-in-pandas">
<h3>Using String Methods in Pandas<a class="headerlink" href="#using-string-methods-in-pandas" title="Link to this heading">#</a></h3>
<p>In previous lectures, we saw that Pandas can apply arithmetic operations on an entire Series object “all at once”. We can do the same for text data using <code class="docutils literal notranslate"><span class="pre">Series.str</span></code> which gives us access to the string methods we have seen.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">imdb</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data/imdb.csv&#39;</span><span class="p">)</span>
<span class="n">imdb</span><span class="p">[</span><span class="s1">&#39;Genre&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0                         Drama
1                  Crime, Drama
2          Action, Crime, Drama
3                  Crime, Drama
4                  Crime, Drama
                 ...           
995      Comedy, Drama, Romance
996              Drama, Western
997         Drama, Romance, War
998                  Drama, War
999    Crime, Mystery, Thriller
Name: Genre, Length: 1000, dtype: object
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">genres</span> <span class="o">=</span> <span class="n">imdb</span><span class="p">[</span><span class="s1">&#39;Genre&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">expand</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="n">genres</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
      <th>2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Drama</td>
      <td>None</td>
      <td>None</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Crime</td>
      <td>Drama</td>
      <td>None</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Action</td>
      <td>Crime</td>
      <td>Drama</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Crime</td>
      <td>Drama</td>
      <td>None</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Crime</td>
      <td>Drama</td>
      <td>None</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>995</th>
      <td>Comedy</td>
      <td>Drama</td>
      <td>Romance</td>
    </tr>
    <tr>
      <th>996</th>
      <td>Drama</td>
      <td>Western</td>
      <td>None</td>
    </tr>
    <tr>
      <th>997</th>
      <td>Drama</td>
      <td>Romance</td>
      <td>War</td>
    </tr>
    <tr>
      <th>998</th>
      <td>Drama</td>
      <td>War</td>
      <td>None</td>
    </tr>
    <tr>
      <th>999</th>
      <td>Crime</td>
      <td>Mystery</td>
      <td>Thriller</td>
    </tr>
  </tbody>
</table>
<p>1000 rows × 3 columns</p>
</div></div></div>
</div>
<p>Notice there’s some whitespace in the resulting columns!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">genres</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39; Drama&#39;
</pre></div>
</div>
</div>
</div>
<p>We know how to fix this</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">genres</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">genres</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
<span class="n">genres</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Drama&#39;
</pre></div>
</div>
</div>
</div>
<p>There are many string methods available to use in pandas. A full list is available in the <a class="reference external" href="https://pandas.pydata.org/docs/user_guide/text.html">documentation</a>.</p>
</section>
<section id="regular-expressions-or-regex">
<h3>Regular Expressions or REGEX<a class="headerlink" href="#regular-expressions-or-regex" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>A regular expression (regex) is a sequence of characters that defines a search pattern.</p></li>
<li><p>Regex can do some truly magical things, so keep it in mind for complicated text wrangling!</p></li>
<li><p>Regex can also be difficult to get right, but there are many online tools (e.g. <a class="reference external" href="https://regexr.com">RegExr</a>) that can help you find the correct patterns.</p></li>
</ul>
<p>You will learn more about regex in DSCI 521, so you don’t need to learn it now. Here, just as an example, we use regex can find all movie titles in our IMDB dataset that start with a vowel and end with a consonant.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">findpattern</span> <span class="o">=</span> <span class="n">imdb</span><span class="p">[</span><span class="s1">&#39;Series_Title&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^[AEIOU].*[^aeiou]$&#39;</span><span class="p">)</span>
<span class="n">findpattern</span><span class="o">.</span><span class="n">loc</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0              []
1              []
2              []
3              []
4              []
5              []
6              []
7              []
8     [Inception]
9              []
10             []
Name: Series_Title, dtype: object
</pre></div>
</div>
</div>
</div>
<p>Let’s break down that regex:</p>
<ul class="simple">
<li><p>The leading <code class="docutils literal notranslate"><span class="pre">^</span></code> specifies the start of a string.</p></li>
<li><p>Square brackets match a single character, so <code class="docutils literal notranslate"><span class="pre">[AEIOU]</span></code> is saying we want the first character to be a vowel.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.</span></code> matches any character and <code class="docutils literal notranslate"><span class="pre">*</span></code> means ‘0 or more times’, so <code class="docutils literal notranslate"><span class="pre">.*</span></code> will match any number of any characters in the middle of our string</p></li>
<li><p>Having a <code class="docutils literal notranslate"><span class="pre">^</span></code> inside and at the start of square brackets indicates a “not” and <code class="docutils literal notranslate"><span class="pre">$</span></code> matches the end of a string. So <code class="docutils literal notranslate"><span class="pre">[^aeiou]$</span></code> means we don’t want the <em>last</em> character to be a vowel.</p></li>
</ul>
<p>We could have used regex to split the genres as well, which would allow us to specify a greater number of possible delimiters.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">imdb</span><span class="p">[</span><span class="s1">&#39;Genre&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;[,:.!]&#39;</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
      <th>2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Drama</td>
      <td>None</td>
      <td>None</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Crime</td>
      <td>Drama</td>
      <td>None</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Action</td>
      <td>Crime</td>
      <td>Drama</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Crime</td>
      <td>Drama</td>
      <td>None</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Crime</td>
      <td>Drama</td>
      <td>None</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>995</th>
      <td>Comedy</td>
      <td>Drama</td>
      <td>Romance</td>
    </tr>
    <tr>
      <th>996</th>
      <td>Drama</td>
      <td>Western</td>
      <td>None</td>
    </tr>
    <tr>
      <th>997</th>
      <td>Drama</td>
      <td>Romance</td>
      <td>War</td>
    </tr>
    <tr>
      <th>998</th>
      <td>Drama</td>
      <td>War</td>
      <td>None</td>
    </tr>
    <tr>
      <th>999</th>
      <td>Crime</td>
      <td>Mystery</td>
      <td>Thriller</td>
    </tr>
  </tbody>
</table>
<p>1000 rows × 3 columns</p>
</div></div></div>
</div>
<p>Many <code class="docutils literal notranslate"><span class="pre">DataFrame.str()</span></code> methods accept regular expression as default, but you don’t have to use regex if you don’t need it.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">imdb</span><span class="p">[</span><span class="s1">&#39;Genre&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;ri&#39;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># This tests for exact matches</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0      False
1       True
2       True
3       True
4       True
       ...  
995    False
996    False
997    False
998    False
999     True
Name: Genre, Length: 1000, dtype: bool
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="time-series-data">
<h2>Time Series Data<a class="headerlink" href="#time-series-data" title="Link to this heading">#</a></h2>
<p>Data Scientists often work with “time series” data, i.e. data that is indexed by time periods. We will breifly introduce time series in pandas here; you will encounter them much more in DSCI 574.</p>
<p>Pandas provides several datetime objects, including:</p>
<ul class="simple">
<li><p>Timestamp</p></li>
<li><p>Timedelta</p></li>
<li><p>Period</p></li>
<li><p>DateOffset</p></li>
</ul>
<p>We explore a few of them below.</p>
<section id="creating-datetimes">
<h3>Creating Datetimes<a class="headerlink" href="#creating-datetimes" title="Link to this heading">#</a></h3>
<p>Most commonly you will want to</p>
<ul class="simple">
<li><p>Create a single point in time with <code class="docutils literal notranslate"><span class="pre">pd.Timestamp()</span></code>.</p></li>
<li><p>Create a span of time with <code class="docutils literal notranslate"><span class="pre">pd.Period()</span></code>.</p></li>
<li><p>Create an array of times with <code class="docutils literal notranslate"><span class="pre">pd.date_range()</span></code> or <code class="docutils literal notranslate"><span class="pre">pd.period_range()</span></code>.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;July 29, 2005&#39;</span><span class="p">)</span> <span class="c1"># parsed from string</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Timestamp(&#39;2005-07-29 00:00:00&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="n">year</span> <span class="o">=</span> <span class="mi">2005</span><span class="p">,</span> <span class="n">month</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span> <span class="n">day</span> <span class="o">=</span> <span class="mi">9</span><span class="p">)</span> <span class="c1"># pass data directly</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Timestamp(&#39;2005-07-09 00:00:00&#39;)
</pre></div>
</div>
</div>
</div>
<p>Above we have a specific point in time. We can use <code class="docutils literal notranslate"><span class="pre">pd.Period()</span></code> to specify a span of time (like a day)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">span</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">&#39;2005-07-09&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">span</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">span</span><span class="o">.</span><span class="n">start_time</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">span</span><span class="o">.</span><span class="n">end_time</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2005-07-09
2005-07-09 00:00:00
2005-07-09 23:59:59.999999999
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">span</span> <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="s1">&#39;1 day&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Period(&#39;2005-07-10&#39;, &#39;D&#39;)
</pre></div>
</div>
</div>
</div>
<p>Pandas understands when a <code class="docutils literal notranslate"><span class="pre">Timestamp</span></code> lies within a <code class="docutils literal notranslate"><span class="pre">Period</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">point</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2005-07-09 12:00&#39;</span><span class="p">)</span>
<span class="n">span</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">&#39;2005-07-09&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Point: </span><span class="si">{</span><span class="n">point</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39; Span: </span><span class="si">{</span><span class="n">span</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Point in span? </span><span class="si">{</span><span class="n">span</span><span class="o">.</span><span class="n">start_time</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">point</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">span</span><span class="o">.</span><span class="n">end_time</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Point: 2005-07-09 12:00:00
 Span: 2005-07-09
Point in span? True
</pre></div>
</div>
</div>
</div>
<p>Often, you will want to create <strong>arrays</strong> of datetimes, not just single values. In pandas, these come in the form of a <code class="docutils literal notranslate"><span class="pre">DatetimeIndex</span></code>, <code class="docutils literal notranslate"><span class="pre">PeriodIndex</span></code> or <code class="docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;2020-09-01 12:00&#39;</span><span class="p">,</span>
              <span class="s1">&#39;2020-09-11 12:00&#39;</span><span class="p">,</span>
              <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;2d&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>DatetimeIndex([&#39;2020-09-01 12:00:00&#39;, &#39;2020-09-03 12:00:00&#39;,
               &#39;2020-09-05 12:00:00&#39;, &#39;2020-09-07 12:00:00&#39;,
               &#39;2020-09-09 12:00:00&#39;, &#39;2020-09-11 12:00:00&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=&#39;2D&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">period_range</span><span class="p">(</span><span class="s1">&#39;2020-09-01&#39;</span><span class="p">,</span>
                <span class="s1">&#39;2020-09-11&#39;</span><span class="p">,</span>
                <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;d&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>PeriodIndex([&#39;2020-09-01&#39;, &#39;2020-09-02&#39;, &#39;2020-09-03&#39;, &#39;2020-09-04&#39;,
             &#39;2020-09-05&#39;, &#39;2020-09-06&#39;, &#39;2020-09-07&#39;, &#39;2020-09-08&#39;,
             &#39;2020-09-09&#39;, &#39;2020-09-10&#39;, &#39;2020-09-11&#39;],
            dtype=&#39;period[D]&#39;)
</pre></div>
</div>
</div>
</div>
<p>We can use <code class="docutils literal notranslate"><span class="pre">Timedelta</span></code> to add or subtract time from a <code class="docutils literal notranslate"><span class="pre">DatetimeIndex</span></code> or <code class="docutils literal notranslate"><span class="pre">PeriodIndex</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;2020-09-01 12:00&#39;</span><span class="p">,</span> <span class="s1">&#39;2020-09-11 12:00&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="s1">&#39;1.5 hours&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>DatetimeIndex([&#39;2020-09-01 13:30:00&#39;, &#39;2020-09-02 13:30:00&#39;,
               &#39;2020-09-03 13:30:00&#39;, &#39;2020-09-04 13:30:00&#39;,
               &#39;2020-09-05 13:30:00&#39;, &#39;2020-09-06 13:30:00&#39;,
               &#39;2020-09-07 13:30:00&#39;, &#39;2020-09-08 13:30:00&#39;,
               &#39;2020-09-09 13:30:00&#39;, &#39;2020-09-10 13:30:00&#39;,
               &#39;2020-09-11 13:30:00&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=&#39;D&#39;)
</pre></div>
</div>
</div>
</div>
<p>Finally, pandas represents missing datetimes with <code class="docutils literal notranslate"><span class="pre">NaT</span></code>.</p>
</section>
<section id="converting-existing-data">
<h3>Converting Existing Data<a class="headerlink" href="#converting-existing-data" title="Link to this heading">#</a></h3>
<p>It’s fairly common to have an array of dates as strings. We can use <code class="docutils literal notranslate"><span class="pre">pd.to_datetime()</span></code> to convert these to a datetime format.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cycling</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data/cycling_data.csv&#39;</span><span class="p">)</span>
<span class="n">cycling</span><span class="o">.</span><span class="n">head</span><span class="p">()</span> <span class="c1"># Date column will be read in as strings</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Date</th>
      <th>Name</th>
      <th>Type</th>
      <th>Time</th>
      <th>Distance</th>
      <th>Comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>10 Sep 2019, 00:13:04</td>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>2084</td>
      <td>12.62</td>
      <td>Rain</td>
    </tr>
    <tr>
      <th>1</th>
      <td>10 Sep 2019, 13:52:18</td>
      <td>Morning Ride</td>
      <td>Ride</td>
      <td>2531</td>
      <td>13.03</td>
      <td>rain</td>
    </tr>
    <tr>
      <th>2</th>
      <td>11 Sep 2019, 00:23:50</td>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1863</td>
      <td>12.52</td>
      <td>Wet road but nice weather</td>
    </tr>
    <tr>
      <th>3</th>
      <td>11 Sep 2019, 14:06:19</td>
      <td>Morning Ride</td>
      <td>Ride</td>
      <td>2192</td>
      <td>12.84</td>
      <td>Stopped for photo of sunrise</td>
    </tr>
    <tr>
      <th>4</th>
      <td>12 Sep 2019, 00:28:05</td>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1891</td>
      <td>12.48</td>
      <td>Tired by the end of the week</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cycling</span><span class="p">[</span><span class="s1">&#39;Date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">cycling</span><span class="p">[</span><span class="s1">&#39;Date&#39;</span><span class="p">])</span>
<span class="n">cycling</span><span class="p">[</span><span class="s1">&#39;Date&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0    2019-09-10 00:13:04
1    2019-09-10 13:52:18
2    2019-09-11 00:23:50
3    2019-09-11 14:06:19
4    2019-09-12 00:28:05
5    2019-09-16 13:57:48
6    2019-09-17 00:15:47
7    2019-09-17 13:43:34
8    2019-09-18 13:49:53
9    2019-09-18 00:15:52
10   2019-09-19 00:30:01
11   2019-09-19 13:52:09
12   2019-09-20 01:02:05
13   2019-09-23 13:50:41
14   2019-09-24 00:35:42
15   2019-09-24 13:41:24
16   2019-09-25 00:07:21
17   2019-09-25 13:35:41
18   2019-09-26 00:13:33
19   2019-09-26 13:42:43
20   2019-09-27 01:00:18
21   2019-09-30 13:53:52
22   2019-10-01 00:15:07
23   2019-10-01 13:45:55
24   2019-10-02 00:13:09
25   2019-10-02 13:46:06
26   2019-10-03 00:45:22
27   2019-10-03 13:47:36
28   2019-10-04 01:08:08
29   2019-10-09 13:55:40
30   2019-10-10 00:10:31
31   2019-10-10 13:47:14
32   2019-10-11 00:16:57
Name: Date, dtype: datetime64[ns]
</pre></div>
</div>
</div>
</div>
<p>We can actually tell pandas to do this within the <code class="docutils literal notranslate"><span class="pre">read_csv</span></code> statement. Let’s also set the datetime as the Index.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cycling</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data/cycling_data.csv&#39;</span><span class="p">,</span>
                      <span class="n">parse_dates</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                      <span class="n">index_col</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">cycling</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Name</th>
      <th>Type</th>
      <th>Time</th>
      <th>Distance</th>
      <th>Comments</th>
    </tr>
    <tr>
      <th>Date</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019-09-10 00:13:04</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>2084</td>
      <td>12.62</td>
      <td>Rain</td>
    </tr>
    <tr>
      <th>2019-09-10 13:52:18</th>
      <td>Morning Ride</td>
      <td>Ride</td>
      <td>2531</td>
      <td>13.03</td>
      <td>rain</td>
    </tr>
    <tr>
      <th>2019-09-11 00:23:50</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1863</td>
      <td>12.52</td>
      <td>Wet road but nice weather</td>
    </tr>
    <tr>
      <th>2019-09-11 14:06:19</th>
      <td>Morning Ride</td>
      <td>Ride</td>
      <td>2192</td>
      <td>12.84</td>
      <td>Stopped for photo of sunrise</td>
    </tr>
    <tr>
      <th>2019-09-12 00:28:05</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1891</td>
      <td>12.48</td>
      <td>Tired by the end of the week</td>
    </tr>
    <tr>
      <th>2019-09-16 13:57:48</th>
      <td>Morning Ride</td>
      <td>Ride</td>
      <td>2272</td>
      <td>12.45</td>
      <td>Rested after the weekend!</td>
    </tr>
    <tr>
      <th>2019-09-17 00:15:47</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1973</td>
      <td>12.45</td>
      <td>Legs feeling strong!</td>
    </tr>
    <tr>
      <th>2019-09-17 13:43:34</th>
      <td>Morning Ride</td>
      <td>Ride</td>
      <td>2285</td>
      <td>12.60</td>
      <td>Raining</td>
    </tr>
    <tr>
      <th>2019-09-18 13:49:53</th>
      <td>Morning Ride</td>
      <td>Ride</td>
      <td>2903</td>
      <td>14.57</td>
      <td>Raining today</td>
    </tr>
    <tr>
      <th>2019-09-18 00:15:52</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>2101</td>
      <td>12.48</td>
      <td>Pumped up tires</td>
    </tr>
    <tr>
      <th>2019-09-19 00:30:01</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>48062</td>
      <td>12.48</td>
      <td>Feeling good</td>
    </tr>
    <tr>
      <th>2019-09-19 13:52:09</th>
      <td>Morning Ride</td>
      <td>Ride</td>
      <td>2090</td>
      <td>12.59</td>
      <td>Getting colder which is nice</td>
    </tr>
    <tr>
      <th>2019-09-20 01:02:05</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>2961</td>
      <td>12.81</td>
      <td>Feeling good</td>
    </tr>
    <tr>
      <th>2019-09-23 13:50:41</th>
      <td>Morning Ride</td>
      <td>Ride</td>
      <td>2462</td>
      <td>12.68</td>
      <td>Rested after the weekend!</td>
    </tr>
    <tr>
      <th>2019-09-24 00:35:42</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>2076</td>
      <td>12.47</td>
      <td>Oiled chain, bike feels smooth</td>
    </tr>
    <tr>
      <th>2019-09-24 13:41:24</th>
      <td>Morning Ride</td>
      <td>Ride</td>
      <td>2321</td>
      <td>12.68</td>
      <td>Bike feeling much smoother</td>
    </tr>
    <tr>
      <th>2019-09-25 00:07:21</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1775</td>
      <td>12.10</td>
      <td>Feeling really tired</td>
    </tr>
    <tr>
      <th>2019-09-25 13:35:41</th>
      <td>Morning Ride</td>
      <td>Ride</td>
      <td>2124</td>
      <td>12.65</td>
      <td>Stopped for photo of sunrise</td>
    </tr>
    <tr>
      <th>2019-09-26 00:13:33</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1860</td>
      <td>12.52</td>
      <td>raining</td>
    </tr>
    <tr>
      <th>2019-09-26 13:42:43</th>
      <td>Morning Ride</td>
      <td>Ride</td>
      <td>2350</td>
      <td>12.91</td>
      <td>Detour around trucks at Jericho</td>
    </tr>
    <tr>
      <th>2019-09-27 01:00:18</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1712</td>
      <td>12.47</td>
      <td>Tired by the end of the week</td>
    </tr>
    <tr>
      <th>2019-09-30 13:53:52</th>
      <td>Morning Ride</td>
      <td>Ride</td>
      <td>2118</td>
      <td>12.71</td>
      <td>Rested after the weekend!</td>
    </tr>
    <tr>
      <th>2019-10-01 00:15:07</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1732</td>
      <td>NaN</td>
      <td>Legs feeling strong!</td>
    </tr>
    <tr>
      <th>2019-10-01 13:45:55</th>
      <td>Morning Ride</td>
      <td>Ride</td>
      <td>2222</td>
      <td>12.82</td>
      <td>Beautiful morning! Feeling fit</td>
    </tr>
    <tr>
      <th>2019-10-02 00:13:09</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1756</td>
      <td>NaN</td>
      <td>A little tired today but good weather</td>
    </tr>
    <tr>
      <th>2019-10-02 13:46:06</th>
      <td>Morning Ride</td>
      <td>Ride</td>
      <td>2134</td>
      <td>13.06</td>
      <td>Bit tired today but good weather</td>
    </tr>
    <tr>
      <th>2019-10-03 00:45:22</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1724</td>
      <td>12.52</td>
      <td>Feeling good</td>
    </tr>
    <tr>
      <th>2019-10-03 13:47:36</th>
      <td>Morning Ride</td>
      <td>Ride</td>
      <td>2182</td>
      <td>12.68</td>
      <td>Wet road</td>
    </tr>
    <tr>
      <th>2019-10-04 01:08:08</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1870</td>
      <td>12.63</td>
      <td>Very tired, riding into the wind</td>
    </tr>
    <tr>
      <th>2019-10-09 13:55:40</th>
      <td>Morning Ride</td>
      <td>Ride</td>
      <td>2149</td>
      <td>12.70</td>
      <td>Really cold! But feeling good</td>
    </tr>
    <tr>
      <th>2019-10-10 00:10:31</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1841</td>
      <td>12.59</td>
      <td>Feeling good after a holiday break!</td>
    </tr>
    <tr>
      <th>2019-10-10 13:47:14</th>
      <td>Morning Ride</td>
      <td>Ride</td>
      <td>2463</td>
      <td>12.79</td>
      <td>Stopped for photo of sunrise</td>
    </tr>
    <tr>
      <th>2019-10-11 00:16:57</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1843</td>
      <td>11.79</td>
      <td>Bike feeling tight, needs an oil and pump</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="indexing-datetimes">
<h3>Indexing Datetimes<a class="headerlink" href="#indexing-datetimes" title="Link to this heading">#</a></h3>
<p>Datetime index objects are just like regular index objects and can be selected, sliced, filtered etc. We can do <strong>partial string indexing</strong> to select datetimes within a certain range.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cycling</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;2019-10&#39;</span><span class="p">]</span> <span class="c1"># All logs for Oct 2019</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Name</th>
      <th>Type</th>
      <th>Time</th>
      <th>Distance</th>
      <th>Comments</th>
    </tr>
    <tr>
      <th>Date</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019-10-01 00:15:07</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1732</td>
      <td>NaN</td>
      <td>Legs feeling strong!</td>
    </tr>
    <tr>
      <th>2019-10-01 13:45:55</th>
      <td>Morning Ride</td>
      <td>Ride</td>
      <td>2222</td>
      <td>12.82</td>
      <td>Beautiful morning! Feeling fit</td>
    </tr>
    <tr>
      <th>2019-10-02 00:13:09</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1756</td>
      <td>NaN</td>
      <td>A little tired today but good weather</td>
    </tr>
    <tr>
      <th>2019-10-02 13:46:06</th>
      <td>Morning Ride</td>
      <td>Ride</td>
      <td>2134</td>
      <td>13.06</td>
      <td>Bit tired today but good weather</td>
    </tr>
    <tr>
      <th>2019-10-03 00:45:22</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1724</td>
      <td>12.52</td>
      <td>Feeling good</td>
    </tr>
    <tr>
      <th>2019-10-03 13:47:36</th>
      <td>Morning Ride</td>
      <td>Ride</td>
      <td>2182</td>
      <td>12.68</td>
      <td>Wet road</td>
    </tr>
    <tr>
      <th>2019-10-04 01:08:08</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1870</td>
      <td>12.63</td>
      <td>Very tired, riding into the wind</td>
    </tr>
    <tr>
      <th>2019-10-09 13:55:40</th>
      <td>Morning Ride</td>
      <td>Ride</td>
      <td>2149</td>
      <td>12.70</td>
      <td>Really cold! But feeling good</td>
    </tr>
    <tr>
      <th>2019-10-10 00:10:31</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1841</td>
      <td>12.59</td>
      <td>Feeling good after a holiday break!</td>
    </tr>
    <tr>
      <th>2019-10-10 13:47:14</th>
      <td>Morning Ride</td>
      <td>Ride</td>
      <td>2463</td>
      <td>12.79</td>
      <td>Stopped for photo of sunrise</td>
    </tr>
    <tr>
      <th>2019-10-11 00:16:57</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1843</td>
      <td>11.79</td>
      <td>Bike feeling tight, needs an oil and pump</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p><strong>Exact</strong> matching:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cycling</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;2019-10-10 00:10:31&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Name                             Afternoon Ride
Type                                       Ride
Time                                       1841
Distance                                  12.59
Comments    Feeling good after a holiday break!
Name: 2019-10-10 00:10:31, dtype: object
</pre></div>
</div>
</div>
</div>
<p>And <strong>slicing</strong>:</p>
<div class="cell tag_raises-exception docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cycling</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;2019-10-01&#39;</span><span class="p">:</span><span class="s1">&#39;2019-10-13&#39;</span><span class="p">]</span> <span class="c1"># raises error</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">KeyError</span><span class="g g-Whitespace">                                  </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">37</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">cycling</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;2019-10-01&#39;</span><span class="p">:</span><span class="s1">&#39;2019-10-13&#39;</span><span class="p">]</span> <span class="c1"># raises error</span>

<span class="nn">File ~/miniforge3/envs/agrigates-test1/lib/python3.9/site-packages/pandas/core/indexing.py:1153,</span> in <span class="ni">_LocationIndexer.__getitem__</span><span class="nt">(self, key)</span>
<span class="g g-Whitespace">   </span><span class="mi">1150</span> <span class="n">axis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axis</span> <span class="ow">or</span> <span class="mi">0</span>
<span class="g g-Whitespace">   </span><span class="mi">1152</span> <span class="n">maybe_callable</span> <span class="o">=</span> <span class="n">com</span><span class="o">.</span><span class="n">apply_if_callable</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">1153</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getitem_axis</span><span class="p">(</span><span class="n">maybe_callable</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>

<span class="nn">File ~/miniforge3/envs/agrigates-test1/lib/python3.9/site-packages/pandas/core/indexing.py:1373,</span> in <span class="ni">_LocIndexer._getitem_axis</span><span class="nt">(self, key, axis)</span>
<span class="g g-Whitespace">   </span><span class="mi">1371</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">slice</span><span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">1372</span>     <span class="bp">self</span><span class="o">.</span><span class="n">_validate_key</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">axis</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">1373</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_slice_axis</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1374</span> <span class="k">elif</span> <span class="n">com</span><span class="o">.</span><span class="n">is_bool_indexer</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">1375</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getbool_axis</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>

<span class="nn">File ~/miniforge3/envs/agrigates-test1/lib/python3.9/site-packages/pandas/core/indexing.py:1405,</span> in <span class="ni">_LocIndexer._get_slice_axis</span><span class="nt">(self, slice_obj, axis)</span>
<span class="g g-Whitespace">   </span><span class="mi">1402</span>     <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1404</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">_get_axis</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">1405</span> <span class="n">indexer</span> <span class="o">=</span> <span class="n">labels</span><span class="o">.</span><span class="n">slice_indexer</span><span class="p">(</span><span class="n">slice_obj</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">slice_obj</span><span class="o">.</span><span class="n">stop</span><span class="p">,</span> <span class="n">slice_obj</span><span class="o">.</span><span class="n">step</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1407</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">indexer</span><span class="p">,</span> <span class="nb">slice</span><span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">1408</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_slice</span><span class="p">(</span><span class="n">indexer</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>

<span class="nn">File ~/miniforge3/envs/agrigates-test1/lib/python3.9/site-packages/pandas/core/indexes/datetimes.py:698,</span> in <span class="ni">DatetimeIndex.slice_indexer</span><span class="nt">(self, start, end, step)</span>
<span class="g g-Whitespace">    </span><span class="mi">695</span>     <span class="n">in_index</span> <span class="o">&amp;=</span> <span class="p">(</span><span class="n">end_casted</span> <span class="o">==</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">any</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">697</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">in_index</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">698</span>     <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">699</span>         <span class="s2">&quot;Value based partial slicing on non-monotonic DatetimeIndexes &quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">700</span>         <span class="s2">&quot;with non-existing keys is not allowed.&quot;</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">701</span>     <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">702</span> <span class="n">indexer</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">nonzero</span><span class="p">()[</span><span class="mi">0</span><span class="p">][::</span><span class="n">step</span><span class="p">]</span>
<span class="g g-Whitespace">    </span><span class="mi">703</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">indexer</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

<span class="ne">KeyError</span>: &#39;Value based partial slicing on non-monotonic DatetimeIndexes with non-existing keys is not allowed.&#39;
</pre></div>
</div>
</div>
</div>
<p>oops, that failed. The error suggests the index might not be sorted (i.e. it may not be monotonic). Let’s fix that and try again.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cycling</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;2019-10-01&#39;</span><span class="p">:</span><span class="s1">&#39;2019-10-13&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Name</th>
      <th>Type</th>
      <th>Time</th>
      <th>Distance</th>
      <th>Comments</th>
    </tr>
    <tr>
      <th>Date</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019-10-01 00:15:07</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1732</td>
      <td>NaN</td>
      <td>Legs feeling strong!</td>
    </tr>
    <tr>
      <th>2019-10-01 13:45:55</th>
      <td>Morning Ride</td>
      <td>Ride</td>
      <td>2222</td>
      <td>12.82</td>
      <td>Beautiful morning! Feeling fit</td>
    </tr>
    <tr>
      <th>2019-10-02 00:13:09</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1756</td>
      <td>NaN</td>
      <td>A little tired today but good weather</td>
    </tr>
    <tr>
      <th>2019-10-02 13:46:06</th>
      <td>Morning Ride</td>
      <td>Ride</td>
      <td>2134</td>
      <td>13.06</td>
      <td>Bit tired today but good weather</td>
    </tr>
    <tr>
      <th>2019-10-03 00:45:22</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1724</td>
      <td>12.52</td>
      <td>Feeling good</td>
    </tr>
    <tr>
      <th>2019-10-03 13:47:36</th>
      <td>Morning Ride</td>
      <td>Ride</td>
      <td>2182</td>
      <td>12.68</td>
      <td>Wet road</td>
    </tr>
    <tr>
      <th>2019-10-04 01:08:08</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1870</td>
      <td>12.63</td>
      <td>Very tired, riding into the wind</td>
    </tr>
    <tr>
      <th>2019-10-09 13:55:40</th>
      <td>Morning Ride</td>
      <td>Ride</td>
      <td>2149</td>
      <td>12.70</td>
      <td>Really cold! But feeling good</td>
    </tr>
    <tr>
      <th>2019-10-10 00:10:31</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1841</td>
      <td>12.59</td>
      <td>Feeling good after a holiday break!</td>
    </tr>
    <tr>
      <th>2019-10-10 13:47:14</th>
      <td>Morning Ride</td>
      <td>Ride</td>
      <td>2463</td>
      <td>12.79</td>
      <td>Stopped for photo of sunrise</td>
    </tr>
    <tr>
      <th>2019-10-11 00:16:57</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1843</td>
      <td>11.79</td>
      <td>Bike feeling tight, needs an oil and pump</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>For getting all results between a certain time of day (potentially on different days) we can use <code class="docutils literal notranslate"><span class="pre">df.between_time()</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cycling</span><span class="o">.</span><span class="n">between_time</span><span class="p">(</span><span class="s1">&#39;00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;01:00&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Name</th>
      <th>Type</th>
      <th>Time</th>
      <th>Distance</th>
      <th>Comments</th>
    </tr>
    <tr>
      <th>Date</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019-09-10 00:13:04</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>2084</td>
      <td>12.62</td>
      <td>Rain</td>
    </tr>
    <tr>
      <th>2019-09-11 00:23:50</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1863</td>
      <td>12.52</td>
      <td>Wet road but nice weather</td>
    </tr>
    <tr>
      <th>2019-09-12 00:28:05</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1891</td>
      <td>12.48</td>
      <td>Tired by the end of the week</td>
    </tr>
    <tr>
      <th>2019-09-17 00:15:47</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1973</td>
      <td>12.45</td>
      <td>Legs feeling strong!</td>
    </tr>
    <tr>
      <th>2019-09-18 00:15:52</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>2101</td>
      <td>12.48</td>
      <td>Pumped up tires</td>
    </tr>
    <tr>
      <th>2019-09-19 00:30:01</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>48062</td>
      <td>12.48</td>
      <td>Feeling good</td>
    </tr>
    <tr>
      <th>2019-09-24 00:35:42</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>2076</td>
      <td>12.47</td>
      <td>Oiled chain, bike feels smooth</td>
    </tr>
    <tr>
      <th>2019-09-25 00:07:21</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1775</td>
      <td>12.10</td>
      <td>Feeling really tired</td>
    </tr>
    <tr>
      <th>2019-09-26 00:13:33</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1860</td>
      <td>12.52</td>
      <td>raining</td>
    </tr>
    <tr>
      <th>2019-10-01 00:15:07</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1732</td>
      <td>NaN</td>
      <td>Legs feeling strong!</td>
    </tr>
    <tr>
      <th>2019-10-02 00:13:09</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1756</td>
      <td>NaN</td>
      <td>A little tired today but good weather</td>
    </tr>
    <tr>
      <th>2019-10-03 00:45:22</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1724</td>
      <td>12.52</td>
      <td>Feeling good</td>
    </tr>
    <tr>
      <th>2019-10-10 00:10:31</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1841</td>
      <td>12.59</td>
      <td>Feeling good after a holiday break!</td>
    </tr>
    <tr>
      <th>2019-10-11 00:16:57</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1843</td>
      <td>11.79</td>
      <td>Bike feeling tight, needs an oil and pump</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="manipulating-datetimes">
<h3>Manipulating Datetimes<a class="headerlink" href="#manipulating-datetimes" title="Link to this heading">#</a></h3>
<p>For more complex filtering, we may have to <strong>decompose</strong> our timeseries. There are many methods and attributes that we can access.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cycling</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">weekday</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Index([1, 1, 2, 2, 3, 0, 1, 1, 2, 2, 3, 3, 4, 0, 1, 1, 2, 2, 3, 3, 4, 0, 1, 1,
       2, 2, 3, 3, 4, 2, 3, 3, 4],
      dtype=&#39;int32&#39;, name=&#39;Date&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cycling</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">second</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Index([ 4, 18, 50, 19,  5, 48, 47, 34, 53, 52,  1,  9,  5, 41, 42, 24, 21, 41,
       33, 43, 18, 52,  7, 55,  9,  6, 22, 36,  8, 40, 31, 14, 57],
      dtype=&#39;int32&#39;, name=&#39;Date&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cycling</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">day_name</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Index([&#39;Tuesday&#39;, &#39;Tuesday&#39;, &#39;Wednesday&#39;, &#39;Wednesday&#39;, &#39;Thursday&#39;, &#39;Monday&#39;,
       &#39;Tuesday&#39;, &#39;Tuesday&#39;, &#39;Wednesday&#39;, &#39;Wednesday&#39;, &#39;Thursday&#39;, &#39;Thursday&#39;,
       &#39;Friday&#39;, &#39;Monday&#39;, &#39;Tuesday&#39;, &#39;Tuesday&#39;, &#39;Wednesday&#39;, &#39;Wednesday&#39;,
       &#39;Thursday&#39;, &#39;Thursday&#39;, &#39;Friday&#39;, &#39;Monday&#39;, &#39;Tuesday&#39;, &#39;Tuesday&#39;,
       &#39;Wednesday&#39;, &#39;Wednesday&#39;, &#39;Thursday&#39;, &#39;Thursday&#39;, &#39;Friday&#39;, &#39;Wednesday&#39;,
       &#39;Thursday&#39;, &#39;Thursday&#39;, &#39;Friday&#39;],
      dtype=&#39;object&#39;, name=&#39;Date&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cycling</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">month_name</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Index([&#39;September&#39;, &#39;September&#39;, &#39;September&#39;, &#39;September&#39;, &#39;September&#39;,
       &#39;September&#39;, &#39;September&#39;, &#39;September&#39;, &#39;September&#39;, &#39;September&#39;,
       &#39;September&#39;, &#39;September&#39;, &#39;September&#39;, &#39;September&#39;, &#39;September&#39;,
       &#39;September&#39;, &#39;September&#39;, &#39;September&#39;, &#39;September&#39;, &#39;September&#39;,
       &#39;September&#39;, &#39;September&#39;, &#39;October&#39;, &#39;October&#39;, &#39;October&#39;, &#39;October&#39;,
       &#39;October&#39;, &#39;October&#39;, &#39;October&#39;, &#39;October&#39;, &#39;October&#39;, &#39;October&#39;,
       &#39;October&#39;],
      dtype=&#39;object&#39;, name=&#39;Date&#39;)
</pre></div>
</div>
</div>
</div>
<p>If you’re acting on a Series instead of a DatetimeIndex, you can access these methods using <code class="docutils literal notranslate"><span class="pre">.dt</span></code>.</p>
<div class="cell tag_raises-exception docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;2011-12-29&#39;</span><span class="p">,</span> <span class="s1">&#39;2011-12-31&#39;</span><span class="p">))</span>
<span class="n">s</span><span class="o">.</span><span class="n">year</span>  <span class="c1"># raises error</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">AttributeError</span><span class="g g-Whitespace">                            </span>Traceback (most recent call last)
<span class="nn">/var/folders/j_/rfl72ddx1tz52j5wkbd8dc3w0000gn/T/ipykernel_5969/3954837213.py</span> in <span class="ni">?</span><span class="nt">()</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;2011-12-29&#39;</span><span class="p">,</span> <span class="s1">&#39;2011-12-31&#39;</span><span class="p">))</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="n">s</span><span class="o">.</span><span class="n">year</span>  <span class="c1"># raises error</span>

<span class="nn">~/miniforge3/envs/agrigates-test1/lib/python3.9/site-packages/pandas/core/generic.py</span> in <span class="ni">?</span><span class="nt">(self, name)</span>
<span class="g g-Whitespace">   </span><span class="mi">6200</span>             <span class="ow">and</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_accessors</span>
<span class="g g-Whitespace">   </span><span class="mi">6201</span>             <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_info_axis</span><span class="o">.</span><span class="n">_can_hold_identifiers_and_holds_name</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">6202</span>         <span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">6203</span>             <span class="k">return</span> <span class="bp">self</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
<span class="ne">-&gt; </span><span class="mi">6204</span>         <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

<span class="ne">AttributeError</span>: &#39;Series&#39; object has no attribute &#39;year&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">s</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0    2011
1    2011
2    2011
dtype: int32
</pre></div>
</div>
</div>
</div>
<section id="resampling-and-aggregating">
<h4>Resampling and Aggregating<a class="headerlink" href="#resampling-and-aggregating" title="Link to this heading">#</a></h4>
<p>One of the most common operations you will want do when working with time series is resampling to a coarser/finer/regular resolution. For example, you may want to resample daily data to weekly data.</p>
<p>We can do that with the <code class="docutils literal notranslate"><span class="pre">.resample()</span></code> method. For example, let’s resample the irregular cycling timeseries to a regular 12-hourly series</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cycling</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Name</th>
      <th>Type</th>
      <th>Time</th>
      <th>Distance</th>
      <th>Comments</th>
    </tr>
    <tr>
      <th>Date</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019-09-10 00:13:04</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>2084</td>
      <td>12.62</td>
      <td>Rain</td>
    </tr>
    <tr>
      <th>2019-09-10 13:52:18</th>
      <td>Morning Ride</td>
      <td>Ride</td>
      <td>2531</td>
      <td>13.03</td>
      <td>rain</td>
    </tr>
    <tr>
      <th>2019-09-11 00:23:50</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1863</td>
      <td>12.52</td>
      <td>Wet road but nice weather</td>
    </tr>
    <tr>
      <th>2019-09-11 14:06:19</th>
      <td>Morning Ride</td>
      <td>Ride</td>
      <td>2192</td>
      <td>12.84</td>
      <td>Stopped for photo of sunrise</td>
    </tr>
    <tr>
      <th>2019-09-12 00:28:05</th>
      <td>Afternoon Ride</td>
      <td>Ride</td>
      <td>1891</td>
      <td>12.48</td>
      <td>Tired by the end of the week</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cycling</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;1D&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;pandas.core.resample.DatetimeIndexResampler object at 0x11ab4e430&gt;
</pre></div>
</div>
</div>
</div>
<p>The parameter <code class="docutils literal notranslate"><span class="pre">'1D'</span></code> is telling pandas to sample once daily. The letter <code class="docutils literal notranslate"><span class="pre">D</span></code> is the alias for the Daily offset, some other commonly used ones include</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'h'</span></code>, <code class="docutils literal notranslate"><span class="pre">'min'</span></code> and <code class="docutils literal notranslate"><span class="pre">'s'</span></code> for hours, minutes,  and seconds (resp.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'B'</span></code> for business day</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'MS'</span></code> and <code class="docutils literal notranslate"><span class="pre">'ME'</span></code> for month start and month end (resp.)</p></li>
</ul>
<p>A more complete list is available <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#offset-aliases">here</a>.</p>
<p>Let’s examine this <code class="docutils literal notranslate"><span class="pre">Resampler</span></code> object a little more.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cycling</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;2D&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{Timestamp(&#39;2019-09-10 00:00:00&#39;): 4,
 Timestamp(&#39;2019-09-12 00:00:00&#39;): 5,
 Timestamp(&#39;2019-09-14 00:00:00&#39;): 5,
 Timestamp(&#39;2019-09-16 00:00:00&#39;): 8,
 Timestamp(&#39;2019-09-18 00:00:00&#39;): 12,
 Timestamp(&#39;2019-09-20 00:00:00&#39;): 13,
 Timestamp(&#39;2019-09-22 00:00:00&#39;): 14,
 Timestamp(&#39;2019-09-24 00:00:00&#39;): 18,
 Timestamp(&#39;2019-09-26 00:00:00&#39;): 21,
 Timestamp(&#39;2019-09-28 00:00:00&#39;): 21,
 Timestamp(&#39;2019-09-30 00:00:00&#39;): 24,
 Timestamp(&#39;2019-10-02 00:00:00&#39;): 28,
 Timestamp(&#39;2019-10-04 00:00:00&#39;): 29,
 Timestamp(&#39;2019-10-06 00:00:00&#39;): 29,
 Timestamp(&#39;2019-10-08 00:00:00&#39;): 30,
 Timestamp(&#39;2019-10-10 00:00:00&#39;): 33}
</pre></div>
</div>
</div>
</div>
<p>The output isn’t so decipherable, but our data has been aggregated into <em>groups</em>. Since some groups have more than one entry, we need to tell pandas what to do with these. One option is to apply <code class="docutils literal notranslate"><span class="pre">mean()</span></code> to get an aggregated summary for each group.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dfr</span> <span class="o">=</span> <span class="n">cycling</span><span class="p">[[</span><span class="s2">&quot;Time&quot;</span><span class="p">,</span><span class="s2">&quot;Distance&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;1D&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">dfr</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Time</th>
      <th>Distance</th>
    </tr>
    <tr>
      <th>Date</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019-09-10</th>
      <td>2307.5</td>
      <td>12.825</td>
    </tr>
    <tr>
      <th>2019-09-11</th>
      <td>2027.5</td>
      <td>12.680</td>
    </tr>
    <tr>
      <th>2019-09-12</th>
      <td>1891.0</td>
      <td>12.480</td>
    </tr>
    <tr>
      <th>2019-09-13</th>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2019-09-14</th>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2019-09-15</th>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2019-09-16</th>
      <td>2272.0</td>
      <td>12.450</td>
    </tr>
    <tr>
      <th>2019-09-17</th>
      <td>2129.0</td>
      <td>12.525</td>
    </tr>
    <tr>
      <th>2019-09-18</th>
      <td>2502.0</td>
      <td>13.525</td>
    </tr>
    <tr>
      <th>2019-09-19</th>
      <td>25076.0</td>
      <td>12.535</td>
    </tr>
    <tr>
      <th>2019-09-20</th>
      <td>2961.0</td>
      <td>12.810</td>
    </tr>
    <tr>
      <th>2019-09-21</th>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2019-09-22</th>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2019-09-23</th>
      <td>2462.0</td>
      <td>12.680</td>
    </tr>
    <tr>
      <th>2019-09-24</th>
      <td>2198.5</td>
      <td>12.575</td>
    </tr>
    <tr>
      <th>2019-09-25</th>
      <td>1949.5</td>
      <td>12.375</td>
    </tr>
    <tr>
      <th>2019-09-26</th>
      <td>2105.0</td>
      <td>12.715</td>
    </tr>
    <tr>
      <th>2019-09-27</th>
      <td>1712.0</td>
      <td>12.470</td>
    </tr>
    <tr>
      <th>2019-09-28</th>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2019-09-29</th>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2019-09-30</th>
      <td>2118.0</td>
      <td>12.710</td>
    </tr>
    <tr>
      <th>2019-10-01</th>
      <td>1977.0</td>
      <td>12.820</td>
    </tr>
    <tr>
      <th>2019-10-02</th>
      <td>1945.0</td>
      <td>13.060</td>
    </tr>
    <tr>
      <th>2019-10-03</th>
      <td>1953.0</td>
      <td>12.600</td>
    </tr>
    <tr>
      <th>2019-10-04</th>
      <td>1870.0</td>
      <td>12.630</td>
    </tr>
    <tr>
      <th>2019-10-05</th>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2019-10-06</th>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2019-10-07</th>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2019-10-08</th>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2019-10-09</th>
      <td>2149.0</td>
      <td>12.700</td>
    </tr>
    <tr>
      <th>2019-10-10</th>
      <td>2152.0</td>
      <td>12.690</td>
    </tr>
    <tr>
      <th>2019-10-11</th>
      <td>1843.0</td>
      <td>11.790</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>There’s quite a few <code class="docutils literal notranslate"><span class="pre">NaN</span></code>s in there. Some days do not have any data points– we can choose how to handle these using <code class="docutils literal notranslate"><span class="pre">fillna</span></code> (for example, we could fill 0 distance and 0 time).</p>
<p>The resampled index still has much of the same functionality we have seen before:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dfr</span><span class="p">[</span><span class="s1">&#39;Weekday&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dfr</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">day_name</span><span class="p">()</span>
<span class="n">dfr</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Time</th>
      <th>Distance</th>
      <th>Weekday</th>
    </tr>
    <tr>
      <th>Date</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019-09-10</th>
      <td>2307.5</td>
      <td>12.825</td>
      <td>Tuesday</td>
    </tr>
    <tr>
      <th>2019-09-11</th>
      <td>2027.5</td>
      <td>12.680</td>
      <td>Wednesday</td>
    </tr>
    <tr>
      <th>2019-09-12</th>
      <td>1891.0</td>
      <td>12.480</td>
      <td>Thursday</td>
    </tr>
    <tr>
      <th>2019-09-13</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>Friday</td>
    </tr>
    <tr>
      <th>2019-09-14</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>Saturday</td>
    </tr>
    <tr>
      <th>2019-09-15</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>Sunday</td>
    </tr>
    <tr>
      <th>2019-09-16</th>
      <td>2272.0</td>
      <td>12.450</td>
      <td>Monday</td>
    </tr>
    <tr>
      <th>2019-09-17</th>
      <td>2129.0</td>
      <td>12.525</td>
      <td>Tuesday</td>
    </tr>
    <tr>
      <th>2019-09-18</th>
      <td>2502.0</td>
      <td>13.525</td>
      <td>Wednesday</td>
    </tr>
    <tr>
      <th>2019-09-19</th>
      <td>25076.0</td>
      <td>12.535</td>
      <td>Thursday</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We will study aggregate objects in pandas more thoroughly in Lecture 4, when we study the <code class="docutils literal notranslate"><span class="pre">groupby()</span></code> method.</p>
</section>
</section>
<section id="categorical-data">
<h3>Categorical Data<a class="headerlink" href="#categorical-data" title="Link to this heading">#</a></h3>
<p>What is categorical data? A categorical variable takes on a limited, and usually fixed, number of possible values. Examples are gender, social class, blood type, country affiliation, observation time or rating via Likert scales.</p>
<p>What is a Pandas categorical data type? Internally, the data structure consists of a <code class="docutils literal notranslate"><span class="pre">categories</span></code> array and an integer array of <code class="docutils literal notranslate"><span class="pre">codes</span></code> which point to the real value in the <code class="docutils literal notranslate"><span class="pre">categories</span></code> array.</p>
<p>Why use Pandas categoricals?</p>
<ul class="simple">
<li><p>They allow categories to be ordered, which is useful for mapping attributes like color or size to category levels in plots.</p></li>
<li><p>They reduce memory usage and improve performance by storing repeated values more efficiently.</p></li>
<li><p>They improve the performance of certain operations, such as groupby and sorting, by leveraging the categorical nature of the data.</p></li>
</ul>
<p><em>Source: <a class="reference external" href="https://pandas.pydata.org/docs/user_guide/categorical.html">https://pandas.pydata.org/docs/user_guide/categorical.html</a></em></p>
<section id="examples-of-categorical-data-in-pandas">
<h4>Examples of categorical data in Pandas<a class="headerlink" href="#examples-of-categorical-data-in-pandas" title="Link to this heading">#</a></h4>
<p>Let’s load in <code class="docutils literal notranslate"><span class="pre">bean.csv</span></code> from the <code class="docutils literal notranslate"><span class="pre">data</span></code> directory. This file contains a small sample of a dataset from the <a class="reference external" href="https://archive.ics.uci.edu/dataset/602/dry+bean+dataset">UC Irvine Machine Learning Repository</a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bean</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data/bean.csv&#39;</span><span class="p">)</span>
<span class="n">bean</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0.1</th>
      <th>Unnamed: 0</th>
      <th>Area</th>
      <th>Perimeter</th>
      <th>MajorAxisLength</th>
      <th>MinorAxisLength</th>
      <th>AspectRation</th>
      <th>Eccentricity</th>
      <th>ConvexArea</th>
      <th>EquivDiameter</th>
      <th>Extent</th>
      <th>Solidity</th>
      <th>roundness</th>
      <th>Compactness</th>
      <th>ShapeFactor1</th>
      <th>ShapeFactor2</th>
      <th>ShapeFactor3</th>
      <th>ShapeFactor4</th>
      <th>Class</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>111</td>
      <td>1561</td>
      <td>43144</td>
      <td>765.795</td>
      <td>258.033633</td>
      <td>213.190144</td>
      <td>1.210345</td>
      <td>0.563361</td>
      <td>43652</td>
      <td>234.377147</td>
      <td>0.752240</td>
      <td>0.988363</td>
      <td>0.924496</td>
      <td>0.90832</td>
      <td>0.005981</td>
      <td>0.002511</td>
      <td>0.825045</td>
      <td>0.998590</td>
      <td>SEKER</td>
    </tr>
    <tr>
      <th>1</th>
      <td>394</td>
      <td>2156</td>
      <td>56857</td>
      <td>952.885</td>
      <td>328.132376</td>
      <td>221.256783</td>
      <td>1.483039</td>
      <td>0.738466</td>
      <td>57866</td>
      <td>269.058694</td>
      <td>0.794048</td>
      <td>0.982563</td>
      <td>0.786888</td>
      <td>0.81997</td>
      <td>0.005771</td>
      <td>0.001609</td>
      <td>0.672351</td>
      <td>0.997122</td>
      <td>BARBUNYA</td>
    </tr>
    <tr>
      <th>2</th>
      <td>478</td>
      <td>372</td>
      <td>35589</td>
      <td>687.923</td>
      <td>235.063906</td>
      <td>192.994447</td>
      <td>1.217983</td>
      <td>0.570885</td>
      <td>35977</td>
      <td>212.869261</td>
      <td>0.779999</td>
      <td>0.989215</td>
      <td>0.945031</td>
      <td>0.90558</td>
      <td>0.006605</td>
      <td>0.002740</td>
      <td>0.820076</td>
      <td>0.998838</td>
      <td>SEKER</td>
    </tr>
    <tr>
      <th>3</th>
      <td>560</td>
      <td>8551</td>
      <td>43694</td>
      <td>794.323</td>
      <td>305.549901</td>
      <td>182.507247</td>
      <td>1.674180</td>
      <td>0.802012</td>
      <td>44144</td>
      <td>235.866336</td>
      <td>0.799554</td>
      <td>0.989806</td>
      <td>0.870237</td>
      <td>0.77194</td>
      <td>0.006993</td>
      <td>0.001532</td>
      <td>0.595892</td>
      <td>0.997630</td>
      <td>SIRA</td>
    </tr>
    <tr>
      <th>4</th>
      <td>106</td>
      <td>5409</td>
      <td>91641</td>
      <td>1147.618</td>
      <td>448.764563</td>
      <td>261.330642</td>
      <td>1.717229</td>
      <td>0.812950</td>
      <td>92407</td>
      <td>341.585926</td>
      <td>0.809106</td>
      <td>0.991711</td>
      <td>0.874390</td>
      <td>0.76117</td>
      <td>0.004897</td>
      <td>0.001014</td>
      <td>0.579379</td>
      <td>0.994927</td>
      <td>CALI</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>There 18 columns in the dataset. Most are numerical, but the last column contains text data</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bean</span><span class="o">.</span><span class="n">columns</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Index([&#39;Unnamed: 0.1&#39;, &#39;Unnamed: 0&#39;, &#39;Area&#39;, &#39;Perimeter&#39;, &#39;MajorAxisLength&#39;,
       &#39;MinorAxisLength&#39;, &#39;AspectRation&#39;, &#39;Eccentricity&#39;, &#39;ConvexArea&#39;,
       &#39;EquivDiameter&#39;, &#39;Extent&#39;, &#39;Solidity&#39;, &#39;roundness&#39;, &#39;Compactness&#39;,
       &#39;ShapeFactor1&#39;, &#39;ShapeFactor2&#39;, &#39;ShapeFactor3&#39;, &#39;ShapeFactor4&#39;,
       &#39;Class&#39;],
      dtype=&#39;object&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bean</span><span class="p">[</span><span class="s1">&#39;Class&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0         SEKER
1      BARBUNYA
2         SEKER
3          SIRA
4          CALI
         ...   
267       SEKER
268      BOMBAY
269       SEKER
270       SEKER
271    BARBUNYA
Name: Class, Length: 272, dtype: object
</pre></div>
</div>
</div>
</div>
<p>A column of text data could have any number of distinct entries– potentially each one could be different. Let’s check how many unique entries this column contains.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bean</span><span class="p">[</span><span class="s1">&#39;Class&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>7
</pre></div>
</div>
</div>
</div>
<p>There are only 7 possibilities! As it turns out, they correspond to different classes of beans.</p>
<p>Pandas has a <code class="docutils literal notranslate"><span class="pre">category</span></code> data type for columns where the variable takes one of a small (usually fixed) number of categories. We can convert existing columns from <code class="docutils literal notranslate"><span class="pre">object</span></code> to <code class="docutils literal notranslate"><span class="pre">category</span></code> dtype as follows:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bean</span><span class="p">[</span><span class="s1">&#39;Class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bean</span><span class="p">[</span><span class="s1">&#39;Class&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">)</span>
<span class="n">bean</span><span class="p">[</span><span class="s1">&#39;Class&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0         SEKER
1      BARBUNYA
2         SEKER
3          SIRA
4          CALI
         ...   
267       SEKER
268      BOMBAY
269       SEKER
270       SEKER
271    BARBUNYA
Name: Class, Length: 272, dtype: category
Categories (7, object): [&#39;BARBUNYA&#39;, &#39;BOMBAY&#39;, &#39;CALI&#39;, &#39;DERMASON&#39;, &#39;HOROZ&#39;, &#39;SEKER&#39;, &#39;SIRA&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bean</span><span class="p">[</span><span class="s1">&#39;Class&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dtype</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CategoricalDtype(categories=[&#39;BARBUNYA&#39;, &#39;BOMBAY&#39;, &#39;CALI&#39;, &#39;DERMASON&#39;, &#39;HOROZ&#39;, &#39;SEKER&#39;,
                  &#39;SIRA&#39;],
, ordered=False, categories_dtype=object)
</pre></div>
</div>
</div>
</div>
<p>We can look up the categories of a column by accessing the <code class="docutils literal notranslate"><span class="pre">Series.cat.categories</span></code> attribute. So to see the categories of the new ‘Class’ column, write:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bean</span><span class="p">[</span><span class="s1">&#39;Class&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">cat</span><span class="o">.</span><span class="n">categories</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Index([&#39;BARBUNYA&#39;, &#39;BOMBAY&#39;, &#39;CALI&#39;, &#39;DERMASON&#39;, &#39;HOROZ&#39;, &#39;SEKER&#39;, &#39;SIRA&#39;], dtype=&#39;object&#39;)
</pre></div>
</div>
</div>
</div>
<p>Having categorical data is really useful for data vizualization. For example, we can plot bean length and width on the x and y axes (resp.) of a plot, and colour each data point based on the class it belongs to.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">bean</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s1">&#39;MajorAxisLength&#39;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s1">&#39;MinorAxisLength&#39;</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;Class&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="s1">&#39;category10&#39;</span><span class="p">)),</span>
<span class="p">)</span><span class="o">.</span><span class="n">interactive</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">58</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">bean</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span>     <span class="n">x</span><span class="o">=</span><span class="s1">&#39;MajorAxisLength&#39;</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span>     <span class="n">y</span><span class="o">=</span><span class="s1">&#39;MinorAxisLength&#39;</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span>     <span class="n">color</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;Class&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="s1">&#39;category10&#39;</span><span class="p">)),</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="p">)</span><span class="o">.</span><span class="n">interactive</span><span class="p">()</span>

<span class="ne">NameError</span>: name &#39;alt&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>We can clearly see that the beans form clusters based on length and width!</p>
<p>What if we wanted to change the order the colours were assigned to our categories? The default is alphabetical. We could do this to change to reverse alphabetical:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bean</span><span class="p">[</span><span class="s1">&#39;Class&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;SEKER&#39;, &#39;BARBUNYA&#39;, &#39;SIRA&#39;, &#39;CALI&#39;, &#39;DERMASON&#39;, &#39;HOROZ&#39;, &#39;BOMBAY&#39;]
Categories (7, object): [&#39;BARBUNYA&#39;, &#39;BOMBAY&#39;, &#39;CALI&#39;, &#39;DERMASON&#39;, &#39;HOROZ&#39;, &#39;SEKER&#39;, &#39;SIRA&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">category_order</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">bean</span><span class="p">[</span><span class="s1">&#39;Class&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">(),</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">category_order</span>
<span class="c1"># Convert &#39;species&#39; column to a categorical type with the specified order</span>
<span class="n">bean</span><span class="p">[</span><span class="s1">&#39;Class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">(</span><span class="n">bean</span><span class="p">[</span><span class="s1">&#39;Class&#39;</span><span class="p">],</span> <span class="n">categories</span><span class="o">=</span><span class="n">category_order</span><span class="p">,</span> <span class="n">ordered</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">bean</span><span class="p">[</span><span class="s1">&#39;Class&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">cat</span><span class="o">.</span><span class="n">categories</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Index([&#39;SIRA&#39;, &#39;SEKER&#39;, &#39;HOROZ&#39;, &#39;DERMASON&#39;, &#39;CALI&#39;, &#39;BOMBAY&#39;, &#39;BARBUNYA&#39;], dtype=&#39;object&#39;)
</pre></div>
</div>
</div>
</div>
<p>What will our plot look like now?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">bean</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s1">&#39;MajorAxisLength&#39;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s1">&#39;MinorAxisLength&#39;</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;Class&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="s1">&#39;category10&#39;</span><span class="p">))</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">61</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">bean</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span>     <span class="n">x</span><span class="o">=</span><span class="s1">&#39;MajorAxisLength&#39;</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span>     <span class="n">y</span><span class="o">=</span><span class="s1">&#39;MinorAxisLength&#39;</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span>     <span class="n">color</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;Class&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="s1">&#39;category10&#39;</span><span class="p">))</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="p">)</span>

<span class="ne">NameError</span>: name &#39;alt&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>Let’s load another dataset that contains data about book sales on Amazon by reading in <code class="docutils literal notranslate"><span class="pre">data/publishers.csv</span></code>. This data was sourced from <a class="reference external" href="https://corgis-edu.github.io/corgis/csv/">CORGIS</a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pub</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data/publishers.csv&#39;</span><span class="p">,</span> <span class="n">index_col</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Each row contains information on a particular book (although for some reason the dataset omits the book’s title and author!) Let’s see how many unique entries are contained in the <code class="docutils literal notranslate"><span class="pre">'publisher.type'</span></code> column.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pub</span><span class="p">[</span><span class="s1">&#39;publisher.type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>publisher.type
small/medium     226
big five         168
indie            124
single author     95
Name: count, dtype: int64
</pre></div>
</div>
</div>
</div>
<p>There are only four categories, and they have a natural ordering among them. We may want to sort our dataset based on the ‘size’ of the publisher– but our column is an <code class="docutils literal notranslate"><span class="pre">object</span></code> dtype and contains strings. Strings are sorted alphabetically!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pub</span> <span class="o">=</span> <span class="n">pub</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span> <span class="o">=</span> <span class="s1">&#39;publisher.type&#39;</span><span class="p">,</span> <span class="n">ascending</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pub</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;publisher.type&#39;</span><span class="p">])</span> <span class="c1"># Check the first row</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pub</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">240</span><span class="p">][</span><span class="s1">&#39;publisher.type&#39;</span><span class="p">])</span> <span class="c1"># Somewhere in the middle</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pub</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">440</span><span class="p">][</span><span class="s1">&#39;publisher.type&#39;</span><span class="p">])</span> <span class="c1"># Somewhere else in the middle</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pub</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;publisher.type&#39;</span><span class="p">])</span> <span class="c1"># Check the last row</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>small/medium
single author
indie
big five
</pre></div>
</div>
</div>
</div>
<p>That sort wasn’t useful here. Pandas categories, in contrast to strings, can be given any order we choose.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pub</span><span class="p">[</span><span class="s1">&#39;publisher.type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pub</span><span class="p">[</span><span class="s1">&#39;publisher.type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">)</span>
<span class="n">pub</span><span class="p">[</span><span class="s1">&#39;publisher.type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">pub</span><span class="p">[</span><span class="s1">&#39;publisher.type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">cat</span><span class="o">.</span><span class="n">reorder_categories</span><span class="p">(</span>
                                <span class="p">[</span><span class="s1">&#39;single author&#39;</span><span class="p">,</span> <span class="s1">&#39;indie&#39;</span><span class="p">,</span> <span class="s1">&#39;small/medium&#39;</span><span class="p">,</span> <span class="s1">&#39;big five&#39;</span><span class="p">],</span> <span class="n">ordered</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                        <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pub</span> <span class="o">=</span> <span class="n">pub</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;publisher.type&#39;</span><span class="p">,</span> <span class="n">ascending</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">pub</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;publisher.type&#39;</span><span class="p">])</span> <span class="c1"># Check the first row</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pub</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">240</span><span class="p">][</span><span class="s1">&#39;publisher.type&#39;</span><span class="p">])</span> <span class="c1"># Somewhere in the middle</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pub</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">440</span><span class="p">][</span><span class="s1">&#39;publisher.type&#39;</span><span class="p">])</span> <span class="c1"># Somewhere in the middle</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pub</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;publisher.type&#39;</span><span class="p">])</span> <span class="c1"># Check the last row</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>big five
small/medium
indie
single author
</pre></div>
</div>
</div>
</div>
<p>The Data Frame also contains a column called <code class="docutils literal notranslate"><span class="pre">'genre'</span></code>. That’s another candidate for categorical data, so let’s see what unique values it contains.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pub</span><span class="p">[</span><span class="s1">&#39;genre&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>genre
nonfiction          321
genre fiction       201
children             55
fiction              19
comics               14
foreign language      2
Comics                1
Name: count, dtype: int64
</pre></div>
</div>
</div>
</div>
<p>Oops, looks like two spellings (<code class="docutils literal notranslate"><span class="pre">'comics'</span></code> and <code class="docutils literal notranslate"><span class="pre">'Comics'</span></code>) are listed for the same genre! This is a common occurrence. In general, it is best to do your data wrangling first and only convert to the <code class="docutils literal notranslate"><span class="pre">category</span></code> dtype once your data is cleaned up.</p>
</section>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./lecture-notes"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="lecture2_data-types-operators-and-tidy-data.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Lecture 2: Reshaping data</p>
      </div>
    </a>
    <a class="right-next"
       href="lecture4_plotting-merging-and-grouping.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Lecture 4: Plotting, Merging and Grouping</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lecture-learning-objectives">Lecture learning objectives</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#strings">Strings</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#manipulating-strings">Manipulating Strings</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#substrings-splitting-and-joining">Substrings, Splitting and Joining</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#formatted-strings">Formatted Strings</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-string-methods-in-pandas">Using String Methods in Pandas</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#regular-expressions-or-regex">Regular Expressions or REGEX</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#time-series-data">Time Series Data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-datetimes">Creating Datetimes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#converting-existing-data">Converting Existing Data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#indexing-datetimes">Indexing Datetimes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#manipulating-datetimes">Manipulating Datetimes</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#resampling-and-aggregating">Resampling and Aggregating</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#categorical-data">Categorical Data</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#examples-of-categorical-data-in-pandas">Examples of categorical data in Pandas</a></li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By The Jupyter Book community
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>